(()=>{"use strict";const t=t=>t[Math.floor(Math.random()*t.length)],e=t=>{let e,r=t.length;for(;0!=r;)e=Math.floor(Math.random()*r),r--,[t[r],t[e]]=[t[e],t[r]];return t},r=t=>{if(t<=1||t%2==0&&t>2)return!1;for(let e=3;e<=Math.sqrt(t);e+=2)if(t%e==0)return!1;return!0},i=t=>{let e=[];for(let r=0;r<=t;r++)t%r==0&&e.push(r);return e},n=t=>t>=2&&Number.isInteger(Math.log2(t)),o=(t,e)=>e?o(e,t%e):t,a=(t,e)=>`\\href{${e}}{\\color{black}{${t}}}`,l=t=>{let e=0;for(let r=1;r<=t;r++)1===o(r,t)&&e++;return e},h=(t=>{const e=[];for(let r=0;r<=t;r++)e.push(!0);e[0]=!1,e[1]=!1;for(let r=2;r*r<=t;r++)if(!0===e[r])for(let i=r*r;i<=t;i+=r)e[i]=!1;let r=[];for(let i=0;i<=t;i++)e[i]&&r.push(i);return r})(999),s=t=>h.filter((e=>e<=t)).length,m=e=>{let r=[],i=[],n=[];for(let t=1;t<=999;t++)l(t)===e&&r.push(t),s(t)===e&&i.push(t);if(r.length>0){let e=t(r);n.push(`${a("\\varphi","https://en.wikipedia.org/wiki/Euler%27s_totient_function")}(${e})`)}if(i.length>0){let e=t(i);n.push(`${a("\\pi","https://en.wikipedia.org/wiki/Prime-counting_function")}(${e})`)}return(0===n.length||Math.random()<.3)&&n.push(`${e}`),t(n)},u=t=>{if(0===t){let t=Math.floor(20*Math.random());return`{${a("\\lim_{x \\to \\infty}","https://en.wikipedia.org/wiki/List_of_limits#Functions_of_the_form_xa")}{${t}x^{-1}}}`}if(1===t)return`{${a("\\lim_{x \\to \\infty}","https://en.wikipedia.org/wiki/List_of_limits#Functions_of_the_form_xg(x)")}{x^{1/x}}}`;{let e=Math.floor(5*Math.random())+1,r=Math.floor(3*Math.random())+2,i=r-1,n=["-","+"],o=`${e*t}x^{${r}} `,a=`${e}x^{${r}} `;for(let t=r-1;t>0;t--){let e=Math.floor(10*Math.random())+2,r=t<2?"":`^{${t}}`;o+=`${n[Math.floor(2*Math.random())]} ${e}x${r} `}for(let t=i;t>0;t--){let e=Math.floor(10*Math.random())+2,r=t<2?"":`^{${t}}`;a+=`${n[Math.floor(2*Math.random())]} ${e}x${r} `}return`{ \\lim_{x \\to \\infty} { \\frac{${o}}{${a}}} }`}},d=t=>{const e="https://en.wikipedia.org/wiki/Euler%27s_identity";return 0!==t?`{-${t}${a("e^{\\pi i}",e)}}`:`{(${a("e^{\\pi i}",e)} + 1)}`},c=t=>{let e=Math.floor(10*Math.random())+1;if(Math.random()<.5)var r=`\\lim_{x \\to ${t-e}} \\frac{x^2 - ${e**2}}{x - ${e}}`;else r=`\\lim_{x \\to ${t+e}} \\frac{x^2 - ${e**2}}{x + ${e}}`;return`{${r}}`},f=t=>`${t}`,$=(t,e)=>{let r=i(t),n=r[Math.floor(Math.random()*r.length)],o=t/n,a=Math.floor(30*Math.random())+1;return Math.random()<.2?`{{\\left({${e[0](n)}}\\right)}{\\left({${e[1](o)}}\\right)}}`:`{ \\left({${e[0](n)} - ${e[1](a)}}\\right) \\left({${e[2](o)} + ${e[3](a)}}\\right) + {${e[3](a)}}{\\left({${e[3](o)} - ${e[3](n)} + ${e[3](a)}} \\right)} }`},p=(t,e)=>{let r=t**2;return`{\\sqrt{${e[0](r)}}}`},g=(t,e)=>{let r=Math.sqrt(t),i=`${e[0](1)}`,n=1;if(Math.random()<.2){for(let t=0;t<r-1;t++)n+=2,i+=`+ ${e[3](n)}`;return i=`{ ${i} }`,i}{let t=Math.floor(Math.random()*r-1)+1,i=r-t;return Math.random()<.5?`{ {\\left(${e[0](t)} + ${e[0](i)}\\right)}^2}`:`{ {\\left(${e[0](t)}\\right)}^2 + {${e[3](2)}}{\\left(${e[1](t)}\\right)}{\\left(${e[2](i)}\\right)} + {\\left(${e[3](i)}\\right)}^2}`}},M=(t,e)=>{let r=Math.floor(t/2),i=Math.ceil(t/2);return Math.ceil(t/2)**2<100&&Math.random()<.7?`{${e[0](i**2)} - ${e[0](r**2)}}`:`{ \\left({${e[0](i)}}\\right)^2 -  \\left({${e[1](r)}}\\right)^2}`},_=(t,e)=>{let r=Math.floor(Math.random()*t+1)+1,i=t%r,n=Math.floor(t/r);return`${e[0](n)} \\times {${e[1](r)}} + ${e[2](i)}`},x=(t,e)=>{let r=Math.floor(5*Math.random())+1;return`\\frac{${e[0](t*r)}} {${e[1](r)}}`},k=(t,r)=>{const i=(t=>{const e=[];let r=2;for(;t>=2;)t%r==0?(e.push(r),t/=r):r++;return e})(t);let n=new Map;for(const t of i)n.set(t,n.has(t)?n.get(t)+1:1);const o=e(Array.from(n.keys()));let a=Math.floor(Math.random()*(o.length-1))+1,l=o.slice(0,a),h=o.slice(a),s=l.map((t=>t**n.get(t))).reduce(((t,e)=>t*e),1),m=h.map((t=>t**n.get(t))).reduce(((t,e)=>t*e),1);return`\\operatorname{lcm}\\left(${r[0](s)}, ${r[1](m)}\\right)`},w=(t,e)=>{const r=i(t).filter((t=>t%2==1&&1!==t)),n=r[Math.floor(Math.random()*r.length)],o=t/n-(n-1)/2,a=o<0?"-":"+";return`\\sum_{k=0}^{${e[0](n-1)}} \\left(k ${a} ${e[1](Math.abs(o))}\\right)`};let y=document.getElementById("download-img");const b=()=>{var t=document.querySelector("svg"),e=document.getElementById("input").value;let r=parseInt(t.getAttribute("width")),i=parseInt(t.getAttribute("height"));const n=(new XMLSerializer).serializeToString(t),o=`data:image/svg+xml;base64,${btoa(n)}`,a=document.createElement("canvas");let l=Math.max(2,800/i);a.width=r*l,a.height=i*l,console.log({w:a.width,h:a.height});const h=a.getContext("2d"),s=new Image;s.onload=()=>{h.drawImage(s,0,0,a.width,a.height),a.toBlob((t=>{if(null===t)throw new Error("Failed to serialize canvas to blob");((t,e)=>{const r=window.document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=t,r.click()})(`complicated-expression-that-equals-${e}`,t)}))},s.src=o},I=(t,i)=>{if(isNaN(t)||t<0)return;let o=[];i.eulersIdentity&&o.push(d),i.exponentialLimits&&(o.push((t=>((t,e)=>{const r="https://en.wikipedia.org/wiki/List_of_limits#Natural_logarithms";if(0===t)return`{${a("\\lim_{x \\to \\infty}",r)}{ \\frac{\\ln(x)}{x} }}`;if(1===t)return`{${a("\\lim_{x \\to 1}",r)}  {\\frac{\\ln(x)}{x - 1}}}`;{let i=e?m(t):t;return`{${a("\\lim_{x \\to 0}",r)}{ \\frac{-\\ln(1 + ${i}(e^{-x} - 1))}{x} }}`}})(t,i.numberTheory))),o.push((t=>((t,e)=>{const r="https://en.wikipedia.org/wiki/List_of_limits#Sums,_products_and_composites";if(0===t)return`{${a("\\lim_{x \\to \\infty}",r)}{xe^{-x}}}`;if(1===t)return`{${a("\\lim_{x \\to 0}",r)}{ \\frac{e^x - 1}{x} }}`;{let i=e?m(t):t;return`{${a("\\lim_{x \\to 0}",r)}{ \\frac{e^{${i}x} - 1}{x} }}`}})(t,i.numberTheory)))),i.polynomialLimits&&(o.push(c),o.push(u)),i.geometricSeries&&o.push((t=>((t,e)=>{if(0===t){let t="https://en.wikipedia.org/wiki/List_of_mathematical_series#Trigonometric_functions",e=Math.floor(10*Math.random())+3;return`{${a("\\sum",t)}\\limits_{k=0}^{${e-1}} {\\sin \\left({ \\frac{2 \\pi k}{${e}} } \\right)}}`}return 1===t?`{${a("\\lim_{\\epsilon \\to 0}","https://en.wikipedia.org/wiki/Particular_values_of_the_Riemann_zeta_function#The_Riemann_zeta_function_at_0_and_1")}{ \\epsilon \\zeta(1 + \\epsilon) }}`:`{\\sum\\limits_{k=0}^\\infty {\\left({\\frac{${e?m(t-1):t-1}}{${e?m(t):t}}}\\right)^{k}}}`})(t,i.numberTheory))),o=o.map((t=>((t,e)=>r=>{if(Math.random()<=.5){const t=(t=>{const e={2:2,6:3,24:4,120:5,720:6};return t in e&&e[t]})(r);if(t)return((t,e)=>Math.random()<.5&&e?`{${a("\\Gamma","https://en.wikipedia.org/wiki/Gamma_function")} (${t+1})}`:`{\\prod_{k=1}^{${t}} k}`)(t,e.gammaFunction);if(n(r))return((t,e)=>{let r=e?m(t):t;return`{${a(`\\sum_{k=0}^{${r}}`,"https://en.wikipedia.org/wiki/List_of_mathematical_series#Binomial_coefficients_2")} {${t} \\choose k}}`})(Math.log2(r),e.numberTheory)}return t(r)})(t,i)));let l=((t,i)=>{let o=i;for(;o.length<4;)o.push(f);o=e(o).slice(0,4);const a=[];return 0!==t&&t<100&&(2===t||!r(t))&&a.push($),t<10&&a.push(p),t>1&&(t=>Number.isInteger(Math.sqrt(t)))(t)&&t<100&&a.push(g),(t=>t%2!=0)(t)&&a.push(M),t<=200&&a.push(x),!r(t)&&t>1&&a.push(k),!n(t)&&t>1&&a.push(w),a.push(_),e(a)[0](t,o)})(t,o);var h=document.getElementById("display"),s=document.getElementById("render");s.disabled=h.disabled=!0;let y=document.getElementById("download-img"),b=document.getElementById("output");b.innerHTML="",MathJax.texReset();var I=MathJax.getMetricsFor(b);I.display=h.checked,MathJax.tex2svgPromise(l,I).then((function(t){b.appendChild(t),MathJax.startup.document.clear(),MathJax.startup.document.updateDocument(),y.style.display="block"})).catch((function(t){b.appendChild(document.createElement("pre")).appendChild(document.createTextNode(t.message))})).then((function(){s.disabled=h.disabled=!1}))};(()=>{const t=document.getElementById("form"),e=document.getElementById("input"),r=document.getElementById("gamma-function"),i=document.getElementById("eulers-identity"),n=document.getElementById("limits-exponential"),o=document.getElementById("limits-polynomial"),a=document.getElementById("number-theory"),l=document.getElementById("geometric-series");t.addEventListener("submit",(t=>{t.preventDefault(),I(parseInt(e.value),{gammaFunction:r.checked,eulersIdentity:i.checked,exponentialLimits:n.checked,polynomialLimits:o.checked,numberTheory:a.checked,geometricSeries:l.checked})})),y.addEventListener("click",b)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDQ2tCLE9BQU0sU0FBU0MsR0FFWmhCLEVBQ0tVLFlBQVk1RSxTQUFTZ0IsY0FBYyxRQUNuQzRELFlBQVk1RSxTQUFTbUYsZUFBZUQsRUFBSUUsU0FDakQsSUFDQ1YsTUFBSyxXQUVGVixFQUFPQyxTQUFXRixFQUFRRSxVQUFXLENBQ3pDLEdBQUUsRUFFRyxNQUNULE1BQU1vQixFQUFPckYsU0FBU0MsZUFBZSxRQUMvQjNDLEVBQVMwQyxTQUFTQyxlQUFlLFNBRWpDcUQsRUFBZ0J0RCxTQUFTQyxlQUFlLGtCQUN4Q2hELEVBQWlCK0MsU0FBU0MsZUFBZSxtQkFDekMyQyxFQUFvQjVDLFNBQVNDLGVBQWUsc0JBQzVDOEMsRUFBbUIvQyxTQUFTQyxlQUFlLHFCQUMzQzZDLEVBQWU5QyxTQUFTQyxlQUFlLGlCQUN2QytDLEVBQWtCaEQsU0FBU0MsZUFBZSxvQkFFaERvRixFQUFLQyxpQkFBaUIsVUFBVUMsSUFDNUJBLEVBQU1DLGlCQUVOaEQsRUFBUWpDLFNBQVNqRCxFQUFPK0MsT0FBUSxDQUM1QmlELGNBQWVBLEVBQWNrQixRQUM3QnZILGVBQWdCQSxFQUFldUgsUUFDL0I1QixrQkFBbUJBLEVBQWtCNEIsUUFDckN6QixpQkFBa0JBLEVBQWlCeUIsUUFDbkMxQixhQUFjQSxFQUFhMEIsUUFDM0J4QixnQkFBaUJBLEVBQWdCd0IsU0FDbkMsSURoRE56RSxFQUFZdUYsaUJBQWlCLFFBQVNwRixFQ21EbkIsRUFHdkIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL251bTJtYXRoLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL251bTJtYXRoLy4vc3JjL3JlcHJlc2VudGF0aW9ucy50cyIsIndlYnBhY2s6Ly9udW0ybWF0aC8uL3NyYy9kZWNvbXBvc2l0aW9ucy50cyIsIndlYnBhY2s6Ly9udW0ybWF0aC8uL3NyYy9kb3dubG9hZC1wbmcudHMiLCJ3ZWJwYWNrOi8vbnVtMm1hdGgvLi9zcmMvc2NyaXB0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgb3BlcmF0aW9uID0gKG46IG51bWJlcikgPT4gc3RyaW5nO1xuXG50eXBlIENvbnZlcnRPcHRpb25zID0ge1xuICAgIGdhbW1hRnVuY3Rpb246IGJvb2xlYW47XG4gICAgZXVsZXJzSWRlbnRpdHk6IGJvb2xlYW47XG4gICAgZXhwb25lbnRpYWxMaW1pdHM6IGJvb2xlYW47XG4gICAgcG9seW5vbWlhbExpbWl0czogYm9vbGVhbjtcbiAgICBudW1iZXJUaGVvcnk6IGJvb2xlYW47XG4gICAgZ2VvbWV0cmljU2VyaWVzOiBib29sZWFuO1xufTtcblxuY29uc3QgcmFuZG9tRWxlbWVudCA9IDxBPihhcnJheTogQVtdKSA9PiB7XG4gICAgcmV0dXJuIGFycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aCldO1xufTtcblxuY29uc3Qgc2h1ZmZsZSA9IDxBPihhcnJheTogQVtdKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgcmFuZG9tSW5kZXg7XG5cbiAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZS5cbiAgICB3aGlsZSAoY3VycmVudEluZGV4ICE9IDApIHtcbiAgICAgICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW50LlxuICAgICAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGN1cnJlbnRJbmRleCk7XG4gICAgICAgIGN1cnJlbnRJbmRleC0tO1xuXG4gICAgICAgIC8vIEFuZCBzd2FwIGl0IHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudC5cbiAgICAgICAgW2FycmF5W2N1cnJlbnRJbmRleF0sIGFycmF5W3JhbmRvbUluZGV4XV0gPSBbYXJyYXlbcmFuZG9tSW5kZXhdLCBhcnJheVtjdXJyZW50SW5kZXhdXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyYXk7XG59O1xuXG5jb25zdCBpc09kZCA9IChuOiBudW1iZXIpID0+IG4gJSAyICE9PSAwO1xuXG5jb25zdCBpc1NxdWFyZSA9IChuOiBudW1iZXIpID0+IE51bWJlci5pc0ludGVnZXIoTWF0aC5zcXJ0KG4pKTtcblxuY29uc3QgaXNQcmltZSA9IChuOiBudW1iZXIpID0+IHtcbiAgICBpZiAobiA8PSAxIHx8IChuICUgMiA9PSAwICYmIG4gPiAyKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChsZXQgaSA9IDM7IGkgPD0gTWF0aC5zcXJ0KG4pOyBpICs9IDIpIHtcbiAgICAgICAgaWYgKG4gJSBpID09PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcblxuY29uc3QgZ2V0RmFjdG9ycyA9IChuOiBudW1iZXIpID0+IHtcbiAgICBsZXQgZmFjdG9ycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG47IGkrKykge1xuICAgICAgICBpZiAobiAlIGkgPT09IDApIHtcbiAgICAgICAgICAgIGZhY3RvcnMucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFjdG9ycztcbn07XG5cbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81MzY0MzM0MC8xMzk5NjM4OVxuY29uc3QgZ2V0UHJpbWVGYWN0b3JzID0gKG46IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGZhY3RvcnMgPSBbXTtcbiAgICBsZXQgZGl2aXNvciA9IDI7XG5cbiAgICB3aGlsZSAobiA+PSAyKSB7XG4gICAgICAgIGlmIChuICUgZGl2aXNvciA9PSAwKSB7XG4gICAgICAgICAgICBmYWN0b3JzLnB1c2goZGl2aXNvcik7XG4gICAgICAgICAgICBuIC89IGRpdmlzb3I7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXZpc29yKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhY3RvcnM7XG59O1xuXG4vLyBDaGVja2luZyBpZiBhIG51bWJlciBjYW4gYmUgZm9ybWVkIHVzaW5nIGZhY3RvcmlhbFxuY29uc3QgaXNGYWN0b3JpYWwgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgZmFjdG9yaWFsczogeyBba2V5OiBudW1iZXJdOiBudW1iZXIgfSA9IHtcbiAgICAgICAgMjogMixcbiAgICAgICAgNjogMyxcbiAgICAgICAgMjQ6IDQsXG4gICAgICAgIDEyMDogNSxcbiAgICAgICAgNzIwOiA2LFxuICAgIH07XG5cbiAgICBpZiAobiBpbiBmYWN0b3JpYWxzKSB7XG4gICAgICAgIHJldHVybiBmYWN0b3JpYWxzW25dO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuXG5jb25zdCBpc1BvdzIgPSAobjogbnVtYmVyKSA9PiBuID49IDIgJiYgTnVtYmVyLmlzSW50ZWdlcihNYXRoLmxvZzIobikpO1xuXG5jb25zdCBnY2QgPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICAgIGlmICghYikge1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2NkKGIsIGEgJSBiKTtcbn07XG5cbmNvbnN0IGhyZWYgPSAoczogc3RyaW5nLCB1cmw6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBgXFxcXGhyZWZ7JHt1cmx9fXtcXFxcY29sb3J7YmxhY2t9eyR7c319fWA7XG59O1xuXG5leHBvcnQge1xuICAgIG9wZXJhdGlvbixcbiAgICBDb252ZXJ0T3B0aW9ucyxcbiAgICByYW5kb21FbGVtZW50LFxuICAgIHNodWZmbGUsXG4gICAgaXNPZGQsXG4gICAgaXNTcXVhcmUsXG4gICAgaXNQcmltZSxcbiAgICBnZXRGYWN0b3JzLFxuICAgIGdldFByaW1lRmFjdG9ycyxcbiAgICBpc0ZhY3RvcmlhbCxcbiAgICBpc1BvdzIsXG4gICAgZ2NkLFxuICAgIGhyZWYsXG59O1xuIiwiLyoqXG4gKiBFeHBsb2l0cyB0aGUgW1N0cm9uZyBsYXcgb2Ygc21hbGwgbnVtYmVyc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3Ryb25nX2xhd19vZl9zbWFsbF9udW1iZXJzKSB0b1xuICogZmluZCBwcm9wZXJ0aWVzIG9mIHRoZSBzbWFsbGVyIG51bWJlcnMgZ2l2ZW4gYnkgdGhlIGRlY29tcG9zaXRpb25zLCBzdWNoIGFzIHRoZSBldWxlciBwaGkgYW5kIHByaW1lIGNvdW50aW5nIGZ1bmN0aW9ucyxcbiAqIGZhY3RvcmlhbC9nYW1tYSwgYW5kIG1vcmUuXG4gKi9cblxuaW1wb3J0IHsgZ2NkLCByYW5kb21FbGVtZW50LCBocmVmIH0gZnJvbSAnLi91dGlscyc7XG5cbmNvbnN0IF9ldWxlclBoaSA9IChuOiBudW1iZXIpID0+IHtcbiAgICBsZXQgeCA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBuOyBpKyspIHtcbiAgICAgICAgaWYgKGdjZChpLCBuKSA9PT0gMSkge1xuICAgICAgICAgICAgeCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHg7XG59O1xuXG5jb25zdCBfcHJpbWVTaWV2ZSA9IChuOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBwcmltZVNpZXZlID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgIHByaW1lU2lldmUucHVzaCh0cnVlKTtcbiAgICB9XG4gICAgcHJpbWVTaWV2ZVswXSA9IGZhbHNlO1xuICAgIHByaW1lU2lldmVbMV0gPSBmYWxzZTtcblxuICAgIGZvciAobGV0IHAgPSAyOyBwICogcCA8PSBuOyBwKyspIHtcbiAgICAgICAgaWYgKHByaW1lU2lldmVbcF0gPT09IHRydWUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBwICogcDsgaSA8PSBuOyBpICs9IHApIHtcbiAgICAgICAgICAgICAgICBwcmltZVNpZXZlW2ldID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcmVzUHJpbWVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgIGlmIChwcmltZVNpZXZlW2ldKSB7XG4gICAgICAgICAgICByZXNQcmltZXMucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzUHJpbWVzO1xufTtcblxuY29uc3QgX2NhY2hlZFByaW1lcyA9IF9wcmltZVNpZXZlKDk5OSk7XG5cbmNvbnN0IF9wcmltZUNvdW50aW5nRnVuY3Rpb24gPSAobjogbnVtYmVyKSA9PiB7XG4gICAgcmV0dXJuIF9jYWNoZWRQcmltZXMuZmlsdGVyKHggPT4geCA8PSBuKS5sZW5ndGg7XG59O1xuXG5jb25zdCBudW1iZXJUaGVvcnlGdW5jdGlvbnMgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgbGV0IG1hdGNoaW5nUGhpSW5wdXRzID0gW107XG4gICAgbGV0IG1hdGNoaW5nUGlJbnB1dHMgPSBbXTtcbiAgICBsZXQgZnVuY3Rpb25PcHRpb25zID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA5OTk7IGkrKykge1xuICAgICAgICBpZiAoX2V1bGVyUGhpKGkpID09PSBuKSB7XG4gICAgICAgICAgICBtYXRjaGluZ1BoaUlucHV0cy5wdXNoKGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9wcmltZUNvdW50aW5nRnVuY3Rpb24oaSkgPT09IG4pIHtcbiAgICAgICAgICAgIG1hdGNoaW5nUGlJbnB1dHMucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXRjaGluZ1BoaUlucHV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxldCBtYXRjaGluZ0lucHV0ID0gcmFuZG9tRWxlbWVudChtYXRjaGluZ1BoaUlucHV0cyk7XG5cbiAgICAgICAgZnVuY3Rpb25PcHRpb25zLnB1c2goXG4gICAgICAgICAgICBgJHtocmVmKFxuICAgICAgICAgICAgICAgICdcXFxcdmFycGhpJyxcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXVsZXIlMjdzX3RvdGllbnRfZnVuY3Rpb24nXG4gICAgICAgICAgICApfSgke21hdGNoaW5nSW5wdXR9KWBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAobWF0Y2hpbmdQaUlucHV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxldCBtYXRjaGluZ0lucHV0ID0gcmFuZG9tRWxlbWVudChtYXRjaGluZ1BpSW5wdXRzKTtcbiAgICAgICAgZnVuY3Rpb25PcHRpb25zLnB1c2goXG4gICAgICAgICAgICBgJHtocmVmKFxuICAgICAgICAgICAgICAgICdcXFxccGknLFxuICAgICAgICAgICAgICAgICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QcmltZS1jb3VudGluZ19mdW5jdGlvbidcbiAgICAgICAgICAgICl9KCR7bWF0Y2hpbmdJbnB1dH0pYFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmIChmdW5jdGlvbk9wdGlvbnMubGVuZ3RoID09PSAwIHx8IE1hdGgucmFuZG9tKCkgPCAwLjMpIHtcbiAgICAgICAgZnVuY3Rpb25PcHRpb25zLnB1c2goYCR7bn1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZG9tRWxlbWVudChmdW5jdGlvbk9wdGlvbnMpO1xufTtcblxuY29uc3QgZmFjdG9yaWFsID0gKG46IG51bWJlciwgZ2FtbWFGdW5jdGlvbkVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSAmJiBnYW1tYUZ1bmN0aW9uRW5hYmxlZCkge1xuICAgICAgICAvLyDOkyhuKSA9IChuLTEpIVxuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxHYW1tYScsICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HYW1tYV9mdW5jdGlvbicpfSAoJHtuICsgMX0pfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNpbmcgdGhlIHBpIHByb2R1Y3Qgbm90YXRpb24gb2YgZmFjdG9yaWFsXG4gICAgICAgIHJldHVybiBge1xcXFxwcm9kX3trPTF9Xnske259fSBrfWA7XG4gICAgfVxufTtcblxuLy8gcmVwcmVzZW50YXRpb24gb2YgMl5uXG5jb25zdCBwb3cyQ2hvb3NlID0gKG46IG51bWJlciwgbnVtYmVyVGhlb3J5RW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIGxldCB4ID0gbnVtYmVyVGhlb3J5RW5hYmxlZCA/IG51bWJlclRoZW9yeUZ1bmN0aW9ucyhuKSA6IG47XG4gICAgcmV0dXJuIGB7JHtocmVmKFxuICAgICAgICBgXFxcXHN1bV97az0wfV57JHt4fX1gLFxuICAgICAgICAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9tYXRoZW1hdGljYWxfc2VyaWVzI0Jpbm9taWFsX2NvZWZmaWNpZW50c18yJ1xuICAgICl9IHske259IFxcXFxjaG9vc2Uga319YDtcbn07XG5cbi8vIExpbWl0cyBvZiBuYXR1cmFsIGxvZyBmdW5jdGlvbnM6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbGltaXRzI05hdHVyYWxfbG9nYXJpdGhtc1xuY29uc3QgbGltaXROYXR1cmFsTG9nID0gKG46IG51bWJlciwgbnVtYmVyVGhlb3J5RW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIGNvbnN0IHVybCA9ICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX2xpbWl0cyNOYXR1cmFsX2xvZ2FyaXRobXMnO1xuXG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byBcXFxcaW5mdHl9JywgdXJsKX17IFxcXFxmcmFje1xcXFxsbih4KX17eH0gfX1gO1xuICAgIH0gZWxzZSBpZiAobiA9PT0gMSkge1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIDF9JywgdXJsKX0gIHtcXFxcZnJhY3tcXFxcbG4oeCl9e3ggLSAxfX19YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgeCA9IG51bWJlclRoZW9yeUVuYWJsZWQgPyBudW1iZXJUaGVvcnlGdW5jdGlvbnMobikgOiBuO1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIDB9JywgdXJsKX17IFxcXFxmcmFjey1cXFxcbG4oMSArICR7eH0oZV57LXh9IC0gMSkpfXt4fSB9fWA7XG4gICAgfVxufTtcblxuLy8gTGltaXRzIG9mIGV4cG9uZW50aWFsIGZ1bmN0aW9uczogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9saW1pdHMjU3VtcyxfcHJvZHVjdHNfYW5kX2NvbXBvc2l0ZXNcbmNvbnN0IGxpbWl0RXhwb25lbnRpYWwgPSAobjogbnVtYmVyLCBudW1iZXJUaGVvcnlFbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbGltaXRzI1N1bXMsX3Byb2R1Y3RzX2FuZF9jb21wb3NpdGVzJztcblxuICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gXFxcXGluZnR5fScsIHVybCl9e3hlXnsteH19fWA7XG4gICAgfSBlbHNlIGlmIChuID09PSAxKSB7XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gMH0nLCB1cmwpfXsgXFxcXGZyYWN7ZV54IC0gMX17eH0gfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB4ID0gbnVtYmVyVGhlb3J5RW5hYmxlZCA/IG51bWJlclRoZW9yeUZ1bmN0aW9ucyhuKSA6IG47XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gMH0nLCB1cmwpfXsgXFxcXGZyYWN7ZV57JHt4fXh9IC0gMX17eH0gfX1gO1xuICAgIH1cbn07XG5cbi8vIExpbWl0cyBvZiBwb2x5bm9taWFsIGZ1bmN0aW9uc1xuY29uc3QgbGltaXRQb2x5bm9taWFsID0gKG46IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHVybCA9ICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX2xpbWl0cyNGdW5jdGlvbnNfb2ZfdGhlX2Zvcm1feGEnO1xuICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgIGxldCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjApO1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIFxcXFxpbmZ0eX0nLCB1cmwpfXske3J9eF57LTF9fX1gO1xuICAgIH0gZWxzZSBpZiAobiA9PT0gMSkge1xuICAgICAgICBjb25zdCB1cmwyID0gJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbGltaXRzI0Z1bmN0aW9uc19vZl90aGVfZm9ybV94Zyh4KSc7XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gXFxcXGluZnR5fScsIHVybDIpfXt4XnsxL3h9fX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGdlbmVyYXRlIHJhbmRvbSBwb2x5bm9taWFsIGxpbWl0cyBsaWtlIGxpbSB4IC0+IOKIniAoMjh4XjIgLSAxMXgpLyg0eF4yICsgMTB4KVxuICAgICAgICAvLyBzaW5jZSB0aGUgaGlnaGVzdCBwb3dlciB0ZXJtcyBkb21pbmF0ZSBpbiB0aGUgbGltaXRzLCB0aGUgcmVzdCBhcmUgaWdub3JlZCBhbmQgY2FuIGJlIHJhbmRvbVxuXG4gICAgICAgIC8vIEdldCByYW5kb20gbXVsdGlwbGllciBncmVhdGVyIHRoYW4gMVxuICAgICAgICBsZXQgbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpICsgMTtcbiAgICAgICAgLy8gQ2hvb3NlIGEgcmFuZG9tIGhpZ2hlc3QgcG93ZXIuIFRoaXMgZGV0ZXJtaW5lcyB0aGUgZmluYWwgc29sdXRpb24gb2YgdGhlIGxpbWl0XG4gICAgICAgIGxldCBoaWdoZXN0UG93ZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSArIDI7XG5cbiAgICAgICAgbGV0IG51bWVyYXRvck51bWJlck9mVGVybXMgPSBoaWdoZXN0UG93ZXIgLSAxO1xuICAgICAgICBsZXQgZGVub21pbmF0b3JOdW1iZXJPZlRlcm1zID0gaGlnaGVzdFBvd2VyIC0gMTtcblxuICAgICAgICBsZXQgc2lnbnMgPSBbJy0nLCAnKyddO1xuICAgICAgICBsZXQgbnVtZXJhdG9yID0gYCR7bSAqIG59eF57JHtoaWdoZXN0UG93ZXJ9fSBgO1xuICAgICAgICBsZXQgZGVub21pbmF0b3IgPSBgJHttfXheeyR7aGlnaGVzdFBvd2VyfX0gYDtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBhIHBvbHlub21pYWwgbnVtZXJhdG9yIHdpdGggcmFuZG9tIGxlbmd0aCBhbmQgY29lZmZpY2llbnRzXG4gICAgICAgIC8vZXg6IDE1eF4yXG4gICAgICAgIGZvciAobGV0IGkgPSBudW1lcmF0b3JOdW1iZXJPZlRlcm1zOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgY29lZiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDI7XG5cbiAgICAgICAgICAgIGxldCBwb3dlciA9IGkgPCAyID8gJycgOiBgXnske2l9fWA7XG4gICAgICAgICAgICBsZXQgc2lnbiA9IHNpZ25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpXTtcblxuICAgICAgICAgICAgbnVtZXJhdG9yICs9IGAke3NpZ259ICR7Y29lZn14JHtwb3dlcn0gYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgcG9seW5vbWlhbCBkZW5vbWluYXRvciB3aXRoIHJhbmRvbSBsZW5ndGggYW5kIGNvZWZmaWNpZW50c1xuICAgICAgICBmb3IgKGxldCBpID0gZGVub21pbmF0b3JOdW1iZXJPZlRlcm1zOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgY29lZiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDI7XG5cbiAgICAgICAgICAgIGxldCBwb3dlciA9IGkgPCAyID8gJycgOiBgXnske2l9fWA7XG4gICAgICAgICAgICBsZXQgc2lnbiA9IHNpZ25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpXTtcblxuICAgICAgICAgICAgZGVub21pbmF0b3IgKz0gYCR7c2lnbn0gJHtjb2VmfXgke3Bvd2VyfSBgO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGB7IFxcXFxsaW1fe3ggXFxcXHRvIFxcXFxpbmZ0eX0geyBcXFxcZnJhY3ske251bWVyYXRvcn19eyR7ZGVub21pbmF0b3J9fX0gfWA7XG4gICAgfVxufTtcblxuLy8gVXNpbmcgZXVsZXIncyBpZGVudGl0eS4gVGhhdCBpcywgZV4ocGkqaSkgPSAtMVxuY29uc3QgZXVsZXJzSWRlbnRpdHkgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgLy8gZS5nIOKIkjZlXihwaSppKT02XG5cbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXVsZXIlMjdzX2lkZW50aXR5JztcblxuICAgIGlmIChuICE9PSAwKSB7XG4gICAgICAgIHJldHVybiBgey0ke259JHtocmVmKCdlXntcXFxccGkgaX0nLCB1cmwpfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgeygke2hyZWYoJ2Vee1xcXFxwaSBpfScsIHVybCl9ICsgMSl9YDtcbiAgICB9XG59O1xuXG4vLyBJbmZpbml0ZSBnZW9tZXRyaWMgc2VyaWVzIHRoYXQgZXZhbHVhdGVzIHRvIGEgZmluaXRlIHZhbHVlXG5jb25zdCBpbmZpbml0ZUdlb21ldHJpY1NlcmllcyA9IChuOiBudW1iZXIsIG51bWJlclRoZW9yeUVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICBsZXQgdXJsID1cbiAgICAgICAgICAgICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX21hdGhlbWF0aWNhbF9zZXJpZXMjVHJpZ29ub21ldHJpY19mdW5jdGlvbnMnO1xuICAgICAgICBsZXQgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDM7XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXHN1bScsIHVybCl9XFxcXGxpbWl0c197az0wfV57JHtyIC1cbiAgICAgICAgICAgIDF9fSB7XFxcXHNpbiBcXFxcbGVmdCh7IFxcXFxmcmFjezIgXFxcXHBpIGt9eyR7cn19IH0gXFxcXHJpZ2h0KX19YDtcbiAgICB9XG5cbiAgICAvLyBVc2luZyB0aGUgUmllbWFubiB6ZXRhIGZ1bmN0aW9uXG4gICAgZWxzZSBpZiAobiA9PT0gMSkge1xuICAgICAgICBsZXQgdXJsID1cbiAgICAgICAgICAgICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXJ0aWN1bGFyX3ZhbHVlc19vZl90aGVfUmllbWFubl96ZXRhX2Z1bmN0aW9uI1RoZV9SaWVtYW5uX3pldGFfZnVuY3Rpb25fYXRfMF9hbmRfMSc7XG5cbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3tcXFxcZXBzaWxvbiBcXFxcdG8gMH0nLCB1cmwpfXsgXFxcXGVwc2lsb24gXFxcXHpldGEoMSArIFxcXFxlcHNpbG9uKSB9fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNpbmcgdGhlIGluZmluaXRlIGdlb21ldHJpYyBzZXJpZXMgcnVsZTogV2hlbiDiiJIxPHg8MSwgc3VtbWF0aW9uIGZyb20gaSA9IDAgdG8gaW5maW5pdHkgb2Ygcl5pID0gMS8oMS1yKSBvciAoci0xKS9yLlxuICAgICAgICAvLyBEZWNpbWFsIGNhbiBiZSByZXByZXNlbnRlZCBhcyBmcmFjdGlvbiB0b28uIGUuZyAoMC4yNSleaSA9ICgxLzQpXmkgPSA0Xi1pXG4gICAgICAgIGxldCB4MSA9IG51bWJlclRoZW9yeUVuYWJsZWQgPyBudW1iZXJUaGVvcnlGdW5jdGlvbnMobiAtIDEpIDogbiAtIDE7XG4gICAgICAgIGxldCB4MiA9IG51bWJlclRoZW9yeUVuYWJsZWQgPyBudW1iZXJUaGVvcnlGdW5jdGlvbnMobikgOiBuO1xuICAgICAgICByZXR1cm4gYHtcXFxcc3VtXFxcXGxpbWl0c197az0wfV5cXFxcaW5mdHkge1xcXFxsZWZ0KHtcXFxcZnJhY3ske3gxfX17JHt4Mn19fVxcXFxyaWdodClee2t9fX1gO1xuICAgIH1cbn07XG5cbi8vIFVzaW5nIHRoZSB0cmlnIGlkZW50aXR5IChjb3NeMil4ICsgKHNpbl4yKXggPSAxXG5jb25zdCB0cmlnSWRlbnRpdHkgPSAoZXhwcmVzc2lvbjogc3RyaW5nKSA9PiB7XG4gICAgbGV0IHJhbmRvbVZhbHVlID0gTWF0aC5yYW5kb20oKTtcbiAgICBpZiAocmFuZG9tVmFsdWUgPCAwLjI1KSB7XG4gICAgICAgIHJldHVybiBgXFxcXGxlZnQoXFxcXGZyYWN7JHtleHByZXNzaW9ufX17KFxcXFxjb3NeMnggKyBcXFxcc2luXjJ4KX1cXFxccmlnaHQpYDtcbiAgICB9IGVsc2UgaWYgKHJhbmRvbVZhbHVlIDwgMC41KSB7XG4gICAgICAgIHJldHVybiBgXFxcXGxlZnQoeyR7ZXhwcmVzc2lvbn0gXFxcXHRpbWVzIChcXFxcY29zXjJ4ICsgXFxcXHNpbl4yeCl9XFxcXHJpZ2h0KWA7XG4gICAgfVxufTtcblxuLyogVXNpbmcgdGhlIGRpZmZlcmVuY2Ugb2YgdHdvIHNxdWFyZXMgaW4gbGltaXRzICovXG5jb25zdCBsaW1EaWZmVHdvU3F1YXJlcyA9IChuOiBudW1iZXIpID0+IHtcbiAgICBsZXQgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDE7XG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcbiAgICAgICAgdmFyIHRleCA9IGBcXFxcbGltX3t4IFxcXFx0byAke24gLSByfX0gXFxcXGZyYWN7eF4yIC0gJHtyICoqIDJ9fXt4IC0gJHtyfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0ZXggPSBgXFxcXGxpbV97eCBcXFxcdG8gJHtuICsgcn19IFxcXFxmcmFje3heMiAtICR7ciAqKiAyfX17eCArICR7cn19YDtcbiAgICB9XG4gICAgcmV0dXJuIGB7JHt0ZXh9fWA7XG59O1xuXG5jb25zdCBzYW1lTnVtYmVyID0gKG46IG51bWJlcikgPT4gYCR7bn1gO1xuXG5leHBvcnQge1xuICAgIG51bWJlclRoZW9yeUZ1bmN0aW9ucyxcbiAgICBmYWN0b3JpYWwsXG4gICAgcG93MkNob29zZSxcbiAgICBsaW1pdE5hdHVyYWxMb2csXG4gICAgbGltaXRFeHBvbmVudGlhbCxcbiAgICBsaW1pdFBvbHlub21pYWwsXG4gICAgZXVsZXJzSWRlbnRpdHksXG4gICAgaW5maW5pdGVHZW9tZXRyaWNTZXJpZXMsXG4gICAgdHJpZ0lkZW50aXR5LFxuICAgIGxpbURpZmZUd29TcXVhcmVzLFxuICAgIHNhbWVOdW1iZXIsXG59O1xuIiwiLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgZGVjb21wb3NpdGlvbiBmdW5jdGlvbnMuIFRoZXkgYnJlYWsgbGFyZ2VyIG51bWJlcnMgKDMtZGlnaXQpIGludG8gc21hbGxlciBvbmVzICgyLTEgZGlnaXRzKSxcbiAqIHdoZXJlIHRoZSBbU3Ryb25nIGxhdyBvZiBzbWFsbCBudW1iZXJzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdHJvbmdfbGF3X29mX3NtYWxsX251bWJlcnMpIGNhbiB0YWtlIG9mIHRoZW1cbiAqIGFzIHRoZXkgaGF2ZSBtdWNoIG1vcmUgcHJvcGVydGllcyB0aGFuIGxhcmdlciBudW1iZXJzLlxuICovXG5cbmltcG9ydCB7XG4gICAgb3BlcmF0aW9uLFxuICAgIGdldEZhY3RvcnMsXG4gICAgZ2V0UHJpbWVGYWN0b3JzLFxuICAgIENvbnZlcnRPcHRpb25zLFxuICAgIGlzRmFjdG9yaWFsLFxuICAgIGlzUG93MixcbiAgICBzaHVmZmxlLFxuICAgIGlzUHJpbWUsXG4gICAgaXNTcXVhcmUsXG4gICAgaXNPZGQsXG59IGZyb20gJy4vdXRpbHMnO1xuXG50eXBlIGRlY29tcG9zaXRpb24gPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiBzdHJpbmc7XG5cbmltcG9ydCAqIGFzIHJlcHJlc2VudGF0aW9ucyBmcm9tICcuL3JlcHJlc2VudGF0aW9ucyc7XG5cbi8vIGZvciBuID0gYWIgYW5kIOKIgGMsIGVpdGhlciByZXR1cm4gbiA9IGFiIG9yIChhLWMpKGIrYykgKyBjKGItYStjKVxuY29uc3QgZGVjb21wb3NlQUJDID0gKG51bWJlcjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgbGV0IGZhY3RvcnMgPSBnZXRGYWN0b3JzKG51bWJlcik7XG4gICAgbGV0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmFjdG9ycy5sZW5ndGgpO1xuICAgIGxldCBhID0gZmFjdG9yc1tyYW5kb21JbmRleF07XG4gICAgbGV0IGIgPSBudW1iZXIgLyBhO1xuICAgIGxldCBjID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzApICsgMTtcblxuICAgIC8vIGFiXG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjIpIHtcbiAgICAgICAgcmV0dXJuIGB7e1xcXFxsZWZ0KHske29wc1swXShhKX19XFxcXHJpZ2h0KX17XFxcXGxlZnQoeyR7b3BzWzFdKGIpfX1cXFxccmlnaHQpfX1gO1xuICAgIH1cblxuICAgIC8vIChhIC0gYykoYiArIGMpICsgYyAoYiAtIGEgKyBjKVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYHsgXFxcXGxlZnQoeyR7b3BzWzBdKGEpfSAtICR7b3BzWzFdKGMpfX1cXFxccmlnaHQpIFxcXFxsZWZ0KHske29wc1syXShiKX0gKyAke29wc1szXShcbiAgICAgICAgICAgIGNcbiAgICAgICAgKX19XFxcXHJpZ2h0KSArIHske29wc1szXShjKX19e1xcXFxsZWZ0KHske29wc1szXShiKX0gLSAke29wc1szXShhKX0gKyAke29wc1szXShcbiAgICAgICAgICAgIGNcbiAgICAgICAgKX19IFxcXFxyaWdodCl9IH1gO1xuICAgIH1cbn07XG5cbi8vIDUgPSBzcXJ0KDI1KVxuY29uc3QgZGVjb21wb3NlU3FydCA9IChuOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHtcbiAgICBsZXQgc3F1YXJlID0gbiAqKiAyO1xuICAgIHJldHVybiBge1xcXFxzcXJ0eyR7b3BzWzBdKHNxdWFyZSl9fX1gO1xufTtcblxuLy8gMjUgPSAxICsgMyArIDUgKyA3ICsgOVxuY29uc3QgZGVjb21wb3NlU3F1YXJlID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGxldCBzcXVhcmVSb290ID0gTWF0aC5zcXJ0KG4pO1xuICAgIGxldCBzdW0gPSBgJHtvcHNbMF0oMSl9YDtcbiAgICBsZXQgb2RkVmFsID0gMTtcblxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3F1YXJlUm9vdCAtIDE7IGkrKykge1xuICAgICAgICAgICAgb2RkVmFsICs9IDI7XG4gICAgICAgICAgICBzdW0gKz0gYCsgJHtvcHNbM10ob2RkVmFsKX1gO1xuICAgICAgICB9XG4gICAgICAgIHN1bSA9IGB7ICR7c3VtfSB9YDtcbiAgICAgICAgcmV0dXJuIHN1bTtcbiAgICB9XG5cbiAgICAvLyAoYSArIGIpXjIgPSBhXjIgKyAyYWIgKyBiXjJcbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzcXVhcmVSb290IC0gMSkgKyAxO1xuICAgICAgICBsZXQgYiA9IHNxdWFyZVJvb3QgLSBhO1xuXG4gICAgICAgIC8vIFJlcHJlc2VudGluZyAoYSArIGIpXjJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcbiAgICAgICAgICAgIHJldHVybiBgeyB7XFxcXGxlZnQoJHtvcHNbMF0oYSl9ICsgJHtvcHNbMF0oYil9XFxcXHJpZ2h0KX1eMn1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVwcmVzZW50aW5nIGFeMiArIDJhYiArIGJeMlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBgeyB7XFxcXGxlZnQoJHtvcHNbMF0oYSl9XFxcXHJpZ2h0KX1eMiArIHske29wc1szXSgyKX19e1xcXFxsZWZ0KCR7b3BzWzFdKFxuICAgICAgICAgICAgICAgIGFcbiAgICAgICAgICAgICl9XFxcXHJpZ2h0KX17XFxcXGxlZnQoJHtvcHNbMl0oYil9XFxcXHJpZ2h0KX0gKyB7XFxcXGxlZnQoJHtvcHNbM10oYil9XFxcXHJpZ2h0KX1eMn1gO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gMjUgPSAxM14yIC0gMTJeMlxuY29uc3QgZGVjb21wb3NlRGlmZmVyZW5jZVNxdWFyZXMgPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgbGV0IGEgPSBNYXRoLmZsb29yKG4gLyAyKTtcbiAgICBsZXQgYiA9IE1hdGguY2VpbChuIC8gMik7XG5cbiAgICBpZiAoTWF0aC5jZWlsKG4gLyAyKSAqKiAyIDwgMTAwICYmIE1hdGgucmFuZG9tKCkgPCAwLjcpIHtcbiAgICAgICAgcmV0dXJuIGB7JHtvcHNbMF0oYiAqKiAyKX0gLSAke29wc1swXShhICoqIDIpfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgeyBcXFxcbGVmdCh7JHtvcHNbMF0oYil9fVxcXFxyaWdodCleMiAtICBcXFxcbGVmdCh7JHtvcHNbMV0oYSl9fVxcXFxyaWdodCleMn1gO1xuICAgIH1cbn07XG5cbi8vIDcgPSAyICogMyArIDFcbmNvbnN0IGRlY29tcG9zZUFkZE11bHRpcGx5ID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGxldCByYW5kTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbiArIDEpICsgMTtcbiAgICBsZXQgciA9IG4gJSByYW5kTnVtO1xuICAgIGxldCBhID0gTWF0aC5mbG9vcihuIC8gcmFuZE51bSk7XG4gICAgcmV0dXJuIGAke29wc1swXShhKX0gXFxcXHRpbWVzIHske29wc1sxXShyYW5kTnVtKX19ICsgJHtvcHNbMl0ocil9YDtcbn07XG5cbi8vIDcgPSA3KjgvOFxuY29uc3QgZGVjb21wb3NlTXVsRGl2aWRlID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGxldCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSkgKyAxO1xuICAgIHJldHVybiBgXFxcXGZyYWN7JHtvcHNbMF0obiAqIHIpfX0geyR7b3BzWzFdKHIpfX1gO1xufTtcblxuY29uc3QgZGVjb21wb3NlTGNtID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIC8vIGFsbCBmYWN0b3JzLCBlLmcuIFsyLCAyLCAyLCAzLCAzLCAuLi5dXG4gICAgY29uc3QgZmFjdG9ycyA9IGdldFByaW1lRmFjdG9ycyhuKTtcblxuICAgIC8vIGZhY3RvcnMgd2l0aCBjb3JyZXNwb25kaW5nIGV4cG9uZW50cywgZS5nLiB7MjogMywgMzogMiwgNzogMSwgLi4ufVxuICAgIGxldCBmYWN0b3JFeHA6IE1hcDxudW1iZXIsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBmIG9mIGZhY3RvcnMpIHtcbiAgICAgICAgZmFjdG9yRXhwLnNldChmLCBmYWN0b3JFeHAuaGFzKGYpID8gZmFjdG9yRXhwLmdldChmKSEgKyAxIDogMSk7XG4gICAgfVxuXG4gICAgLy8gZGlzdGluY3QgcHJpbWUgZmFjdG9ycywgZS5nLiBbNywgMywgNSwgMl1cbiAgICBjb25zdCBwcmltZUZhY3RvcnMgPSBzaHVmZmxlKEFycmF5LmZyb20oZmFjdG9yRXhwLmtleXMoKSkpO1xuXG4gICAgLy8gaW4gcmFuZ2UgWzEsIGxlbmd0aC0xXVxuICAgIGxldCBzbGljZUlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChwcmltZUZhY3RvcnMubGVuZ3RoIC0gMSkpICsgMTtcblxuICAgIC8vIHNwbGl0IGludG8gY29tcGxlbWVudHNcbiAgICBsZXQgZ3JvdXAxID0gcHJpbWVGYWN0b3JzLnNsaWNlKDAsIHNsaWNlSWR4KTtcbiAgICBsZXQgZ3JvdXAyID0gcHJpbWVGYWN0b3JzLnNsaWNlKHNsaWNlSWR4KTtcblxuICAgIGxldCBncm91cDFWYWx1ZSA9IGdyb3VwMS5tYXAobSA9PiBtICoqIGZhY3RvckV4cC5nZXQobSkhKS5yZWR1Y2UoKGEsIGIpID0+IGEgKiBiLCAxKTtcbiAgICBsZXQgZ3JvdXAyVmFsdWUgPSBncm91cDIubWFwKG0gPT4gbSAqKiBmYWN0b3JFeHAuZ2V0KG0pISkucmVkdWNlKChhLCBiKSA9PiBhICogYiwgMSk7XG5cbiAgICByZXR1cm4gYFxcXFxvcGVyYXRvcm5hbWV7bGNtfVxcXFxsZWZ0KCR7b3BzWzBdKGdyb3VwMVZhbHVlKX0sICR7b3BzWzFdKGdyb3VwMlZhbHVlKX1cXFxccmlnaHQpYDtcbn07XG5cbmNvbnN0IGRlY29tcG9zZVN1bUNvbnNlY3V0aXZlID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGNvbnN0IG9kZEZhY3RvcnMgPSBnZXRGYWN0b3JzKG4pLmZpbHRlcihmID0+IGYgJSAyID09IDEgJiYgZiAhPT0gMSk7XG5cbiAgICBjb25zdCBjaG9zZW5GYWN0b3IgPSBvZGRGYWN0b3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG9kZEZhY3RvcnMubGVuZ3RoKV07XG4gICAgY29uc3QgbWlkZGxlID0gbiAvIGNob3NlbkZhY3RvcjtcblxuICAgIGNvbnN0IHNpZGVMZW5ndGggPSAoY2hvc2VuRmFjdG9yIC0gMSkgLyAyO1xuXG4gICAgY29uc3QgbWluVmFsdWUgPSBtaWRkbGUgLSBzaWRlTGVuZ3RoO1xuICAgIGNvbnN0IG1pblZhbHVlU2lnbiA9IG1pblZhbHVlIDwgMCA/ICctJyA6ICcrJztcblxuICAgIHJldHVybiBgXFxcXHN1bV97az0wfV57JHtvcHNbMF0oY2hvc2VuRmFjdG9yIC0gMSl9fSBcXFxcbGVmdChrICR7bWluVmFsdWVTaWdufSAke29wc1sxXShcbiAgICAgICAgTWF0aC5hYnMobWluVmFsdWUpXG4gICAgKX1cXFxccmlnaHQpYDtcbn07XG5cbi8qIGVuZCBkZWNvbXBvc2UgZnVuY3Rpb25zICovXG5cbmNvbnN0IGNvbmRpdGlvbmFsRGVjb21wb3NpdGlvbiA9IChcbiAgICB3cmFwcGVkRnVuY3Rpb246IG9wZXJhdGlvbixcbiAgICBvcHRpb25zOiBDb252ZXJ0T3B0aW9uc1xuKTogb3BlcmF0aW9uID0+IHtcbiAgICByZXR1cm4gKG46IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8PSAwLjUpIHtcbiAgICAgICAgICAgIC8vIGludmVyc2UgZmFjdG9yaWFsIG9mIG4sIHN1Y2ggdGhhdCBmYWMhID0gblxuICAgICAgICAgICAgY29uc3QgZmFjID0gaXNGYWN0b3JpYWwobik7XG4gICAgICAgICAgICBpZiAoZmFjKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFjdG9yaWFsKGZhYykgPSBmYWMhID0gblxuICAgICAgICAgICAgICAgIHJldHVybiByZXByZXNlbnRhdGlvbnMuZmFjdG9yaWFsKGZhYywgb3B0aW9ucy5nYW1tYUZ1bmN0aW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzUG93MihuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXByZXNlbnRhdGlvbnMucG93MkNob29zZShNYXRoLmxvZzIobiksIG9wdGlvbnMubnVtYmVyVGhlb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB3cmFwcGVkRnVuY3Rpb24obik7XG4gICAgfTtcbn07XG5cbi8vIEJyZWFrIGEgbnVtYmVyIGRvd24gaW50byBzbWFsbGVyIG51bWJlcnMgc2VwYXJhdGVkIGJ5IG9wZXJhdG9yc1xuY29uc3QgZGVjb21wb3NlID0gKG46IG51bWJlciwgYXZhaWxhYmxlX29wZXJhdGlvbnM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgbGV0IG9wZXJhdGlvbnMgPSBhdmFpbGFibGVfb3BlcmF0aW9ucztcblxuICAgIC8vIHBhZCBvcGVyYXRpb25zIHRvIGF0IGxlYXN0IDQgZWxlbWVudHNcbiAgICB3aGlsZSAob3BlcmF0aW9ucy5sZW5ndGggPCA0KSB7XG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChyZXByZXNlbnRhdGlvbnMuc2FtZU51bWJlcik7XG4gICAgfVxuXG4gICAgb3BlcmF0aW9ucyA9IHNodWZmbGUob3BlcmF0aW9ucykuc2xpY2UoMCwgNCk7XG5cbiAgICBjb25zdCBkZWNvbXBvc2l0aW9uczogZGVjb21wb3NpdGlvbltdID0gW107XG5cbiAgICAvLyAxLiBhYiA9IChhIC0gYykoYiArIGMpICsgYyAoYiAtIGEgKyBjKSwgd2hlcmUgYyBpcyBhbnkgcmFuZG9tIHBvc2l0aXZlIG51bWJlclxuICAgIGlmIChuICE9PSAwICYmIG4gPCAxMDAgJiYgKG4gPT09IDIgfHwgIWlzUHJpbWUobikpKSB7XG4gICAgICAgIGRlY29tcG9zaXRpb25zLnB1c2goZGVjb21wb3NlQUJDKTtcbiAgICB9XG5cbiAgICAvLyAyLiBSZXByZXNlbnQgKHNtYWxsKSBudW1iZXJzIHVzaW5nIHRoZWlyIHNxdWFyZSBhbmQgc3F1YXJlIHJvb3RcbiAgICBpZiAobiA8IDEwKSB7XG4gICAgICAgIGRlY29tcG9zaXRpb25zLnB1c2goZGVjb21wb3NlU3FydCk7XG4gICAgfVxuXG4gICAgLy8gMy4gVGhlIHN1bSBvZiB0aGUgZmlyc3QgbiBvZGQgbnVtYmVycyBpcyBlcXVhbCB0byBuXjIgZS5nIDEgKyAzICsgNSA9IDNeMlxuICAgIGlmIChuID4gMSAmJiBpc1NxdWFyZShuKSAmJiBuIDwgMTAwKSB7XG4gICAgICAgIGRlY29tcG9zaXRpb25zLnB1c2goZGVjb21wb3NlU3F1YXJlKTtcbiAgICB9XG5cbiAgICAvLyA0LiBUaGUgc3VtIG9mIHR3byBjb25zZWN1dGl2ZSBpbnRlZ2VycyBpcyB0aGUgZGlmZmVyZW5jZSBvZiB0aGVpciBzcXVhcmVzIGUuZyAzICsgMiA9IDNeMiAtIDJeMlxuICAgIGlmIChpc09kZChuKSkge1xuICAgICAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZURpZmZlcmVuY2VTcXVhcmVzKTtcbiAgICB9XG5cbiAgICAvLyA1LiBFeHByZXNzIGEgbnVtYmVyIHVzaW5nIG11bHRpcGxpY2F0aW9uIGFuZCBhZGRpdGlvbi4gRS5nIDQgPSAxICogMyArIDFcbiAgICBpZiAobiA8PSAyMDApIHtcbiAgICAgICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VNdWxEaXZpZGUpO1xuICAgIH1cblxuICAgIGlmICghaXNQcmltZShuKSAmJiBuID4gMSkge1xuICAgICAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZUxjbSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc1BvdzIobikgJiYgbiA+IDEpIHtcbiAgICAgICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VTdW1Db25zZWN1dGl2ZSk7XG4gICAgfVxuXG4gICAgLy8gNi4gTXVsdGlwbHkgYW5kIGRpdmlkZSBieSBhIHJhbmRvbSBudW1iZXIuIGUuZyAyID0gKDIqNSkvNVxuICAgIGRlY29tcG9zaXRpb25zLnB1c2goZGVjb21wb3NlQWRkTXVsdGlwbHkpO1xuXG4gICAgcmV0dXJuIHNodWZmbGUoZGVjb21wb3NpdGlvbnMpWzBdKG4sIG9wZXJhdGlvbnMpO1xufTtcblxuZXhwb3J0IHsgZGVjb21wb3NlLCBjb25kaXRpb25hbERlY29tcG9zaXRpb24gfTtcbiIsIi8qKlxuICogQ29udmVydHMgdGhlIE1hdGhKYXggU1ZHIChUT0RPOiB0aGlzIGNvZGUgcHJvZHVjZXMgdGhlIGVycm9yIGlmIHRoZSBNYXRoSmF4IGlzIGh0bWwpIHRvIGEgcG5nLFxuICogYnkgc2VyaWFsaXppbmcgdGhlIHN2ZyBpbnRvIGEgZGF0YSB1cmwgYW5kIGRyYXdpbmcgdG8gdGhlIGNhbnZhcywgd2hlcmUgaXQgY2FuIHRoYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBhIHBuZy5cbiAqL1xuXG5sZXQgZG93bmxvYWRCdG4gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLWltZycpO1xuXG4vLyBJbml0aWF0ZSBkb3dubG9hZCBvZiBibG9iXG5jb25zdCBkb3dubG9hZCA9IChmaWxlbmFtZTogc3RyaW5nLCBibG9iOiBCbG9iKSA9PiB7XG4gICAgY29uc3QgZWxlbSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgZWxlbS5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgZWxlbS5kb3dubG9hZCA9IGZpbGVuYW1lO1xuICAgIGVsZW0uY2xpY2soKTtcbn07XG5cbmNvbnN0IGRvd25sb2FkUE5HID0gKCkgPT4ge1xuICAgIC8vIEdldCB0aGUgc3ZnIGZyb20gdGhlIHBhZ2VcbiAgICB2YXIgc3ZnID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnJykhO1xuXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IG51bWJlclxuICAgIHZhciBudW1iZXIgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0JykpLnZhbHVlO1xuXG4gICAgLy8gSW5jcmVhc2UgdGhlIFNWRydzIHdpZHRoIGFuZCBoZWlnaHQgdG8gcHJvZHVjZSBhIGJpZ2dlciBpbWFnZVxuICAgIGxldCB3ID0gcGFyc2VJbnQoc3ZnLmdldEF0dHJpYnV0ZSgnd2lkdGgnKSEpO1xuICAgIGxldCBoID0gcGFyc2VJbnQoc3ZnLmdldEF0dHJpYnV0ZSgnaGVpZ2h0JykhKTtcblxuICAgIC8vIENvbnZlcnQgU1ZHIHRvIHN0cmluZyBkYXRhXG4gICAgY29uc3QgZGF0YSA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnKTtcblxuICAgIGNvbnN0IHN2Z0RhdGFVcmwgPSBgZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwke2J0b2EoZGF0YSl9YDtcblxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIC8vIHVwc2NhbGUgaGVpZ2h0IHRvIGF0IGxlYXN0IDgwMHB4XG4gICAgbGV0IHNjYWxlRmFjdG9yID0gTWF0aC5tYXgoMiwgODAwIC8gaCk7XG4gICAgY2FudmFzLndpZHRoID0gdyAqIHNjYWxlRmFjdG9yO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoICogc2NhbGVGYWN0b3I7XG5cbiAgICBjb25zb2xlLmxvZyh7IHc6IGNhbnZhcy53aWR0aCwgaDogY2FudmFzLmhlaWdodCB9KTtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XG5cbiAgICBjb25zdCBzdmdEYXRhSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICBzdmdEYXRhSW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgICBjdHguZHJhd0ltYWdlKHN2Z0RhdGFJbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgICAgICBjYW52YXMudG9CbG9iKGJsb2IgPT4ge1xuICAgICAgICAgICAgaWYgKGJsb2IgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzZXJpYWxpemUgY2FudmFzIHRvIGJsb2InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvd25sb2FkKGBjb21wbGljYXRlZC1leHByZXNzaW9uLXRoYXQtZXF1YWxzLSR7bnVtYmVyfWAsIGJsb2IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgc3ZnRGF0YUltYWdlLnNyYyA9IHN2Z0RhdGFVcmw7XG59O1xuXG5jb25zdCBtYWluID0gKCkgPT4ge1xuICAgIGRvd25sb2FkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZG93bmxvYWRQTkcpO1xufTtcbmV4cG9ydCB7IG1haW4gfTtcbiIsImRlY2xhcmUgdmFyIE1hdGhKYXg6IGFueTtcblxuaW1wb3J0ICogYXMgcmVwcmVzZW50YXRpb25zIGZyb20gJy4vcmVwcmVzZW50YXRpb25zJztcbmltcG9ydCB7IENvbnZlcnRPcHRpb25zLCBvcGVyYXRpb24gfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGRlY29tcG9zZSwgY29uZGl0aW9uYWxEZWNvbXBvc2l0aW9uIH0gZnJvbSAnLi9kZWNvbXBvc2l0aW9ucyc7XG5pbXBvcnQgKiBhcyBkb3dubG9hZF9wbmcgZnJvbSAnLi9kb3dubG9hZC1wbmcnO1xuXG5jb25zdCBjb252ZXJ0ID0gKG51bWJlcjogbnVtYmVyLCBvcHRpb25zOiBDb252ZXJ0T3B0aW9ucykgPT4ge1xuICAgIC8vIFZhbGlkYXRpbmcgaW5wdXRcbiAgICBpZiAoaXNOYU4obnVtYmVyKSB8fCBudW1iZXIgPCAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKiBOZWVkIHRvIGFkZCBhbm90aGVyIHNsYXNoIHRvIGxhdGV4IHN0cmluZ3MgdG8gcHJldmVudCBzbGFzaCBlc2NhcGUgKi9cblxuICAgIC8vIExpc3Qgb2YgZnVuY3Rpb25zIHRoYXQgZ2VuZXJhdGUgTGFUZVggbWF0aCBleHByZXNzaW9uc1xuICAgIC8vIEZ1bmN0aW9ucyBhcmUgY2hvc2VuIHJhbmRvbWx5XG4gICAgbGV0IHBvc3NpYmxlX29wdGlvbnM6IG9wZXJhdGlvbltdID0gW107XG5cbiAgICBpZiAob3B0aW9ucy5ldWxlcnNJZGVudGl0eSkge1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gocmVwcmVzZW50YXRpb25zLmV1bGVyc0lkZW50aXR5KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZXhwb25lbnRpYWxMaW1pdHMpIHtcbiAgICAgICAgcG9zc2libGVfb3B0aW9ucy5wdXNoKG4gPT4gcmVwcmVzZW50YXRpb25zLmxpbWl0TmF0dXJhbExvZyhuLCBvcHRpb25zLm51bWJlclRoZW9yeSkpO1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gobiA9PiByZXByZXNlbnRhdGlvbnMubGltaXRFeHBvbmVudGlhbChuLCBvcHRpb25zLm51bWJlclRoZW9yeSkpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5wb2x5bm9taWFsTGltaXRzKSB7XG4gICAgICAgIHBvc3NpYmxlX29wdGlvbnMucHVzaChyZXByZXNlbnRhdGlvbnMubGltRGlmZlR3b1NxdWFyZXMpO1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gocmVwcmVzZW50YXRpb25zLmxpbWl0UG9seW5vbWlhbCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuZ2VvbWV0cmljU2VyaWVzKSB7XG4gICAgICAgIHBvc3NpYmxlX29wdGlvbnMucHVzaChuID0+XG4gICAgICAgICAgICByZXByZXNlbnRhdGlvbnMuaW5maW5pdGVHZW9tZXRyaWNTZXJpZXMobiwgb3B0aW9ucy5udW1iZXJUaGVvcnkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gZGVjb3JhdGUgZWFjaCBvcGVyYXRpb24gd2l0aCBhIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIHRoZSBpbnB1dCBpcyBvZiBhIGNlcnRhaW4gZm9ybSwgYW5kIGlmIGl0IGlzIGl0IG92ZXJyaWRlcyB0aGUgZGVjb3JhdGVkIGZ1bmN0aW9uJ3MgdXN1YWwgcmVzdWx0IHdpdGggaXQncyBvd24uXG4gICAgcG9zc2libGVfb3B0aW9ucyA9IHBvc3NpYmxlX29wdGlvbnMubWFwKGYgPT4ge1xuICAgICAgICByZXR1cm4gY29uZGl0aW9uYWxEZWNvbXBvc2l0aW9uKGYsIG9wdGlvbnMpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlucHV0ID0gZGVjb21wb3NlKG51bWJlciwgcG9zc2libGVfb3B0aW9ucyk7XG5cbiAgICAvLyAgRGlzYWJsZSB0aGUgZGlzcGxheSBhbmQgcmVuZGVyIGJ1dHRvbnMgdW50aWwgTWF0aEpheCBpcyBkb25lXG4gICAgdmFyIGRpc3BsYXkgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheScpO1xuICAgIHZhciBidXR0b24gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlbmRlcicpO1xuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGRpc3BsYXkuZGlzYWJsZWQgPSB0cnVlO1xuICAgIGxldCBkb3dubG9hZEJ0biA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQtaW1nJyk7XG5cbiAgICAvLyAgQ2xlYXIgdGhlIG9sZCBvdXRwdXRcblxuICAgIGxldCBvdXRwdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0JykhO1xuICAgIG91dHB1dC5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vICBSZXNldCB0aGUgdGV4IGxhYmVscyAoYW5kIGF1dG9tYXRpYyBlcXVhdGlvbiBudW1iZXJzLCB0aG91Z2ggdGhlcmUgYXJlbid0IGFueSBoZXJlKS5cbiAgICAvLyAgR2V0IHRoZSBjb252ZXJzaW9uIG9wdGlvbnMgKG1ldHJpY3MgYW5kIGRpc3BsYXkgc2V0dGluZ3MpXG4gICAgLy8gIENvbnZlcnQgdGhlIGlucHV0IHRvIENvbW1vbkhUTUwgb3V0cHV0IGFuZCB1c2UgYSBwcm9taXNlIHRvIHdhaXQgZm9yIGl0IHRvIGJlIHJlYWR5XG4gICAgLy8gICAgKGluIGNhc2UgYW4gZXh0ZW5zaW9uIG5lZWRzIHRvIGJlIGxvYWRlZCBkeW5hbWljYWxseSkuXG4gICAgTWF0aEpheC50ZXhSZXNldCgpO1xuICAgIHZhciBtYXRoSmF4T3B0aW9ucyA9IE1hdGhKYXguZ2V0TWV0cmljc0ZvcihvdXRwdXQpO1xuICAgIG1hdGhKYXhPcHRpb25zLmRpc3BsYXkgPSBkaXNwbGF5LmNoZWNrZWQ7XG4gICAgTWF0aEpheC50ZXgyc3ZnUHJvbWlzZShpbnB1dCwgbWF0aEpheE9wdGlvbnMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKG5vZGU6IGFueSkge1xuICAgICAgICAgICAgLy8gIFRoZSBwcm9taXNlIHJldHVybnMgdGhlIHR5cGVzZXQgbm9kZSwgd2hpY2ggd2UgYWRkIHRvIHRoZSBvdXRwdXRcbiAgICAgICAgICAgIC8vICBUaGVuIHVwZGF0ZSB0aGUgZG9jdW1lbnQgdG8gaW5jbHVkZSB0aGUgYWRqdXN0ZWQgQ1NTIGZvciB0aGVcbiAgICAgICAgICAgIC8vICAgIGNvbnRlbnQgb2YgdGhlIG5ldyBlcXVhdGlvbi5cbiAgICAgICAgICAgIG91dHB1dC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIE1hdGhKYXguc3RhcnR1cC5kb2N1bWVudC5jbGVhcigpO1xuICAgICAgICAgICAgTWF0aEpheC5zdGFydHVwLmRvY3VtZW50LnVwZGF0ZURvY3VtZW50KCk7XG4gICAgICAgICAgICAvLyBEaXNwbGF5IGRvd25sb2FkIGJ1dHRvblxuICAgICAgICAgICAgZG93bmxvYWRCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnI6IEVycm9yKSB7XG4gICAgICAgICAgICAvLyAgSWYgdGhlcmUgd2FzIGFuIGVycm9yLCBwdXQgdGhlIG1lc3NhZ2UgaW50byB0aGUgb3V0cHV0IGluc3RlYWRcbiAgICAgICAgICAgIG91dHB1dFxuICAgICAgICAgICAgICAgIC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcmUnKSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZXJyLm1lc3NhZ2UpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgRXJyb3Igb3Igbm90LCByZS1lbmFibGUgdGhlIGRpc3BsYXkgYW5kIHJlbmRlciBidXR0b25zXG4gICAgICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBkaXNwbGF5LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH0pO1xufTtcbmNvbnN0IG1haW4gPSAoKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50O1xuICAgIGNvbnN0IG51bWJlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdCBnYW1tYUZ1bmN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbW1hLWZ1bmN0aW9uJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBldWxlcnNJZGVudGl0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldWxlcnMtaWRlbnRpdHknKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGV4cG9uZW50aWFsTGltaXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWl0cy1leHBvbmVudGlhbCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgcG9seW5vbWlhbExpbWl0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW1pdHMtcG9seW5vbWlhbCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgbnVtYmVyVGhlb3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ251bWJlci10aGVvcnknKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGdlb21ldHJpY1NlcmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW9tZXRyaWMtc2VyaWVzJykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnZlcnQocGFyc2VJbnQobnVtYmVyLnZhbHVlKSwge1xuICAgICAgICAgICAgZ2FtbWFGdW5jdGlvbjogZ2FtbWFGdW5jdGlvbi5jaGVja2VkLFxuICAgICAgICAgICAgZXVsZXJzSWRlbnRpdHk6IGV1bGVyc0lkZW50aXR5LmNoZWNrZWQsXG4gICAgICAgICAgICBleHBvbmVudGlhbExpbWl0czogZXhwb25lbnRpYWxMaW1pdHMuY2hlY2tlZCxcbiAgICAgICAgICAgIHBvbHlub21pYWxMaW1pdHM6IHBvbHlub21pYWxMaW1pdHMuY2hlY2tlZCxcbiAgICAgICAgICAgIG51bWJlclRoZW9yeTogbnVtYmVyVGhlb3J5LmNoZWNrZWQsXG4gICAgICAgICAgICBnZW9tZXRyaWNTZXJpZXM6IGdlb21ldHJpY1Nlcmllcy5jaGVja2VkLFxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRvd25sb2FkX3BuZy5tYWluKCk7XG59O1xuXG5tYWluKCk7XG4iXSwibmFtZXMiOlsicmFuZG9tRWxlbWVudCIsImFycmF5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwic2h1ZmZsZSIsInJhbmRvbUluZGV4IiwiY3VycmVudEluZGV4IiwiaXNQcmltZSIsIm4iLCJpIiwic3FydCIsImdldEZhY3RvcnMiLCJmYWN0b3JzIiwicHVzaCIsImlzUG93MiIsIk51bWJlciIsImlzSW50ZWdlciIsImxvZzIiLCJnY2QiLCJhIiwiYiIsImhyZWYiLCJzIiwidXJsIiwiX2V1bGVyUGhpIiwieCIsIl9jYWNoZWRQcmltZXMiLCJwcmltZVNpZXZlIiwicCIsInJlc1ByaW1lcyIsIl9wcmltZVNpZXZlIiwiX3ByaW1lQ291bnRpbmdGdW5jdGlvbiIsImZpbHRlciIsIm51bWJlclRoZW9yeUZ1bmN0aW9ucyIsIm1hdGNoaW5nUGhpSW5wdXRzIiwibWF0Y2hpbmdQaUlucHV0cyIsImZ1bmN0aW9uT3B0aW9ucyIsIm1hdGNoaW5nSW5wdXQiLCJsaW1pdFBvbHlub21pYWwiLCJyIiwibSIsImhpZ2hlc3RQb3dlciIsImRlbm9taW5hdG9yTnVtYmVyT2ZUZXJtcyIsInNpZ25zIiwibnVtZXJhdG9yIiwiZGVub21pbmF0b3IiLCJjb2VmIiwicG93ZXIiLCJldWxlcnNJZGVudGl0eSIsImxpbURpZmZUd29TcXVhcmVzIiwidGV4Iiwic2FtZU51bWJlciIsImRlY29tcG9zZUFCQyIsIm51bWJlciIsIm9wcyIsImMiLCJkZWNvbXBvc2VTcXJ0Iiwic3F1YXJlIiwiZGVjb21wb3NlU3F1YXJlIiwic3F1YXJlUm9vdCIsInN1bSIsIm9kZFZhbCIsImRlY29tcG9zZURpZmZlcmVuY2VTcXVhcmVzIiwiY2VpbCIsImRlY29tcG9zZUFkZE11bHRpcGx5IiwicmFuZE51bSIsImRlY29tcG9zZU11bERpdmlkZSIsImRlY29tcG9zZUxjbSIsImRpdmlzb3IiLCJnZXRQcmltZUZhY3RvcnMiLCJmYWN0b3JFeHAiLCJNYXAiLCJmIiwic2V0IiwiaGFzIiwiZ2V0IiwicHJpbWVGYWN0b3JzIiwiQXJyYXkiLCJmcm9tIiwia2V5cyIsInNsaWNlSWR4IiwiZ3JvdXAxIiwic2xpY2UiLCJncm91cDIiLCJncm91cDFWYWx1ZSIsIm1hcCIsInJlZHVjZSIsImdyb3VwMlZhbHVlIiwiZGVjb21wb3NlU3VtQ29uc2VjdXRpdmUiLCJvZGRGYWN0b3JzIiwiY2hvc2VuRmFjdG9yIiwibWluVmFsdWUiLCJtaW5WYWx1ZVNpZ24iLCJhYnMiLCJkb3dubG9hZEJ0biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkb3dubG9hZFBORyIsInN2ZyIsInF1ZXJ5U2VsZWN0b3IiLCJ2YWx1ZSIsInciLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImgiLCJkYXRhIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwic3ZnRGF0YVVybCIsImJ0b2EiLCJjYW52YXMiLCJjcmVhdGVFbGVtZW50Iiwic2NhbGVGYWN0b3IiLCJtYXgiLCJ3aWR0aCIsImhlaWdodCIsImNvbnNvbGUiLCJsb2ciLCJjdHgiLCJnZXRDb250ZXh0Iiwic3ZnRGF0YUltYWdlIiwiSW1hZ2UiLCJvbmxvYWQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJibG9iIiwiRXJyb3IiLCJmaWxlbmFtZSIsImVsZW0iLCJ3aW5kb3ciLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkb3dubG9hZCIsImNsaWNrIiwic3JjIiwiY29udmVydCIsIm9wdGlvbnMiLCJpc05hTiIsInBvc3NpYmxlX29wdGlvbnMiLCJleHBvbmVudGlhbExpbWl0cyIsIm51bWJlclRoZW9yeUVuYWJsZWQiLCJudW1iZXJUaGVvcnkiLCJwb2x5bm9taWFsTGltaXRzIiwiZ2VvbWV0cmljU2VyaWVzIiwid3JhcHBlZEZ1bmN0aW9uIiwiZmFjIiwiZmFjdG9yaWFscyIsImlzRmFjdG9yaWFsIiwiZ2FtbWFGdW5jdGlvbkVuYWJsZWQiLCJnYW1tYUZ1bmN0aW9uIiwiY29uZGl0aW9uYWxEZWNvbXBvc2l0aW9uIiwiaW5wdXQiLCJhdmFpbGFibGVfb3BlcmF0aW9ucyIsIm9wZXJhdGlvbnMiLCJkZWNvbXBvc2l0aW9ucyIsImlzU3F1YXJlIiwiaXNPZGQiLCJkZWNvbXBvc2UiLCJkaXNwbGF5IiwiYnV0dG9uIiwiZGlzYWJsZWQiLCJvdXRwdXQiLCJpbm5lckhUTUwiLCJNYXRoSmF4IiwidGV4UmVzZXQiLCJtYXRoSmF4T3B0aW9ucyIsImdldE1ldHJpY3NGb3IiLCJjaGVja2VkIiwidGV4MnN2Z1Byb21pc2UiLCJ0aGVuIiwibm9kZSIsImFwcGVuZENoaWxkIiwic3RhcnR1cCIsImNsZWFyIiwidXBkYXRlRG9jdW1lbnQiLCJzdHlsZSIsImNhdGNoIiwiZXJyIiwiY3JlYXRlVGV4dE5vZGUiLCJtZXNzYWdlIiwiZm9ybSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==