(()=>{"use strict";const t=t=>t[Math.floor(Math.random()*t.length)],e=t=>{let e,r=t.length;for(;0!=r;)e=Math.floor(Math.random()*r),r--,[t[r],t[e]]=[t[e],t[r]];return t},r=t=>{if(t<=1||t%2==0&&t>2)return!1;for(let e=3;e<=Math.sqrt(t);e+=2)if(t%e==0)return!1;return!0},i=(t,e)=>e?i(e,t%e):t,n=(t,e)=>`\\href{${e}}{\\color{black}{${t}}}`,o=t=>{let e=0;for(let r=1;r<=t;r++)1===i(r,t)&&e++;return e},a=(t=>{const e=[];for(let r=0;r<=t;r++)e.push(!0);e[0]=!1,e[1]=!1;for(let r=2;r*r<=t;r++)if(!0===e[r])for(let i=r*r;i<=t;i+=r)e[i]=!1;let r=[];for(let i=0;i<=t;i++)e[i]&&r.push(i);return r})(999),l=t=>a.filter((e=>e<=t)).length,h=e=>{let r=[],i=[],a=[];for(let t=1;t<=999;t++)o(t)===e&&r.push(t),l(t)===e&&i.push(t);if(r.length>0){let e=t(r);a.push(`${n("\\varphi","https://en.wikipedia.org/wiki/Euler%27s_totient_function")}(${e})`)}if(i.length>0){let e=t(i);a.push(`${n("\\pi","https://en.wikipedia.org/wiki/Prime-counting_function")}(${e})`)}return(0===a.length||Math.random()<.3)&&a.push(`${e}`),t(a)},s=t=>{if(0===t){let t=Math.floor(20*Math.random());return`{${n("\\lim_{x \\to \\infty}","https://en.wikipedia.org/wiki/List_of_limits#Functions_of_the_form_xa")}{${t}x^{-1}}}`}if(1===t)return`{${n("\\lim_{x \\to \\infty}","https://en.wikipedia.org/wiki/List_of_limits#Functions_of_the_form_xg(x)")}{x^{1/x}}}`;{let e=Math.floor(5*Math.random())+1,r=Math.floor(3*Math.random())+2,i=r-1,n=["-","+"],o=`${e*t}x^{${r}} `,a=`${e}x^{${r}} `;for(let t=r-1;t>0;t--){let e=Math.floor(10*Math.random())+2,r=t<2?"":`^{${t}}`;o+=`${n[Math.floor(2*Math.random())]} ${e}x${r} `}for(let t=i;t>0;t--){let e=Math.floor(10*Math.random())+2,r=t<2?"":`^{${t}}`;a+=`${n[Math.floor(2*Math.random())]} ${e}x${r} `}return`{ \\lim_{x \\to \\infty} { \\frac{${o}}{${a}}} }`}},m=t=>{const e="https://en.wikipedia.org/wiki/Euler%27s_identity";return 0!==t?`{-${t}${n("e^{\\pi i}",e)}}`:`{(${n("e^{\\pi i}",e)} + 1)}`},u=t=>{let e=Math.floor(10*Math.random())+1;if(Math.random()<.5)var r=`\\lim_{x \\to ${t-e}} \\frac{x^2 - ${e**2}}{x - ${e}}`;else r=`\\lim_{x \\to ${t+e}} \\frac{x^2 - ${e**2}}{x + ${e}}`;return`{${r}}`},d=t=>`${t}`,c=(t,e)=>{let r=(t=>{let e=[];for(let r=0;r<=t;r++)t%r==0&&e.push(r);return e})(t),i=r[Math.floor(Math.random()*r.length)],n=t/i,o=Math.floor(30*Math.random())+1;return Math.random()<.2?`{{\\left({${e[0](i)}}\\right)}{\\left({${e[1](n)}}\\right)}}`:`{ \\left({${e[0](i)} - ${e[1](o)}}\\right) \\left({${e[2](n)} + ${e[3](o)}}\\right) + {${e[3](o)}}{\\left({${e[3](n)} - ${e[3](i)} + ${e[3](o)}} \\right)} }`},f=(t,e)=>{let r=t**2;return`{\\sqrt{${e[0](r)}}}`},p=(t,e)=>{let r=Math.sqrt(t),i=`${e[0](1)}`,n=1;if(Math.random()<.2){for(let t=0;t<r-1;t++)n+=2,i+=`+ ${e[3](n)}`;return i=`{ ${i} }`,i}{let t=Math.floor(Math.random()*r-1)+1,i=r-t;return Math.random()<.5?`{ {\\left(${e[0](t)} + ${e[0](i)}\\right)}^2}`:`{ {\\left(${e[0](t)}\\right)}^2 + {${e[3](2)}}{\\left(${e[1](t)}\\right)}{\\left(${e[2](i)}\\right)} + {\\left(${e[3](i)}\\right)}^2}`}},$=(t,e)=>{let r=Math.floor(t/2),i=Math.ceil(t/2);return Math.ceil(t/2)**2<100&&Math.random()<.7?`{${e[0](i**2)} - ${e[0](r**2)}}`:`{ \\left({${e[0](i)}}\\right)^2 -  \\left({${e[1](r)}}\\right)^2}`},g=(t,e)=>{let r=Math.floor(Math.random()*t+1)+1,i=t%r,n=Math.floor(t/r);return`${e[0](n)} \\times {${e[1](r)}} + ${e[2](i)}`},_=(t,e)=>{let r=Math.floor(5*Math.random())+1;return`\\frac{${e[0](t*r)}} {${e[1](r)}}`},M=(t,r)=>{const i=(t=>{const e=[];let r=2;for(;t>=2;)t%r==0?(e.push(r),t/=r):r++;return e})(t);let n=new Map;for(const t of i)n.set(t,n.has(t)?n.get(t)+1:1);const o=e(Array.from(n.keys()));let a=Math.floor(Math.random()*(o.length-1))+1,l=o.slice(0,a),h=o.slice(a),s=l.map((t=>t**n.get(t))).reduce(((t,e)=>t*e),1),m=h.map((t=>t**n.get(t))).reduce(((t,e)=>t*e),1);return`\\operatorname{lcm}\\left(${r[0](s)}, ${r[1](m)}\\right)`};let x=document.getElementById("download-img");const k=()=>{var t=document.querySelector("svg"),e=document.getElementById("input").value;let r=parseInt(t.getAttribute("width")),i=parseInt(t.getAttribute("height"));const n=(new XMLSerializer).serializeToString(t),o=`data:image/svg+xml;base64,${btoa(n)}`,a=document.createElement("canvas");let l=Math.max(2,800/i);a.width=r*l,a.height=i*l,console.log({w:a.width,h:a.height});const h=a.getContext("2d"),s=new Image;s.onload=()=>{h.drawImage(s,0,0,a.width,a.height),a.toBlob((t=>{if(null===t)throw new Error("Failed to serialize canvas to blob");((t,e)=>{const r=window.document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=t,r.click()})(`complicated-expression-that-equals-${e}`,t)}))},s.src=o},w=(t,i)=>{if(isNaN(t)||t>1e3||t<0)return;let o=[];i.eulersIdentity&&o.push(m),i.exponentialLimits&&(o.push((t=>((t,e)=>{const r="https://en.wikipedia.org/wiki/List_of_limits#Natural_logarithms";if(0===t)return`{${n("\\lim_{x \\to \\infty}",r)}{ \\frac{\\ln(x)}{x} }}`;if(1===t)return`{${n("\\lim_{x \\to 1}",r)}  {\\frac{\\ln(x)}{x - 1}}}`;{let i=e?h(t):t;return`{${n("\\lim_{x \\to 0}",r)}{ \\frac{-\\ln(1 + ${i}(e^{-x} - 1))}{x} }}`}})(t,i.numberTheory))),o.push((t=>((t,e)=>{const r="https://en.wikipedia.org/wiki/List_of_limits#Sums,_products_and_composites";if(0===t)return`{${n("\\lim_{x \\to \\infty}",r)}{xe^{-x}}}`;if(1===t)return`{${n("\\lim_{x \\to 0}",r)}{ \\frac{e^x - 1}{x} }}`;{let i=e?h(t):t;return`{${n("\\lim_{x \\to 0}",r)}{ \\frac{e^{${i}x} - 1}{x} }}`}})(t,i.numberTheory)))),i.polynomialLimits&&(o.push(u),o.push(s)),i.geometricSeries&&o.push((t=>((t,e)=>{if(0===t){let t="https://en.wikipedia.org/wiki/List_of_mathematical_series#Trigonometric_functions",e=Math.floor(10*Math.random())+3;return`{${n("\\sum",t)}\\limits_{k=0}^{${e-1}} {\\sin \\left({ \\frac{2 \\pi k}{${e}} } \\right)}}`}return 1===t?`{${n("\\lim_{\\epsilon \\to 0}","https://en.wikipedia.org/wiki/Particular_values_of_the_Riemann_zeta_function#The_Riemann_zeta_function_at_0_and_1")}{ \\epsilon \\zeta(1 + \\epsilon) }}`:`{\\sum\\limits_{k=0}^\\infty {\\left({\\frac{${e?h(t-1):t-1}}{${e?h(t):t}}}\\right)^{k}}}`})(t,i.numberTheory))),o=o.map((t=>((t,e)=>r=>{if(Math.random()<=.5){const t=(t=>{const e={2:2,6:3,24:4,120:5,720:6};return t in e&&e[t]})(r);if(t)return((t,e)=>Math.random()<.5&&e?`{${n("\\Gamma","https://en.wikipedia.org/wiki/Gamma_function")} (${t+1})}`:`{\\prod_{k=1}^{${t}} k}`)(t,e.gammaFunction);if((t=>t>=2&&Number.isInteger(Math.log2(t)))(r))return((t,e)=>{let r=e?h(t):t;return`{${n(`\\sum_{k=0}^{${r}}`,"https://en.wikipedia.org/wiki/List_of_mathematical_series#Binomial_coefficients_2")} {${t} \\choose k}}`})(Math.log2(r),e.numberTheory)}return t(r)})(t,i)));let a=((t,i)=>{let n=i;for(;n.length<4;)n.push(d);n=e(n).slice(0,4);const o=[];return 0!==t&&t<100&&(2===t||!r(t))&&o.push(c),t<10&&o.push(f),t>1&&(t=>Number.isInteger(Math.sqrt(t)))(t)&&t<100&&o.push(p),(t=>t%2!=0)(t)&&o.push($),t<=200&&o.push(_),!r(t)&&t>1&&o.push(M),o.push(g),e(o)[0](t,n)})(t,o);var l=document.getElementById("display"),x=document.getElementById("render");x.disabled=l.disabled=!0;let k=document.getElementById("download-img"),w=document.getElementById("output");w.innerHTML="",MathJax.texReset();var y=MathJax.getMetricsFor(w);y.display=l.checked,MathJax.tex2svgPromise(a,y).then((function(t){w.appendChild(t),MathJax.startup.document.clear(),MathJax.startup.document.updateDocument(),k.style.display="block"})).catch((function(t){w.appendChild(document.createElement("pre")).appendChild(document.createTextNode(t.message))})).then((function(){x.disabled=l.disabled=!1}))};(()=>{const t=document.getElementById("form"),e=document.getElementById("input"),r=document.getElementById("gamma-function"),i=document.getElementById("eulers-identity"),n=document.getElementById("limits-exponential"),o=document.getElementById("limits-polynomial"),a=document.getElementById("number-theory"),l=document.getElementById("geometric-series");t.addEventListener("submit",(t=>{t.preventDefault(),w(parseInt(e.value),{gammaFunction:r.checked,eulersIdentity:i.checked,exponentialLimits:n.checked,polynomialLimits:o.checked,numberTheory:a.checked,geometricSeries:l.checked})})),x.addEventListener("click",k)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVNDLGVBQWUsb0JBRWhEd0YsRUFBS0MsaUJBQWlCLFVBQVVDLElBQzVCQSxFQUFNQyxpQkFFTnBELEVBQVFqQyxTQUFTN0MsRUFBTzJDLE9BQVEsQ0FDNUJpRCxjQUFlQSxFQUFjc0IsUUFDN0J2SCxlQUFnQkEsRUFBZXVILFFBQy9CaEMsa0JBQW1CQSxFQUFrQmdDLFFBQ3JDN0IsaUJBQWtCQSxFQUFpQjZCLFFBQ25DOUIsYUFBY0EsRUFBYThCLFFBQzNCNUIsZ0JBQWlCQSxFQUFnQjRCLFNBQ25DLElEaERON0UsRUFBWTJGLGlCQUFpQixRQUFTeEYsRUNtRG5CLEVBR3ZCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9udW0ybWF0aC8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9udW0ybWF0aC8uL3NyYy9yZXByZXNlbnRhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vbnVtMm1hdGgvLi9zcmMvZGVjb21wb3NpdGlvbnMudHMiLCJ3ZWJwYWNrOi8vbnVtMm1hdGgvLi9zcmMvZG93bmxvYWQtcG5nLnRzIiwid2VicGFjazovL251bTJtYXRoLy4vc3JjL3NjcmlwdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIG9wZXJhdGlvbiA9IChuOiBudW1iZXIpID0+IHN0cmluZztcblxudHlwZSBDb252ZXJ0T3B0aW9ucyA9IHtcbiAgICBnYW1tYUZ1bmN0aW9uOiBib29sZWFuO1xuICAgIGV1bGVyc0lkZW50aXR5OiBib29sZWFuO1xuICAgIGV4cG9uZW50aWFsTGltaXRzOiBib29sZWFuO1xuICAgIHBvbHlub21pYWxMaW1pdHM6IGJvb2xlYW47XG4gICAgbnVtYmVyVGhlb3J5OiBib29sZWFuO1xuICAgIGdlb21ldHJpY1NlcmllczogYm9vbGVhbjtcbn07XG5cbmNvbnN0IHJhbmRvbUVsZW1lbnQgPSA8QT4oYXJyYXk6IEFbXSkgPT4ge1xuICAgIHJldHVybiBhcnJheVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpXTtcbn07XG5cbmNvbnN0IHNodWZmbGUgPSA8QT4oYXJyYXk6IEFbXSkgPT4ge1xuICAgIGxldCBjdXJyZW50SW5kZXggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIHJhbmRvbUluZGV4O1xuXG4gICAgLy8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuXG4gICAgd2hpbGUgKGN1cnJlbnRJbmRleCAhPSAwKSB7XG4gICAgICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudC5cbiAgICAgICAgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjdXJyZW50SW5kZXgpO1xuICAgICAgICBjdXJyZW50SW5kZXgtLTtcblxuICAgICAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAgICAgIFthcnJheVtjdXJyZW50SW5kZXhdLCBhcnJheVtyYW5kb21JbmRleF1dID0gW2FycmF5W3JhbmRvbUluZGV4XSwgYXJyYXlbY3VycmVudEluZGV4XV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycmF5O1xufTtcblxuY29uc3QgaXNPZGQgPSAobjogbnVtYmVyKSA9PiBuICUgMiAhPT0gMDtcblxuY29uc3QgaXNTcXVhcmUgPSAobjogbnVtYmVyKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKE1hdGguc3FydChuKSk7XG5cbmNvbnN0IGlzUHJpbWUgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgaWYgKG4gPD0gMSB8fCAobiAlIDIgPT0gMCAmJiBuID4gMikpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAobGV0IGkgPSAzOyBpIDw9IE1hdGguc3FydChuKTsgaSArPSAyKSB7XG4gICAgICAgIGlmIChuICUgaSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cbmNvbnN0IGdldEZhY3RvcnMgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgbGV0IGZhY3RvcnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBuOyBpKyspIHtcbiAgICAgICAgaWYgKG4gJSBpID09PSAwKSB7XG4gICAgICAgICAgICBmYWN0b3JzLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhY3RvcnM7XG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTM2NDMzNDAvMTM5OTYzODlcbmNvbnN0IGdldFByaW1lRmFjdG9ycyA9IChuOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBmYWN0b3JzID0gW107XG4gICAgbGV0IGRpdmlzb3IgPSAyO1xuXG4gICAgd2hpbGUgKG4gPj0gMikge1xuICAgICAgICBpZiAobiAlIGRpdmlzb3IgPT0gMCkge1xuICAgICAgICAgICAgZmFjdG9ycy5wdXNoKGRpdmlzb3IpO1xuICAgICAgICAgICAgbiAvPSBkaXZpc29yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGl2aXNvcisrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWN0b3JzO1xufTtcblxuLy8gQ2hlY2tpbmcgaWYgYSBudW1iZXIgY2FuIGJlIGZvcm1lZCB1c2luZyBmYWN0b3JpYWxcbmNvbnN0IGlzRmFjdG9yaWFsID0gKG46IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGZhY3RvcmlhbHM6IHsgW2tleTogbnVtYmVyXTogbnVtYmVyIH0gPSB7XG4gICAgICAgIDI6IDIsXG4gICAgICAgIDY6IDMsXG4gICAgICAgIDI0OiA0LFxuICAgICAgICAxMjA6IDUsXG4gICAgICAgIDcyMDogNixcbiAgICB9O1xuXG4gICAgaWYgKG4gaW4gZmFjdG9yaWFscykge1xuICAgICAgICByZXR1cm4gZmFjdG9yaWFsc1tuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuY29uc3QgaXNQb3cyID0gKG46IG51bWJlcikgPT4gbiA+PSAyICYmIE51bWJlci5pc0ludGVnZXIoTWF0aC5sb2cyKG4pKTtcblxuY29uc3QgZ2NkID0gKGE6IG51bWJlciwgYjogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgICBpZiAoIWIpIHtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdjZChiLCBhICUgYik7XG59O1xuXG5jb25zdCBocmVmID0gKHM6IHN0cmluZywgdXJsOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gYFxcXFxocmVmeyR7dXJsfX17XFxcXGNvbG9ye2JsYWNrfXske3N9fX1gO1xufTtcblxuZXhwb3J0IHtcbiAgICBvcGVyYXRpb24sXG4gICAgQ29udmVydE9wdGlvbnMsXG4gICAgcmFuZG9tRWxlbWVudCxcbiAgICBzaHVmZmxlLFxuICAgIGlzT2RkLFxuICAgIGlzU3F1YXJlLFxuICAgIGlzUHJpbWUsXG4gICAgZ2V0RmFjdG9ycyxcbiAgICBnZXRQcmltZUZhY3RvcnMsXG4gICAgaXNGYWN0b3JpYWwsXG4gICAgaXNQb3cyLFxuICAgIGdjZCxcbiAgICBocmVmLFxufTtcbiIsIi8qKlxuICogRXhwbG9pdHMgdGhlIFtTdHJvbmcgbGF3IG9mIHNtYWxsIG51bWJlcnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0cm9uZ19sYXdfb2Zfc21hbGxfbnVtYmVycykgdG9cbiAqIGZpbmQgcHJvcGVydGllcyBvZiB0aGUgc21hbGxlciBudW1iZXJzIGdpdmVuIGJ5IHRoZSBkZWNvbXBvc2l0aW9ucywgc3VjaCBhcyB0aGUgZXVsZXIgcGhpIGFuZCBwcmltZSBjb3VudGluZyBmdW5jdGlvbnMsXG4gKiBmYWN0b3JpYWwvZ2FtbWEsIGFuZCBtb3JlLlxuICovXG5cbmltcG9ydCB7IGdjZCwgcmFuZG9tRWxlbWVudCwgaHJlZiB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBfZXVsZXJQaGkgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgbGV0IHggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgIGlmIChnY2QoaSwgbikgPT09IDEpIHtcbiAgICAgICAgICAgIHgrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB4O1xufTtcblxuY29uc3QgX3ByaW1lU2lldmUgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcHJpbWVTaWV2ZSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG47IGkrKykge1xuICAgICAgICBwcmltZVNpZXZlLnB1c2godHJ1ZSk7XG4gICAgfVxuICAgIHByaW1lU2lldmVbMF0gPSBmYWxzZTtcbiAgICBwcmltZVNpZXZlWzFdID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBwID0gMjsgcCAqIHAgPD0gbjsgcCsrKSB7XG4gICAgICAgIGlmIChwcmltZVNpZXZlW3BdID09PSB0cnVlKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcCAqIHA7IGkgPD0gbjsgaSArPSBwKSB7XG4gICAgICAgICAgICAgICAgcHJpbWVTaWV2ZVtpXSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJlc1ByaW1lcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG47IGkrKykge1xuICAgICAgICBpZiAocHJpbWVTaWV2ZVtpXSkge1xuICAgICAgICAgICAgcmVzUHJpbWVzLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc1ByaW1lcztcbn07XG5cbmNvbnN0IF9jYWNoZWRQcmltZXMgPSBfcHJpbWVTaWV2ZSg5OTkpO1xuXG5jb25zdCBfcHJpbWVDb3VudGluZ0Z1bmN0aW9uID0gKG46IG51bWJlcikgPT4ge1xuICAgIHJldHVybiBfY2FjaGVkUHJpbWVzLmZpbHRlcih4ID0+IHggPD0gbikubGVuZ3RoO1xufTtcblxuY29uc3QgbnVtYmVyVGhlb3J5RnVuY3Rpb25zID0gKG46IG51bWJlcikgPT4ge1xuICAgIGxldCBtYXRjaGluZ1BoaUlucHV0cyA9IFtdO1xuICAgIGxldCBtYXRjaGluZ1BpSW5wdXRzID0gW107XG4gICAgbGV0IGZ1bmN0aW9uT3B0aW9ucyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gOTk5OyBpKyspIHtcbiAgICAgICAgaWYgKF9ldWxlclBoaShpKSA9PT0gbikge1xuICAgICAgICAgICAgbWF0Y2hpbmdQaGlJbnB1dHMucHVzaChpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfcHJpbWVDb3VudGluZ0Z1bmN0aW9uKGkpID09PSBuKSB7XG4gICAgICAgICAgICBtYXRjaGluZ1BpSW5wdXRzLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF0Y2hpbmdQaGlJbnB1dHMubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgbWF0Y2hpbmdJbnB1dCA9IHJhbmRvbUVsZW1lbnQobWF0Y2hpbmdQaGlJbnB1dHMpO1xuXG4gICAgICAgIGZ1bmN0aW9uT3B0aW9ucy5wdXNoKFxuICAgICAgICAgICAgYCR7aHJlZihcbiAgICAgICAgICAgICAgICAnXFxcXHZhcnBoaScsXG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0V1bGVyJTI3c190b3RpZW50X2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKX0oJHttYXRjaGluZ0lucHV0fSlgXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKG1hdGNoaW5nUGlJbnB1dHMubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgbWF0Y2hpbmdJbnB1dCA9IHJhbmRvbUVsZW1lbnQobWF0Y2hpbmdQaUlucHV0cyk7XG4gICAgICAgIGZ1bmN0aW9uT3B0aW9ucy5wdXNoKFxuICAgICAgICAgICAgYCR7aHJlZihcbiAgICAgICAgICAgICAgICAnXFxcXHBpJyxcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUHJpbWUtY291bnRpbmdfZnVuY3Rpb24nXG4gICAgICAgICAgICApfSgke21hdGNoaW5nSW5wdXR9KWBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZnVuY3Rpb25PcHRpb25zLmxlbmd0aCA9PT0gMCB8fCBNYXRoLnJhbmRvbSgpIDwgMC4zKSB7XG4gICAgICAgIGZ1bmN0aW9uT3B0aW9ucy5wdXNoKGAke259YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmRvbUVsZW1lbnQoZnVuY3Rpb25PcHRpb25zKTtcbn07XG5cbmNvbnN0IGZhY3RvcmlhbCA9IChuOiBudW1iZXIsIGdhbW1hRnVuY3Rpb25FbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUgJiYgZ2FtbWFGdW5jdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgLy8gzpMobikgPSAobi0xKSFcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcR2FtbWEnLCAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR2FtbWFfZnVuY3Rpb24nKX0gKCR7biArIDF9KX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVzaW5nIHRoZSBwaSBwcm9kdWN0IG5vdGF0aW9uIG9mIGZhY3RvcmlhbFxuICAgICAgICByZXR1cm4gYHtcXFxccHJvZF97az0xfV57JHtufX0ga31gO1xuICAgIH1cbn07XG5cbi8vIHJlcHJlc2VudGF0aW9uIG9mIDJeblxuY29uc3QgcG93MkNob29zZSA9IChuOiBudW1iZXIsIG51bWJlclRoZW9yeUVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBsZXQgeCA9IG51bWJlclRoZW9yeUVuYWJsZWQgPyBudW1iZXJUaGVvcnlGdW5jdGlvbnMobikgOiBuO1xuICAgIHJldHVybiBgeyR7aHJlZihcbiAgICAgICAgYFxcXFxzdW1fe2s9MH1eeyR7eH19YCxcbiAgICAgICAgJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbWF0aGVtYXRpY2FsX3NlcmllcyNCaW5vbWlhbF9jb2VmZmljaWVudHNfMidcbiAgICApfSB7JHtufSBcXFxcY2hvb3NlIGt9fWA7XG59O1xuXG4vLyBMaW1pdHMgb2YgbmF0dXJhbCBsb2cgZnVuY3Rpb25zOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX2xpbWl0cyNOYXR1cmFsX2xvZ2FyaXRobXNcbmNvbnN0IGxpbWl0TmF0dXJhbExvZyA9IChuOiBudW1iZXIsIG51bWJlclRoZW9yeUVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9saW1pdHMjTmF0dXJhbF9sb2dhcml0aG1zJztcblxuICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gXFxcXGluZnR5fScsIHVybCl9eyBcXFxcZnJhY3tcXFxcbG4oeCl9e3h9IH19YDtcbiAgICB9IGVsc2UgaWYgKG4gPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byAxfScsIHVybCl9ICB7XFxcXGZyYWN7XFxcXGxuKHgpfXt4IC0gMX19fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHggPSBudW1iZXJUaGVvcnlFbmFibGVkID8gbnVtYmVyVGhlb3J5RnVuY3Rpb25zKG4pIDogbjtcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byAwfScsIHVybCl9eyBcXFxcZnJhY3stXFxcXGxuKDEgKyAke3h9KGVeey14fSAtIDEpKX17eH0gfX1gO1xuICAgIH1cbn07XG5cbi8vIExpbWl0cyBvZiBleHBvbmVudGlhbCBmdW5jdGlvbnM6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbGltaXRzI1N1bXMsX3Byb2R1Y3RzX2FuZF9jb21wb3NpdGVzXG5jb25zdCBsaW1pdEV4cG9uZW50aWFsID0gKG46IG51bWJlciwgbnVtYmVyVGhlb3J5RW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIGNvbnN0IHVybCA9ICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX2xpbWl0cyNTdW1zLF9wcm9kdWN0c19hbmRfY29tcG9zaXRlcyc7XG5cbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIFxcXFxpbmZ0eX0nLCB1cmwpfXt4ZV57LXh9fX1gO1xuICAgIH0gZWxzZSBpZiAobiA9PT0gMSkge1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIDB9JywgdXJsKX17IFxcXFxmcmFje2VeeCAtIDF9e3h9IH19YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgeCA9IG51bWJlclRoZW9yeUVuYWJsZWQgPyBudW1iZXJUaGVvcnlGdW5jdGlvbnMobikgOiBuO1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIDB9JywgdXJsKX17IFxcXFxmcmFje2VeeyR7eH14fSAtIDF9e3h9IH19YDtcbiAgICB9XG59O1xuXG4vLyBMaW1pdHMgb2YgcG9seW5vbWlhbCBmdW5jdGlvbnNcbmNvbnN0IGxpbWl0UG9seW5vbWlhbCA9IChuOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9saW1pdHMjRnVuY3Rpb25zX29mX3RoZV9mb3JtX3hhJztcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICBsZXQgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwKTtcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byBcXFxcaW5mdHl9JywgdXJsKX17JHtyfXheey0xfX19YDtcbiAgICB9IGVsc2UgaWYgKG4gPT09IDEpIHtcbiAgICAgICAgY29uc3QgdXJsMiA9ICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX2xpbWl0cyNGdW5jdGlvbnNfb2ZfdGhlX2Zvcm1feGcoeCknO1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIFxcXFxpbmZ0eX0nLCB1cmwyKX17eF57MS94fX19YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBnZW5lcmF0ZSByYW5kb20gcG9seW5vbWlhbCBsaW1pdHMgbGlrZSBsaW0geCAtPiDiiJ4gKDI4eF4yIC0gMTF4KS8oNHheMiArIDEweClcbiAgICAgICAgLy8gc2luY2UgdGhlIGhpZ2hlc3QgcG93ZXIgdGVybXMgZG9taW5hdGUgaW4gdGhlIGxpbWl0cywgdGhlIHJlc3QgYXJlIGlnbm9yZWQgYW5kIGNhbiBiZSByYW5kb21cblxuICAgICAgICAvLyBHZXQgcmFuZG9tIG11bHRpcGxpZXIgZ3JlYXRlciB0aGFuIDFcbiAgICAgICAgbGV0IG0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDE7XG4gICAgICAgIC8vIENob29zZSBhIHJhbmRvbSBoaWdoZXN0IHBvd2VyLiBUaGlzIGRldGVybWluZXMgdGhlIGZpbmFsIHNvbHV0aW9uIG9mIHRoZSBsaW1pdFxuICAgICAgICBsZXQgaGlnaGVzdFBvd2VyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMykgKyAyO1xuXG4gICAgICAgIGxldCBudW1lcmF0b3JOdW1iZXJPZlRlcm1zID0gaGlnaGVzdFBvd2VyIC0gMTtcbiAgICAgICAgbGV0IGRlbm9taW5hdG9yTnVtYmVyT2ZUZXJtcyA9IGhpZ2hlc3RQb3dlciAtIDE7XG5cbiAgICAgICAgbGV0IHNpZ25zID0gWyctJywgJysnXTtcbiAgICAgICAgbGV0IG51bWVyYXRvciA9IGAke20gKiBufXheeyR7aGlnaGVzdFBvd2VyfX0gYDtcbiAgICAgICAgbGV0IGRlbm9taW5hdG9yID0gYCR7bX14Xnske2hpZ2hlc3RQb3dlcn19IGA7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgYSBwb2x5bm9taWFsIG51bWVyYXRvciB3aXRoIHJhbmRvbSBsZW5ndGggYW5kIGNvZWZmaWNpZW50c1xuICAgICAgICAvL2V4OiAxNXheMlxuICAgICAgICBmb3IgKGxldCBpID0gbnVtZXJhdG9yTnVtYmVyT2ZUZXJtczsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IGNvZWYgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAyO1xuXG4gICAgICAgICAgICBsZXQgcG93ZXIgPSBpIDwgMiA/ICcnIDogYF57JHtpfX1gO1xuICAgICAgICAgICAgbGV0IHNpZ24gPSBzaWduc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKV07XG5cbiAgICAgICAgICAgIG51bWVyYXRvciArPSBgJHtzaWdufSAke2NvZWZ9eCR7cG93ZXJ9IGA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSBhIHBvbHlub21pYWwgZGVub21pbmF0b3Igd2l0aCByYW5kb20gbGVuZ3RoIGFuZCBjb2VmZmljaWVudHNcbiAgICAgICAgZm9yIChsZXQgaSA9IGRlbm9taW5hdG9yTnVtYmVyT2ZUZXJtczsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IGNvZWYgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAyO1xuXG4gICAgICAgICAgICBsZXQgcG93ZXIgPSBpIDwgMiA/ICcnIDogYF57JHtpfX1gO1xuICAgICAgICAgICAgbGV0IHNpZ24gPSBzaWduc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKV07XG5cbiAgICAgICAgICAgIGRlbm9taW5hdG9yICs9IGAke3NpZ259ICR7Y29lZn14JHtwb3dlcn0gYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBgeyBcXFxcbGltX3t4IFxcXFx0byBcXFxcaW5mdHl9IHsgXFxcXGZyYWN7JHtudW1lcmF0b3J9fXske2Rlbm9taW5hdG9yfX19IH1gO1xuICAgIH1cbn07XG5cbi8vIFVzaW5nIGV1bGVyJ3MgaWRlbnRpdHkuIFRoYXQgaXMsIGVeKHBpKmkpID0gLTFcbmNvbnN0IGV1bGVyc0lkZW50aXR5ID0gKG46IG51bWJlcikgPT4ge1xuICAgIC8vIGUuZyDiiJI2ZV4ocGkqaSk9NlxuXG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0V1bGVyJTI3c19pZGVudGl0eSc7XG5cbiAgICBpZiAobiAhPT0gMCkge1xuICAgICAgICByZXR1cm4gYHstJHtufSR7aHJlZignZV57XFxcXHBpIGl9JywgdXJsKX19YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYHsoJHtocmVmKCdlXntcXFxccGkgaX0nLCB1cmwpfSArIDEpfWA7XG4gICAgfVxufTtcblxuLy8gSW5maW5pdGUgZ2VvbWV0cmljIHNlcmllcyB0aGF0IGV2YWx1YXRlcyB0byBhIGZpbml0ZSB2YWx1ZVxuY29uc3QgaW5maW5pdGVHZW9tZXRyaWNTZXJpZXMgPSAobjogbnVtYmVyLCBudW1iZXJUaGVvcnlFbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgbGV0IHVybCA9XG4gICAgICAgICAgICAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9tYXRoZW1hdGljYWxfc2VyaWVzI1RyaWdvbm9tZXRyaWNfZnVuY3Rpb25zJztcbiAgICAgICAgbGV0IHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAzO1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxzdW0nLCB1cmwpfVxcXFxsaW1pdHNfe2s9MH1eeyR7ciAtXG4gICAgICAgICAgICAxfX0ge1xcXFxzaW4gXFxcXGxlZnQoeyBcXFxcZnJhY3syIFxcXFxwaSBrfXske3J9fSB9IFxcXFxyaWdodCl9fWA7XG4gICAgfVxuXG4gICAgLy8gVXNpbmcgdGhlIFJpZW1hbm4gemV0YSBmdW5jdGlvblxuICAgIGVsc2UgaWYgKG4gPT09IDEpIHtcbiAgICAgICAgbGV0IHVybCA9XG4gICAgICAgICAgICAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFydGljdWxhcl92YWx1ZXNfb2ZfdGhlX1JpZW1hbm5femV0YV9mdW5jdGlvbiNUaGVfUmllbWFubl96ZXRhX2Z1bmN0aW9uX2F0XzBfYW5kXzEnO1xuXG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97XFxcXGVwc2lsb24gXFxcXHRvIDB9JywgdXJsKX17IFxcXFxlcHNpbG9uIFxcXFx6ZXRhKDEgKyBcXFxcZXBzaWxvbikgfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVzaW5nIHRoZSBpbmZpbml0ZSBnZW9tZXRyaWMgc2VyaWVzIHJ1bGU6IFdoZW4g4oiSMTx4PDEsIHN1bW1hdGlvbiBmcm9tIGkgPSAwIHRvIGluZmluaXR5IG9mIHJeaSA9IDEvKDEtcikgb3IgKHItMSkvci5cbiAgICAgICAgLy8gRGVjaW1hbCBjYW4gYmUgcmVwcmVzZW50ZWQgYXMgZnJhY3Rpb24gdG9vLiBlLmcgKDAuMjUpXmkgPSAoMS80KV5pID0gNF4taVxuICAgICAgICBsZXQgeDEgPSBudW1iZXJUaGVvcnlFbmFibGVkID8gbnVtYmVyVGhlb3J5RnVuY3Rpb25zKG4gLSAxKSA6IG4gLSAxO1xuICAgICAgICBsZXQgeDIgPSBudW1iZXJUaGVvcnlFbmFibGVkID8gbnVtYmVyVGhlb3J5RnVuY3Rpb25zKG4pIDogbjtcbiAgICAgICAgcmV0dXJuIGB7XFxcXHN1bVxcXFxsaW1pdHNfe2s9MH1eXFxcXGluZnR5IHtcXFxcbGVmdCh7XFxcXGZyYWN7JHt4MX19eyR7eDJ9fX1cXFxccmlnaHQpXntrfX19YDtcbiAgICB9XG59O1xuXG4vLyBVc2luZyB0aGUgdHJpZyBpZGVudGl0eSAoY29zXjIpeCArIChzaW5eMil4ID0gMVxuY29uc3QgdHJpZ0lkZW50aXR5ID0gKGV4cHJlc3Npb246IHN0cmluZykgPT4ge1xuICAgIGxldCByYW5kb21WYWx1ZSA9IE1hdGgucmFuZG9tKCk7XG4gICAgaWYgKHJhbmRvbVZhbHVlIDwgMC4yNSkge1xuICAgICAgICByZXR1cm4gYFxcXFxsZWZ0KFxcXFxmcmFjeyR7ZXhwcmVzc2lvbn19eyhcXFxcY29zXjJ4ICsgXFxcXHNpbl4yeCl9XFxcXHJpZ2h0KWA7XG4gICAgfSBlbHNlIGlmIChyYW5kb21WYWx1ZSA8IDAuNSkge1xuICAgICAgICByZXR1cm4gYFxcXFxsZWZ0KHske2V4cHJlc3Npb259IFxcXFx0aW1lcyAoXFxcXGNvc14yeCArIFxcXFxzaW5eMngpfVxcXFxyaWdodClgO1xuICAgIH1cbn07XG5cbi8qIFVzaW5nIHRoZSBkaWZmZXJlbmNlIG9mIHR3byBzcXVhcmVzIGluIGxpbWl0cyAqL1xuY29uc3QgbGltRGlmZlR3b1NxdWFyZXMgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgbGV0IHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxO1xuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgICAgIHZhciB0ZXggPSBgXFxcXGxpbV97eCBcXFxcdG8gJHtuIC0gcn19IFxcXFxmcmFje3heMiAtICR7ciAqKiAyfX17eCAtICR7cn19YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGV4ID0gYFxcXFxsaW1fe3ggXFxcXHRvICR7biArIHJ9fSBcXFxcZnJhY3t4XjIgLSAke3IgKiogMn19e3ggKyAke3J9fWA7XG4gICAgfVxuICAgIHJldHVybiBgeyR7dGV4fX1gO1xufTtcblxuY29uc3Qgc2FtZU51bWJlciA9IChuOiBudW1iZXIpID0+IGAke259YDtcblxuZXhwb3J0IHtcbiAgICBudW1iZXJUaGVvcnlGdW5jdGlvbnMsXG4gICAgZmFjdG9yaWFsLFxuICAgIHBvdzJDaG9vc2UsXG4gICAgbGltaXROYXR1cmFsTG9nLFxuICAgIGxpbWl0RXhwb25lbnRpYWwsXG4gICAgbGltaXRQb2x5bm9taWFsLFxuICAgIGV1bGVyc0lkZW50aXR5LFxuICAgIGluZmluaXRlR2VvbWV0cmljU2VyaWVzLFxuICAgIHRyaWdJZGVudGl0eSxcbiAgICBsaW1EaWZmVHdvU3F1YXJlcyxcbiAgICBzYW1lTnVtYmVyLFxufTtcbiIsIi8qKlxuICogVGhpcyBmaWxlIGNvbnRhaW5zIGRlY29tcG9zaXRpb24gZnVuY3Rpb25zLiBUaGV5IGJyZWFrIGxhcmdlciBudW1iZXJzICgzLWRpZ2l0KSBpbnRvIHNtYWxsZXIgb25lcyAoMi0xIGRpZ2l0cyksXG4gKiB3aGVyZSB0aGUgW1N0cm9uZyBsYXcgb2Ygc21hbGwgbnVtYmVyc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3Ryb25nX2xhd19vZl9zbWFsbF9udW1iZXJzKSBjYW4gdGFrZSBvZiB0aGVtXG4gKiBhcyB0aGV5IGhhdmUgbXVjaCBtb3JlIHByb3BlcnRpZXMgdGhhbiBsYXJnZXIgbnVtYmVycy5cbiAqL1xuXG5pbXBvcnQge1xuICAgIG9wZXJhdGlvbixcbiAgICBnZXRGYWN0b3JzLFxuICAgIGdldFByaW1lRmFjdG9ycyxcbiAgICBDb252ZXJ0T3B0aW9ucyxcbiAgICBpc0ZhY3RvcmlhbCxcbiAgICBpc1BvdzIsXG4gICAgc2h1ZmZsZSxcbiAgICBpc1ByaW1lLFxuICAgIGlzU3F1YXJlLFxuICAgIGlzT2RkLFxufSBmcm9tICcuL3V0aWxzJztcblxudHlwZSBkZWNvbXBvc2l0aW9uID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4gc3RyaW5nO1xuXG5pbXBvcnQgKiBhcyByZXByZXNlbnRhdGlvbnMgZnJvbSAnLi9yZXByZXNlbnRhdGlvbnMnO1xuXG4vLyBmb3IgbiA9IGFiIGFuZCDiiIBjLCBlaXRoZXIgcmV0dXJuIG4gPSBhYiBvciAoYS1jKShiK2MpICsgYyhiLWErYylcbmNvbnN0IGRlY29tcG9zZUFCQyA9IChudW1iZXI6IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGxldCBmYWN0b3JzID0gZ2V0RmFjdG9ycyhudW1iZXIpO1xuICAgIGxldCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGZhY3RvcnMubGVuZ3RoKTtcbiAgICBsZXQgYSA9IGZhY3RvcnNbcmFuZG9tSW5kZXhdO1xuICAgIGxldCBiID0gbnVtYmVyIC8gYTtcbiAgICBsZXQgYyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwKSArIDE7XG5cbiAgICAvLyBhYlxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4yKSB7XG4gICAgICAgIHJldHVybiBge3tcXFxcbGVmdCh7JHtvcHNbMF0oYSl9fVxcXFxyaWdodCl9e1xcXFxsZWZ0KHske29wc1sxXShiKX19XFxcXHJpZ2h0KX19YDtcbiAgICB9XG5cbiAgICAvLyAoYSAtIGMpKGIgKyBjKSArIGMgKGIgLSBhICsgYylcbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGB7IFxcXFxsZWZ0KHske29wc1swXShhKX0gLSAke29wc1sxXShjKX19XFxcXHJpZ2h0KSBcXFxcbGVmdCh7JHtvcHNbMl0oYil9ICsgJHtvcHNbM10oXG4gICAgICAgICAgICBjXG4gICAgICAgICl9fVxcXFxyaWdodCkgKyB7JHtvcHNbM10oYyl9fXtcXFxcbGVmdCh7JHtvcHNbM10oYil9IC0gJHtvcHNbM10oYSl9ICsgJHtvcHNbM10oXG4gICAgICAgICAgICBjXG4gICAgICAgICl9fSBcXFxccmlnaHQpfSB9YDtcbiAgICB9XG59O1xuXG4vLyA1ID0gc3FydCgyNSlcbmNvbnN0IGRlY29tcG9zZVNxcnQgPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgbGV0IHNxdWFyZSA9IG4gKiogMjtcbiAgICByZXR1cm4gYHtcXFxcc3FydHske29wc1swXShzcXVhcmUpfX19YDtcbn07XG5cbi8vIDI1ID0gMSArIDMgKyA1ICsgNyArIDlcbmNvbnN0IGRlY29tcG9zZVNxdWFyZSA9IChuOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHtcbiAgICBsZXQgc3F1YXJlUm9vdCA9IE1hdGguc3FydChuKTtcbiAgICBsZXQgc3VtID0gYCR7b3BzWzBdKDEpfWA7XG4gICAgbGV0IG9kZFZhbCA9IDE7XG5cbiAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNxdWFyZVJvb3QgLSAxOyBpKyspIHtcbiAgICAgICAgICAgIG9kZFZhbCArPSAyO1xuICAgICAgICAgICAgc3VtICs9IGArICR7b3BzWzNdKG9kZFZhbCl9YDtcbiAgICAgICAgfVxuICAgICAgICBzdW0gPSBgeyAke3N1bX0gfWA7XG4gICAgICAgIHJldHVybiBzdW07XG4gICAgfVxuXG4gICAgLy8gKGEgKyBiKV4yID0gYV4yICsgMmFiICsgYl4yXG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBhID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3F1YXJlUm9vdCAtIDEpICsgMTtcbiAgICAgICAgbGV0IGIgPSBzcXVhcmVSb290IC0gYTtcblxuICAgICAgICAvLyBSZXByZXNlbnRpbmcgKGEgKyBiKV4yXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgICAgICAgICByZXR1cm4gYHsge1xcXFxsZWZ0KCR7b3BzWzBdKGEpfSArICR7b3BzWzBdKGIpfVxcXFxyaWdodCl9XjJ9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlcHJlc2VudGluZyBhXjIgKyAyYWIgKyBiXjJcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYHsge1xcXFxsZWZ0KCR7b3BzWzBdKGEpfVxcXFxyaWdodCl9XjIgKyB7JHtvcHNbM10oMil9fXtcXFxcbGVmdCgke29wc1sxXShcbiAgICAgICAgICAgICAgICBhXG4gICAgICAgICAgICApfVxcXFxyaWdodCl9e1xcXFxsZWZ0KCR7b3BzWzJdKGIpfVxcXFxyaWdodCl9ICsge1xcXFxsZWZ0KCR7b3BzWzNdKGIpfVxcXFxyaWdodCl9XjJ9YDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vIDI1ID0gMTNeMiAtIDEyXjJcbmNvbnN0IGRlY29tcG9zZURpZmZlcmVuY2VTcXVhcmVzID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGxldCBhID0gTWF0aC5mbG9vcihuIC8gMik7XG4gICAgbGV0IGIgPSBNYXRoLmNlaWwobiAvIDIpO1xuXG4gICAgaWYgKE1hdGguY2VpbChuIC8gMikgKiogMiA8IDEwMCAmJiBNYXRoLnJhbmRvbSgpIDwgMC43KSB7XG4gICAgICAgIHJldHVybiBgeyR7b3BzWzBdKGIgKiogMil9IC0gJHtvcHNbMF0oYSAqKiAyKX19YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYHsgXFxcXGxlZnQoeyR7b3BzWzBdKGIpfX1cXFxccmlnaHQpXjIgLSAgXFxcXGxlZnQoeyR7b3BzWzFdKGEpfX1cXFxccmlnaHQpXjJ9YDtcbiAgICB9XG59O1xuXG4vLyA3ID0gMiAqIDMgKyAxXG5jb25zdCBkZWNvbXBvc2VBZGRNdWx0aXBseSA9IChuOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHtcbiAgICBsZXQgcmFuZE51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG4gKyAxKSArIDE7XG4gICAgbGV0IHIgPSBuICUgcmFuZE51bTtcbiAgICBsZXQgYSA9IE1hdGguZmxvb3IobiAvIHJhbmROdW0pO1xuICAgIHJldHVybiBgJHtvcHNbMF0oYSl9IFxcXFx0aW1lcyB7JHtvcHNbMV0ocmFuZE51bSl9fSArICR7b3BzWzJdKHIpfWA7XG59O1xuXG4vLyA3ID0gNyo4LzhcbmNvbnN0IGRlY29tcG9zZU11bERpdmlkZSA9IChuOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHtcbiAgICBsZXQgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpICsgMTtcbiAgICByZXR1cm4gYFxcXFxmcmFjeyR7b3BzWzBdKG4gKiByKX19IHske29wc1sxXShyKX19YDtcbn07XG5cbmNvbnN0IGRlY29tcG9zZUxjbSA9IChuOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHtcbiAgICAvLyBhbGwgZmFjdG9ycywgZS5nLiBbMiwgMiwgMiwgMywgMywgLi4uXVxuICAgIGNvbnN0IGZhY3RvcnMgPSBnZXRQcmltZUZhY3RvcnMobik7XG5cbiAgICAvLyBmYWN0b3JzIHdpdGggY29ycmVzcG9uZGluZyBleHBvbmVudHMsIGUuZy4gezI6IDMsIDM6IDIsIDc6IDEsIC4uLn1cbiAgICBsZXQgZmFjdG9yRXhwOiBNYXA8bnVtYmVyLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgZiBvZiBmYWN0b3JzKSB7XG4gICAgICAgIGZhY3RvckV4cC5zZXQoZiwgZmFjdG9yRXhwLmhhcyhmKSA/IGZhY3RvckV4cC5nZXQoZikhICsgMSA6IDEpO1xuICAgIH1cblxuICAgIC8vIGRpc3RpbmN0IHByaW1lIGZhY3RvcnMsIGUuZy4gWzcsIDMsIDUsIDJdXG4gICAgY29uc3QgcHJpbWVGYWN0b3JzID0gc2h1ZmZsZShBcnJheS5mcm9tKGZhY3RvckV4cC5rZXlzKCkpKTtcblxuICAgIC8vIGluIHJhbmdlIFsxLCBsZW5ndGgtMV1cbiAgICBsZXQgc2xpY2VJZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAocHJpbWVGYWN0b3JzLmxlbmd0aCAtIDEpKSArIDE7XG5cbiAgICAvLyBzcGxpdCBpbnRvIGNvbXBsZW1lbnRzXG4gICAgbGV0IGdyb3VwMSA9IHByaW1lRmFjdG9ycy5zbGljZSgwLCBzbGljZUlkeCk7XG4gICAgbGV0IGdyb3VwMiA9IHByaW1lRmFjdG9ycy5zbGljZShzbGljZUlkeCk7XG5cbiAgICBsZXQgZ3JvdXAxVmFsdWUgPSBncm91cDEubWFwKG0gPT4gbSAqKiBmYWN0b3JFeHAuZ2V0KG0pISkucmVkdWNlKChhLCBiKSA9PiBhICogYiwgMSk7XG4gICAgbGV0IGdyb3VwMlZhbHVlID0gZ3JvdXAyLm1hcChtID0+IG0gKiogZmFjdG9yRXhwLmdldChtKSEpLnJlZHVjZSgoYSwgYikgPT4gYSAqIGIsIDEpO1xuXG4gICAgcmV0dXJuIGBcXFxcb3BlcmF0b3JuYW1le2xjbX1cXFxcbGVmdCgke29wc1swXShncm91cDFWYWx1ZSl9LCAke29wc1sxXShncm91cDJWYWx1ZSl9XFxcXHJpZ2h0KWA7XG59O1xuXG4vKiBlbmQgZGVjb21wb3NlIGZ1bmN0aW9ucyAqL1xuXG5jb25zdCBjb25kaXRpb25hbERlY29tcG9zaXRpb24gPSAoXG4gICAgd3JhcHBlZEZ1bmN0aW9uOiBvcGVyYXRpb24sXG4gICAgb3B0aW9uczogQ29udmVydE9wdGlvbnNcbik6IG9wZXJhdGlvbiA9PiB7XG4gICAgcmV0dXJuIChuOiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPD0gMC41KSB7XG4gICAgICAgICAgICAvLyBpbnZlcnNlIGZhY3RvcmlhbCBvZiBuLCBzdWNoIHRoYXQgZmFjISA9IG5cbiAgICAgICAgICAgIGNvbnN0IGZhYyA9IGlzRmFjdG9yaWFsKG4pO1xuICAgICAgICAgICAgaWYgKGZhYykge1xuICAgICAgICAgICAgICAgIC8vIGZhY3RvcmlhbChmYWMpID0gZmFjISA9IG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwcmVzZW50YXRpb25zLmZhY3RvcmlhbChmYWMsIG9wdGlvbnMuZ2FtbWFGdW5jdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvdzIobikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwcmVzZW50YXRpb25zLnBvdzJDaG9vc2UoTWF0aC5sb2cyKG4pLCBvcHRpb25zLm51bWJlclRoZW9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gd3JhcHBlZEZ1bmN0aW9uKG4pO1xuICAgIH07XG59O1xuXG4vLyBCcmVhayBhIG51bWJlciBkb3duIGludG8gc21hbGxlciBudW1iZXJzIHNlcGFyYXRlZCBieSBvcGVyYXRvcnNcbmNvbnN0IGRlY29tcG9zZSA9IChuOiBudW1iZXIsIGF2YWlsYWJsZV9vcGVyYXRpb25zOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGxldCBvcGVyYXRpb25zID0gYXZhaWxhYmxlX29wZXJhdGlvbnM7XG5cbiAgICAvLyBwYWQgb3BlcmF0aW9ucyB0byBhdCBsZWFzdCA0IGVsZW1lbnRzXG4gICAgd2hpbGUgKG9wZXJhdGlvbnMubGVuZ3RoIDwgNCkge1xuICAgICAgICBvcGVyYXRpb25zLnB1c2gocmVwcmVzZW50YXRpb25zLnNhbWVOdW1iZXIpO1xuICAgIH1cblxuICAgIG9wZXJhdGlvbnMgPSBzaHVmZmxlKG9wZXJhdGlvbnMpLnNsaWNlKDAsIDQpO1xuXG4gICAgY29uc3QgZGVjb21wb3NpdGlvbnM6IGRlY29tcG9zaXRpb25bXSA9IFtdO1xuXG4gICAgLy8gMS4gYWIgPSAoYSAtIGMpKGIgKyBjKSArIGMgKGIgLSBhICsgYyksIHdoZXJlIGMgaXMgYW55IHJhbmRvbSBwb3NpdGl2ZSBudW1iZXJcbiAgICBpZiAobiAhPT0gMCAmJiBuIDwgMTAwICYmIChuID09PSAyIHx8ICFpc1ByaW1lKG4pKSkge1xuICAgICAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZUFCQyk7XG4gICAgfVxuXG4gICAgLy8gMi4gUmVwcmVzZW50IChzbWFsbCkgbnVtYmVycyB1c2luZyB0aGVpciBzcXVhcmUgYW5kIHNxdWFyZSByb290XG4gICAgaWYgKG4gPCAxMCkge1xuICAgICAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZVNxcnQpO1xuICAgIH1cblxuICAgIC8vIDMuIFRoZSBzdW0gb2YgdGhlIGZpcnN0IG4gb2RkIG51bWJlcnMgaXMgZXF1YWwgdG8gbl4yIGUuZyAxICsgMyArIDUgPSAzXjJcbiAgICBpZiAobiA+IDEgJiYgaXNTcXVhcmUobikgJiYgbiA8IDEwMCkge1xuICAgICAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZVNxdWFyZSk7XG4gICAgfVxuXG4gICAgLy8gNC4gVGhlIHN1bSBvZiB0d28gY29uc2VjdXRpdmUgaW50ZWdlcnMgaXMgdGhlIGRpZmZlcmVuY2Ugb2YgdGhlaXIgc3F1YXJlcyBlLmcgMyArIDIgPSAzXjIgLSAyXjJcbiAgICBpZiAoaXNPZGQobikpIHtcbiAgICAgICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VEaWZmZXJlbmNlU3F1YXJlcyk7XG4gICAgfVxuXG4gICAgLy8gNS4gRXhwcmVzcyBhIG51bWJlciB1c2luZyBtdWx0aXBsaWNhdGlvbiBhbmQgYWRkaXRpb24uIEUuZyA0ID0gMSAqIDMgKyAxXG4gICAgaWYgKG4gPD0gMjAwKSB7XG4gICAgICAgIGRlY29tcG9zaXRpb25zLnB1c2goZGVjb21wb3NlTXVsRGl2aWRlKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzUHJpbWUobikgJiYgbiA+IDEpIHtcbiAgICAgICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VMY20pO1xuICAgIH1cblxuICAgIC8vIDYuIE11bHRpcGx5IGFuZCBkaXZpZGUgYnkgYSByYW5kb20gbnVtYmVyLiBlLmcgMiA9ICgyKjUpLzVcbiAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZUFkZE11bHRpcGx5KTtcblxuICAgIHJldHVybiBzaHVmZmxlKGRlY29tcG9zaXRpb25zKVswXShuLCBvcGVyYXRpb25zKTtcbn07XG5cbmV4cG9ydCB7IGRlY29tcG9zZSwgY29uZGl0aW9uYWxEZWNvbXBvc2l0aW9uIH07XG4iLCIvKipcbiAqIENvbnZlcnRzIHRoZSBNYXRoSmF4IFNWRyAoVE9ETzogdGhpcyBjb2RlIHByb2R1Y2VzIHRoZSBlcnJvciBpZiB0aGUgTWF0aEpheCBpcyBodG1sKSB0byBhIHBuZyxcbiAqIGJ5IHNlcmlhbGl6aW5nIHRoZSBzdmcgaW50byBhIGRhdGEgdXJsIGFuZCBkcmF3aW5nIHRvIHRoZSBjYW52YXMsIHdoZXJlIGl0IGNhbiB0aGFuIGJlIHNlcmlhbGl6ZWRcbiAqIGludG8gYSBwbmcuXG4gKi9cblxubGV0IGRvd25sb2FkQnRuID0gPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZC1pbWcnKTtcblxuLy8gSW5pdGlhdGUgZG93bmxvYWQgb2YgYmxvYlxuY29uc3QgZG93bmxvYWQgPSAoZmlsZW5hbWU6IHN0cmluZywgYmxvYjogQmxvYikgPT4ge1xuICAgIGNvbnN0IGVsZW0gPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGVsZW0uaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgIGVsZW0uZG93bmxvYWQgPSBmaWxlbmFtZTtcbiAgICBlbGVtLmNsaWNrKCk7XG59O1xuXG5jb25zdCBkb3dubG9hZFBORyA9ICgpID0+IHtcbiAgICAvLyBHZXQgdGhlIHN2ZyBmcm9tIHRoZSBwYWdlXG4gICAgdmFyIHN2ZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpITtcblxuICAgIC8vIEdldCB0aGUgY3VycmVudCBudW1iZXJcbiAgICB2YXIgbnVtYmVyID0gKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dCcpKS52YWx1ZTtcblxuICAgIC8vIEluY3JlYXNlIHRoZSBTVkcncyB3aWR0aCBhbmQgaGVpZ2h0IHRvIHByb2R1Y2UgYSBiaWdnZXIgaW1hZ2VcbiAgICBsZXQgdyA9IHBhcnNlSW50KHN2Zy5nZXRBdHRyaWJ1dGUoJ3dpZHRoJykhKTtcbiAgICBsZXQgaCA9IHBhcnNlSW50KHN2Zy5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpISk7XG5cbiAgICAvLyBDb252ZXJ0IFNWRyB0byBzdHJpbmcgZGF0YVxuICAgIGNvbnN0IGRhdGEgPSBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2Zyk7XG5cbiAgICBjb25zdCBzdmdEYXRhVXJsID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsJHtidG9hKGRhdGEpfWA7XG5cbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAvLyB1cHNjYWxlIGhlaWdodCB0byBhdCBsZWFzdCA4MDBweFxuICAgIGxldCBzY2FsZUZhY3RvciA9IE1hdGgubWF4KDIsIDgwMCAvIGgpO1xuICAgIGNhbnZhcy53aWR0aCA9IHcgKiBzY2FsZUZhY3RvcjtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaCAqIHNjYWxlRmFjdG9yO1xuXG4gICAgY29uc29sZS5sb2coeyB3OiBjYW52YXMud2lkdGgsIGg6IGNhbnZhcy5oZWlnaHQgfSk7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuXG4gICAgY29uc3Qgc3ZnRGF0YUltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgc3ZnRGF0YUltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShzdmdEYXRhSW1hZ2UsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgY2FudmFzLnRvQmxvYihibG9iID0+IHtcbiAgICAgICAgICAgIGlmIChibG9iID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2VyaWFsaXplIGNhbnZhcyB0byBibG9iJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb3dubG9hZChgY29tcGxpY2F0ZWQtZXhwcmVzc2lvbi10aGF0LWVxdWFscy0ke251bWJlcn1gLCBibG9iKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHN2Z0RhdGFJbWFnZS5zcmMgPSBzdmdEYXRhVXJsO1xufTtcblxuY29uc3QgbWFpbiA9ICgpID0+IHtcbiAgICBkb3dubG9hZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRvd25sb2FkUE5HKTtcbn07XG5leHBvcnQgeyBtYWluIH07XG4iLCJkZWNsYXJlIHZhciBNYXRoSmF4OiBhbnk7XG5cbmltcG9ydCAqIGFzIHJlcHJlc2VudGF0aW9ucyBmcm9tICcuL3JlcHJlc2VudGF0aW9ucyc7XG5pbXBvcnQgeyBDb252ZXJ0T3B0aW9ucywgb3BlcmF0aW9uIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBkZWNvbXBvc2UsIGNvbmRpdGlvbmFsRGVjb21wb3NpdGlvbiB9IGZyb20gJy4vZGVjb21wb3NpdGlvbnMnO1xuaW1wb3J0ICogYXMgZG93bmxvYWRfcG5nIGZyb20gJy4vZG93bmxvYWQtcG5nJztcblxuY29uc3QgY29udmVydCA9IChudW1iZXI6IG51bWJlciwgb3B0aW9uczogQ29udmVydE9wdGlvbnMpID0+IHtcbiAgICAvLyBWYWxpZGF0aW5nIGlucHV0XG4gICAgaWYgKGlzTmFOKG51bWJlcikgfHwgbnVtYmVyID4gMTAwMCB8fCBudW1iZXIgPCAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKiBOZWVkIHRvIGFkZCBhbm90aGVyIHNsYXNoIHRvIGxhdGV4IHN0cmluZ3MgdG8gcHJldmVudCBzbGFzaCBlc2NhcGUgKi9cblxuICAgIC8vIExpc3Qgb2YgZnVuY3Rpb25zIHRoYXQgZ2VuZXJhdGUgTGFUZVggbWF0aCBleHByZXNzaW9uc1xuICAgIC8vIEZ1bmN0aW9ucyBhcmUgY2hvc2VuIHJhbmRvbWx5XG4gICAgbGV0IHBvc3NpYmxlX29wdGlvbnM6IG9wZXJhdGlvbltdID0gW107XG5cbiAgICBpZiAob3B0aW9ucy5ldWxlcnNJZGVudGl0eSkge1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gocmVwcmVzZW50YXRpb25zLmV1bGVyc0lkZW50aXR5KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZXhwb25lbnRpYWxMaW1pdHMpIHtcbiAgICAgICAgcG9zc2libGVfb3B0aW9ucy5wdXNoKG4gPT4gcmVwcmVzZW50YXRpb25zLmxpbWl0TmF0dXJhbExvZyhuLCBvcHRpb25zLm51bWJlclRoZW9yeSkpO1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gobiA9PiByZXByZXNlbnRhdGlvbnMubGltaXRFeHBvbmVudGlhbChuLCBvcHRpb25zLm51bWJlclRoZW9yeSkpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5wb2x5bm9taWFsTGltaXRzKSB7XG4gICAgICAgIHBvc3NpYmxlX29wdGlvbnMucHVzaChyZXByZXNlbnRhdGlvbnMubGltRGlmZlR3b1NxdWFyZXMpO1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gocmVwcmVzZW50YXRpb25zLmxpbWl0UG9seW5vbWlhbCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuZ2VvbWV0cmljU2VyaWVzKSB7XG4gICAgICAgIHBvc3NpYmxlX29wdGlvbnMucHVzaChuID0+XG4gICAgICAgICAgICByZXByZXNlbnRhdGlvbnMuaW5maW5pdGVHZW9tZXRyaWNTZXJpZXMobiwgb3B0aW9ucy5udW1iZXJUaGVvcnkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gZGVjb3JhdGUgZWFjaCBvcGVyYXRpb24gd2l0aCBhIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIHRoZSBpbnB1dCBpcyBvZiBhIGNlcnRhaW4gZm9ybSwgYW5kIGlmIGl0IGlzIGl0IG92ZXJyaWRlcyB0aGUgZGVjb3JhdGVkIGZ1bmN0aW9uJ3MgdXN1YWwgcmVzdWx0IHdpdGggaXQncyBvd24uXG4gICAgcG9zc2libGVfb3B0aW9ucyA9IHBvc3NpYmxlX29wdGlvbnMubWFwKGYgPT4ge1xuICAgICAgICByZXR1cm4gY29uZGl0aW9uYWxEZWNvbXBvc2l0aW9uKGYsIG9wdGlvbnMpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlucHV0ID0gZGVjb21wb3NlKG51bWJlciwgcG9zc2libGVfb3B0aW9ucyk7XG5cbiAgICAvLyAgRGlzYWJsZSB0aGUgZGlzcGxheSBhbmQgcmVuZGVyIGJ1dHRvbnMgdW50aWwgTWF0aEpheCBpcyBkb25lXG4gICAgdmFyIGRpc3BsYXkgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheScpO1xuICAgIHZhciBidXR0b24gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlbmRlcicpO1xuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGRpc3BsYXkuZGlzYWJsZWQgPSB0cnVlO1xuICAgIGxldCBkb3dubG9hZEJ0biA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQtaW1nJyk7XG5cbiAgICAvLyAgQ2xlYXIgdGhlIG9sZCBvdXRwdXRcblxuICAgIGxldCBvdXRwdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0JykhO1xuICAgIG91dHB1dC5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vICBSZXNldCB0aGUgdGV4IGxhYmVscyAoYW5kIGF1dG9tYXRpYyBlcXVhdGlvbiBudW1iZXJzLCB0aG91Z2ggdGhlcmUgYXJlbid0IGFueSBoZXJlKS5cbiAgICAvLyAgR2V0IHRoZSBjb252ZXJzaW9uIG9wdGlvbnMgKG1ldHJpY3MgYW5kIGRpc3BsYXkgc2V0dGluZ3MpXG4gICAgLy8gIENvbnZlcnQgdGhlIGlucHV0IHRvIENvbW1vbkhUTUwgb3V0cHV0IGFuZCB1c2UgYSBwcm9taXNlIHRvIHdhaXQgZm9yIGl0IHRvIGJlIHJlYWR5XG4gICAgLy8gICAgKGluIGNhc2UgYW4gZXh0ZW5zaW9uIG5lZWRzIHRvIGJlIGxvYWRlZCBkeW5hbWljYWxseSkuXG4gICAgTWF0aEpheC50ZXhSZXNldCgpO1xuICAgIHZhciBtYXRoSmF4T3B0aW9ucyA9IE1hdGhKYXguZ2V0TWV0cmljc0ZvcihvdXRwdXQpO1xuICAgIG1hdGhKYXhPcHRpb25zLmRpc3BsYXkgPSBkaXNwbGF5LmNoZWNrZWQ7XG4gICAgTWF0aEpheC50ZXgyc3ZnUHJvbWlzZShpbnB1dCwgbWF0aEpheE9wdGlvbnMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKG5vZGU6IGFueSkge1xuICAgICAgICAgICAgLy8gIFRoZSBwcm9taXNlIHJldHVybnMgdGhlIHR5cGVzZXQgbm9kZSwgd2hpY2ggd2UgYWRkIHRvIHRoZSBvdXRwdXRcbiAgICAgICAgICAgIC8vICBUaGVuIHVwZGF0ZSB0aGUgZG9jdW1lbnQgdG8gaW5jbHVkZSB0aGUgYWRqdXN0ZWQgQ1NTIGZvciB0aGVcbiAgICAgICAgICAgIC8vICAgIGNvbnRlbnQgb2YgdGhlIG5ldyBlcXVhdGlvbi5cbiAgICAgICAgICAgIG91dHB1dC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIE1hdGhKYXguc3RhcnR1cC5kb2N1bWVudC5jbGVhcigpO1xuICAgICAgICAgICAgTWF0aEpheC5zdGFydHVwLmRvY3VtZW50LnVwZGF0ZURvY3VtZW50KCk7XG4gICAgICAgICAgICAvLyBEaXNwbGF5IGRvd25sb2FkIGJ1dHRvblxuICAgICAgICAgICAgZG93bmxvYWRCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnI6IEVycm9yKSB7XG4gICAgICAgICAgICAvLyAgSWYgdGhlcmUgd2FzIGFuIGVycm9yLCBwdXQgdGhlIG1lc3NhZ2UgaW50byB0aGUgb3V0cHV0IGluc3RlYWRcbiAgICAgICAgICAgIG91dHB1dFxuICAgICAgICAgICAgICAgIC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcmUnKSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZXJyLm1lc3NhZ2UpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgRXJyb3Igb3Igbm90LCByZS1lbmFibGUgdGhlIGRpc3BsYXkgYW5kIHJlbmRlciBidXR0b25zXG4gICAgICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBkaXNwbGF5LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH0pO1xufTtcbmNvbnN0IG1haW4gPSAoKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50O1xuICAgIGNvbnN0IG51bWJlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdCBnYW1tYUZ1bmN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbW1hLWZ1bmN0aW9uJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBldWxlcnNJZGVudGl0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldWxlcnMtaWRlbnRpdHknKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGV4cG9uZW50aWFsTGltaXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWl0cy1leHBvbmVudGlhbCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgcG9seW5vbWlhbExpbWl0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW1pdHMtcG9seW5vbWlhbCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgbnVtYmVyVGhlb3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ251bWJlci10aGVvcnknKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGdlb21ldHJpY1NlcmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW9tZXRyaWMtc2VyaWVzJykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnZlcnQocGFyc2VJbnQobnVtYmVyLnZhbHVlKSwge1xuICAgICAgICAgICAgZ2FtbWFGdW5jdGlvbjogZ2FtbWFGdW5jdGlvbi5jaGVja2VkLFxuICAgICAgICAgICAgZXVsZXJzSWRlbnRpdHk6IGV1bGVyc0lkZW50aXR5LmNoZWNrZWQsXG4gICAgICAgICAgICBleHBvbmVudGlhbExpbWl0czogZXhwb25lbnRpYWxMaW1pdHMuY2hlY2tlZCxcbiAgICAgICAgICAgIHBvbHlub21pYWxMaW1pdHM6IHBvbHlub21pYWxMaW1pdHMuY2hlY2tlZCxcbiAgICAgICAgICAgIG51bWJlclRoZW9yeTogbnVtYmVyVGhlb3J5LmNoZWNrZWQsXG4gICAgICAgICAgICBnZW9tZXRyaWNTZXJpZXM6IGdlb21ldHJpY1Nlcmllcy5jaGVja2VkLFxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRvd25sb2FkX3BuZy5tYWluKCk7XG59O1xuXG5tYWluKCk7XG4iXSwibmFtZXMiOlsicmFuZG9tRWxlbWVudCIsImFycmF5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwic2h1ZmZsZSIsInJhbmRvbUluZGV4IiwiY3VycmVudEluZGV4IiwiaXNQcmltZSIsIm4iLCJpIiwic3FydCIsImdjZCIsImEiLCJiIiwiaHJlZiIsInMiLCJ1cmwiLCJfZXVsZXJQaGkiLCJ4IiwiX2NhY2hlZFByaW1lcyIsInByaW1lU2lldmUiLCJwdXNoIiwicCIsInJlc1ByaW1lcyIsIl9wcmltZVNpZXZlIiwiX3ByaW1lQ291bnRpbmdGdW5jdGlvbiIsImZpbHRlciIsIm51bWJlclRoZW9yeUZ1bmN0aW9ucyIsIm1hdGNoaW5nUGhpSW5wdXRzIiwibWF0Y2hpbmdQaUlucHV0cyIsImZ1bmN0aW9uT3B0aW9ucyIsIm1hdGNoaW5nSW5wdXQiLCJsaW1pdFBvbHlub21pYWwiLCJyIiwibSIsImhpZ2hlc3RQb3dlciIsImRlbm9taW5hdG9yTnVtYmVyT2ZUZXJtcyIsInNpZ25zIiwibnVtZXJhdG9yIiwiZGVub21pbmF0b3IiLCJjb2VmIiwicG93ZXIiLCJldWxlcnNJZGVudGl0eSIsImxpbURpZmZUd29TcXVhcmVzIiwidGV4Iiwic2FtZU51bWJlciIsImRlY29tcG9zZUFCQyIsIm51bWJlciIsIm9wcyIsImZhY3RvcnMiLCJnZXRGYWN0b3JzIiwiYyIsImRlY29tcG9zZVNxcnQiLCJzcXVhcmUiLCJkZWNvbXBvc2VTcXVhcmUiLCJzcXVhcmVSb290Iiwic3VtIiwib2RkVmFsIiwiZGVjb21wb3NlRGlmZmVyZW5jZVNxdWFyZXMiLCJjZWlsIiwiZGVjb21wb3NlQWRkTXVsdGlwbHkiLCJyYW5kTnVtIiwiZGVjb21wb3NlTXVsRGl2aWRlIiwiZGVjb21wb3NlTGNtIiwiZGl2aXNvciIsImdldFByaW1lRmFjdG9ycyIsImZhY3RvckV4cCIsIk1hcCIsImYiLCJzZXQiLCJoYXMiLCJnZXQiLCJwcmltZUZhY3RvcnMiLCJBcnJheSIsImZyb20iLCJrZXlzIiwic2xpY2VJZHgiLCJncm91cDEiLCJzbGljZSIsImdyb3VwMiIsImdyb3VwMVZhbHVlIiwibWFwIiwicmVkdWNlIiwiZ3JvdXAyVmFsdWUiLCJkb3dubG9hZEJ0biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkb3dubG9hZFBORyIsInN2ZyIsInF1ZXJ5U2VsZWN0b3IiLCJ2YWx1ZSIsInciLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImgiLCJkYXRhIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwic3ZnRGF0YVVybCIsImJ0b2EiLCJjYW52YXMiLCJjcmVhdGVFbGVtZW50Iiwic2NhbGVGYWN0b3IiLCJtYXgiLCJ3aWR0aCIsImhlaWdodCIsImNvbnNvbGUiLCJsb2ciLCJjdHgiLCJnZXRDb250ZXh0Iiwic3ZnRGF0YUltYWdlIiwiSW1hZ2UiLCJvbmxvYWQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJibG9iIiwiRXJyb3IiLCJmaWxlbmFtZSIsImVsZW0iLCJ3aW5kb3ciLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkb3dubG9hZCIsImNsaWNrIiwic3JjIiwiY29udmVydCIsIm9wdGlvbnMiLCJpc05hTiIsInBvc3NpYmxlX29wdGlvbnMiLCJleHBvbmVudGlhbExpbWl0cyIsIm51bWJlclRoZW9yeUVuYWJsZWQiLCJudW1iZXJUaGVvcnkiLCJwb2x5bm9taWFsTGltaXRzIiwiZ2VvbWV0cmljU2VyaWVzIiwid3JhcHBlZEZ1bmN0aW9uIiwiZmFjIiwiZmFjdG9yaWFscyIsImlzRmFjdG9yaWFsIiwiZ2FtbWFGdW5jdGlvbkVuYWJsZWQiLCJnYW1tYUZ1bmN0aW9uIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwibG9nMiIsImlzUG93MiIsImNvbmRpdGlvbmFsRGVjb21wb3NpdGlvbiIsImlucHV0IiwiYXZhaWxhYmxlX29wZXJhdGlvbnMiLCJvcGVyYXRpb25zIiwiZGVjb21wb3NpdGlvbnMiLCJpc1NxdWFyZSIsImlzT2RkIiwiZGVjb21wb3NlIiwiZGlzcGxheSIsImJ1dHRvbiIsImRpc2FibGVkIiwib3V0cHV0IiwiaW5uZXJIVE1MIiwiTWF0aEpheCIsInRleFJlc2V0IiwibWF0aEpheE9wdGlvbnMiLCJnZXRNZXRyaWNzRm9yIiwiY2hlY2tlZCIsInRleDJzdmdQcm9taXNlIiwidGhlbiIsIm5vZGUiLCJhcHBlbmRDaGlsZCIsInN0YXJ0dXAiLCJjbGVhciIsInVwZGF0ZURvY3VtZW50Iiwic3R5bGUiLCJjYXRjaCIsImVyciIsImNyZWF0ZVRleHROb2RlIiwibWVzc2FnZSIsImZvcm0iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=