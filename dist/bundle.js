(()=>{"use strict";const t=t=>t[Math.floor(Math.random()*t.length)],e=t=>{let e,r=t.length;for(;0!=r;)e=Math.floor(Math.random()*r),r--,[t[r],t[e]]=[t[e],t[r]];return t},r=t=>{if(t<=1||t%2==0&&t>2)return!1;for(let e=3;e<=Math.sqrt(t);e+=2)if(t%e==0)return!1;return!0},i=t=>{let e=[];for(let r=0;r<=t;r++)t%r==0&&e.push(r);return e},n=t=>t>=2&&Number.isInteger(Math.log2(t)),o=(t,e)=>e?o(e,t%e):t,a=(t,e)=>`\\href{${e}}{\\color{black}{${t}}}`,l=t=>{let e=0;for(let r=1;r<=t;r++)1===o(r,t)&&e++;return e},h=(t=>{const e=[];for(let r=0;r<=t;r++)e.push(!0);e[0]=!1,e[1]=!1;for(let r=2;r*r<=t;r++)if(!0===e[r])for(let i=r*r;i<=t;i+=r)e[i]=!1;let r=[];for(let i=0;i<=t;i++)e[i]&&r.push(i);return r})(999),s=t=>h.filter((e=>e<=t)).length,m=e=>{let r=[],i=[],n=[];for(let t=1;t<=999;t++)l(t)===e&&r.push(t),s(t)===e&&i.push(t);if(r.length>0){let e=t(r);n.push(`${a("\\varphi","https://en.wikipedia.org/wiki/Euler%27s_totient_function")}(${e})`)}if(i.length>0){let e=t(i);n.push(`${a("\\pi","https://en.wikipedia.org/wiki/Prime-counting_function")}(${e})`)}return(0===n.length||Math.random()<.3)&&n.push(`${e}`),t(n)},u=t=>{if(0===t){let t=Math.floor(20*Math.random());return`{${a("\\lim_{x \\to \\infty}","https://en.wikipedia.org/wiki/List_of_limits#Functions_of_the_form_xa")}{${t}x^{-1}}}`}if(1===t)return`{${a("\\lim_{x \\to \\infty}","https://en.wikipedia.org/wiki/List_of_limits#Functions_of_the_form_xg(x)")}{x^{1/x}}}`;{let e=Math.floor(5*Math.random())+1,r=Math.floor(3*Math.random())+2,i=r-1,n=["-","+"],o=`${e*t}x^{${r}} `,a=`${e}x^{${r}} `;for(let t=r-1;t>0;t--){let e=Math.floor(10*Math.random())+2,r=t<2?"":`^{${t}}`;o+=`${n[Math.floor(2*Math.random())]} ${e}x${r} `}for(let t=i;t>0;t--){let e=Math.floor(10*Math.random())+2,r=t<2?"":`^{${t}}`;a+=`${n[Math.floor(2*Math.random())]} ${e}x${r} `}return`{ \\lim_{x \\to \\infty} { \\frac{${o}}{${a}}} }`}},d=t=>{const e="https://en.wikipedia.org/wiki/Euler%27s_identity";return 0!==t?`{-${t}${a("e^{\\pi i}",e)}}`:`{(${a("e^{\\pi i}",e)} + 1)}`},c=t=>{let e=Math.floor(10*Math.random())+1;if(Math.random()<.5)var r=`\\lim_{x \\to ${t-e}} \\frac{x^2 - ${e**2}}{x - ${e}}`;else r=`\\lim_{x \\to ${t+e}} \\frac{x^2 - ${e**2}}{x + ${e}}`;return`{${r}}`},f=t=>`${t}`,$=(t,e)=>{let r=i(t),n=r[Math.floor(Math.random()*r.length)],o=t/n,a=Math.floor(30*Math.random())+1;return Math.random()<.2?`{{\\left({${e[0](n)}}\\right)}{\\left({${e[1](o)}}\\right)}}`:`{ \\left({${e[0](n)} - ${e[1](a)}}\\right) \\left({${e[2](o)} + ${e[3](a)}}\\right) + {${e[3](a)}}{\\left({${e[3](o)} - ${e[3](n)} + ${e[3](a)}} \\right)} }`},p=(t,e)=>{let r=t**2;return`{\\sqrt{${e[0](r)}}}`},g=(t,e)=>{let r=Math.sqrt(t),i=`${e[0](1)}`,n=1;if(Math.random()<.2){for(let t=0;t<r-1;t++)n+=2,i+=`+ ${e[3](n)}`;return i=`{ ${i} }`,i}{let t=Math.floor(Math.random()*r-1)+1,i=r-t;return Math.random()<.5?`{ {\\left(${e[0](t)} + ${e[0](i)}\\right)}^2}`:`{ {\\left(${e[0](t)}\\right)}^2 + {${e[3](2)}}{\\left(${e[1](t)}\\right)}{\\left(${e[2](i)}\\right)} + {\\left(${e[3](i)}\\right)}^2}`}},M=(t,e)=>{let r=Math.floor(t/2),i=Math.ceil(t/2);return Math.ceil(t/2)**2<100&&Math.random()<.7?`{${e[0](i**2)} - ${e[0](r**2)}}`:`{ \\left({${e[0](i)}}\\right)^2 -  \\left({${e[1](r)}}\\right)^2}`},_=(t,e)=>{let r=Math.floor(Math.random()*t+1)+1,i=t%r,n=Math.floor(t/r);return`${e[0](n)} \\times {${e[1](r)}} + ${e[2](i)}`},x=(t,e)=>{let r=Math.floor(5*Math.random())+1;return`\\frac{${e[0](t*r)}} {${e[1](r)}}`},k=(t,r)=>{const i=(t=>{const e=[];let r=2;for(;t>=2;)t%r==0?(e.push(r),t/=r):r++;return e})(t);let n=new Map;for(const t of i)n.set(t,n.has(t)?n.get(t)+1:1);const o=e(Array.from(n.keys()));let a=Math.floor(Math.random()*(o.length-1))+1,l=o.slice(0,a),h=o.slice(a),s=l.map((t=>t**n.get(t))).reduce(((t,e)=>t*e),1),m=h.map((t=>t**n.get(t))).reduce(((t,e)=>t*e),1);return`\\operatorname{lcm}\\left(${r[0](s)}, ${r[1](m)}\\right)`},w=(t,e)=>{const r=i(t).filter((t=>t%2==1&&1!==t)),n=r[Math.floor(Math.random()*r.length)],o=t/n-(n-1)/2,a=o<0?"-":"+";return`\\sum_{k=0}^{${e[0](n-1)}} \\left(k ${a} ${e[1](Math.abs(o))}\\right)`};let y=document.getElementById("download-img");const b=()=>{var t=document.querySelector("svg"),e=document.getElementById("input").value;let r=parseInt(t.getAttribute("width")),i=parseInt(t.getAttribute("height"));const n=(new XMLSerializer).serializeToString(t),o=`data:image/svg+xml;base64,${btoa(n)}`,a=document.createElement("canvas");let l=Math.max(2,800/i);a.width=r*l,a.height=i*l,console.log({w:a.width,h:a.height});const h=a.getContext("2d"),s=new Image;s.onload=()=>{h.drawImage(s,0,0,a.width,a.height),a.toBlob((t=>{if(null===t)throw new Error("Failed to serialize canvas to blob");((t,e)=>{const r=window.document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=t,r.click()})(`complicated-expression-that-equals-${e}`,t)}))},s.src=o},I=(t,i)=>{if(isNaN(t)||t>1e3||t<0)return;let o=[];i.eulersIdentity&&o.push(d),i.exponentialLimits&&(o.push((t=>((t,e)=>{const r="https://en.wikipedia.org/wiki/List_of_limits#Natural_logarithms";if(0===t)return`{${a("\\lim_{x \\to \\infty}",r)}{ \\frac{\\ln(x)}{x} }}`;if(1===t)return`{${a("\\lim_{x \\to 1}",r)}  {\\frac{\\ln(x)}{x - 1}}}`;{let i=e?m(t):t;return`{${a("\\lim_{x \\to 0}",r)}{ \\frac{-\\ln(1 + ${i}(e^{-x} - 1))}{x} }}`}})(t,i.numberTheory))),o.push((t=>((t,e)=>{const r="https://en.wikipedia.org/wiki/List_of_limits#Sums,_products_and_composites";if(0===t)return`{${a("\\lim_{x \\to \\infty}",r)}{xe^{-x}}}`;if(1===t)return`{${a("\\lim_{x \\to 0}",r)}{ \\frac{e^x - 1}{x} }}`;{let i=e?m(t):t;return`{${a("\\lim_{x \\to 0}",r)}{ \\frac{e^{${i}x} - 1}{x} }}`}})(t,i.numberTheory)))),i.polynomialLimits&&(o.push(c),o.push(u)),i.geometricSeries&&o.push((t=>((t,e)=>{if(0===t){let t="https://en.wikipedia.org/wiki/List_of_mathematical_series#Trigonometric_functions",e=Math.floor(10*Math.random())+3;return`{${a("\\sum",t)}\\limits_{k=0}^{${e-1}} {\\sin \\left({ \\frac{2 \\pi k}{${e}} } \\right)}}`}return 1===t?`{${a("\\lim_{\\epsilon \\to 0}","https://en.wikipedia.org/wiki/Particular_values_of_the_Riemann_zeta_function#The_Riemann_zeta_function_at_0_and_1")}{ \\epsilon \\zeta(1 + \\epsilon) }}`:`{\\sum\\limits_{k=0}^\\infty {\\left({\\frac{${e?m(t-1):t-1}}{${e?m(t):t}}}\\right)^{k}}}`})(t,i.numberTheory))),o=o.map((t=>((t,e)=>r=>{if(Math.random()<=.5){const t=(t=>{const e={2:2,6:3,24:4,120:5,720:6};return t in e&&e[t]})(r);if(t)return((t,e)=>Math.random()<.5&&e?`{${a("\\Gamma","https://en.wikipedia.org/wiki/Gamma_function")} (${t+1})}`:`{\\prod_{k=1}^{${t}} k}`)(t,e.gammaFunction);if(n(r))return((t,e)=>{let r=e?m(t):t;return`{${a(`\\sum_{k=0}^{${r}}`,"https://en.wikipedia.org/wiki/List_of_mathematical_series#Binomial_coefficients_2")} {${t} \\choose k}}`})(Math.log2(r),e.numberTheory)}return t(r)})(t,i)));let l=((t,i)=>{let o=i;for(;o.length<4;)o.push(f);o=e(o).slice(0,4);const a=[];return 0!==t&&t<100&&(2===t||!r(t))&&a.push($),t<10&&a.push(p),t>1&&(t=>Number.isInteger(Math.sqrt(t)))(t)&&t<100&&a.push(g),(t=>t%2!=0)(t)&&a.push(M),t<=200&&a.push(x),!r(t)&&t>1&&a.push(k),!n(t)&&t>1&&a.push(w),a.push(_),e(a)[0](t,o)})(t,o);var h=document.getElementById("display"),s=document.getElementById("render");s.disabled=h.disabled=!0;let y=document.getElementById("download-img"),b=document.getElementById("output");b.innerHTML="",MathJax.texReset();var I=MathJax.getMetricsFor(b);I.display=h.checked,MathJax.tex2svgPromise(l,I).then((function(t){b.appendChild(t),MathJax.startup.document.clear(),MathJax.startup.document.updateDocument(),y.style.display="block"})).catch((function(t){b.appendChild(document.createElement("pre")).appendChild(document.createTextNode(t.message))})).then((function(){s.disabled=h.disabled=!1}))};(()=>{const t=document.getElementById("form"),e=document.getElementById("input"),r=document.getElementById("gamma-function"),i=document.getElementById("eulers-identity"),n=document.getElementById("limits-exponential"),o=document.getElementById("limits-polynomial"),a=document.getElementById("number-theory"),l=document.getElementById("geometric-series");t.addEventListener("submit",(t=>{t.preventDefault(),I(parseInt(e.value),{gammaFunction:r.checked,eulersIdentity:i.checked,exponentialLimits:n.checked,polynomialLimits:o.checked,numberTheory:a.checked,geometricSeries:l.checked})})),y.addEventListener("click",b)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBVSxPQUNoQyxJQUNDa0IsT0FBTSxTQUFTQyxHQUVaaEIsRUFDS1UsWUFBWTVFLFNBQVNnQixjQUFjLFFBQ25DNEQsWUFBWTVFLFNBQVNtRixlQUFlRCxFQUFJRSxTQUNqRCxJQUNDVixNQUFLLFdBRUZWLEVBQU9DLFNBQVdGLEVBQVFFLFVBQVcsQ0FDekMsR0FBRSxFQUVHLE1BQ1QsTUFBTW9CLEVBQU9yRixTQUFTQyxlQUFlLFFBQy9CM0MsRUFBUzBDLFNBQVNDLGVBQWUsU0FFakNxRCxFQUFnQnRELFNBQVNDLGVBQWUsa0JBQ3hDaEQsRUFBaUIrQyxTQUFTQyxlQUFlLG1CQUN6QzJDLEVBQW9CNUMsU0FBU0MsZUFBZSxzQkFDNUM4QyxFQUFtQi9DLFNBQVNDLGVBQWUscUJBQzNDNkMsRUFBZTlDLFNBQVNDLGVBQWUsaUJBQ3ZDK0MsRUFBa0JoRCxTQUFTQyxlQUFlLG9CQUVoRG9GLEVBQUtDLGlCQUFpQixVQUFVQyxJQUM1QkEsRUFBTUMsaUJBRU5oRCxFQUFRakMsU0FBU2pELEVBQU8rQyxPQUFRLENBQzVCaUQsY0FBZUEsRUFBY2tCLFFBQzdCdkgsZUFBZ0JBLEVBQWV1SCxRQUMvQjVCLGtCQUFtQkEsRUFBa0I0QixRQUNyQ3pCLGlCQUFrQkEsRUFBaUJ5QixRQUNuQzFCLGFBQWNBLEVBQWEwQixRQUMzQnhCLGdCQUFpQkEsRUFBZ0J3QixTQUNuQyxJRGhETnpFLEVBQVl1RixpQkFBaUIsUUFBU3BGLEVDbURuQixFQUd2QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnVtMm1hdGgvLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vbnVtMm1hdGgvLi9zcmMvcmVwcmVzZW50YXRpb25zLnRzIiwid2VicGFjazovL251bTJtYXRoLy4vc3JjL2RlY29tcG9zaXRpb25zLnRzIiwid2VicGFjazovL251bTJtYXRoLy4vc3JjL2Rvd25sb2FkLXBuZy50cyIsIndlYnBhY2s6Ly9udW0ybWF0aC8uL3NyYy9zY3JpcHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBvcGVyYXRpb24gPSAobjogbnVtYmVyKSA9PiBzdHJpbmc7XG5cbnR5cGUgQ29udmVydE9wdGlvbnMgPSB7XG4gICAgZ2FtbWFGdW5jdGlvbjogYm9vbGVhbjtcbiAgICBldWxlcnNJZGVudGl0eTogYm9vbGVhbjtcbiAgICBleHBvbmVudGlhbExpbWl0czogYm9vbGVhbjtcbiAgICBwb2x5bm9taWFsTGltaXRzOiBib29sZWFuO1xuICAgIG51bWJlclRoZW9yeTogYm9vbGVhbjtcbiAgICBnZW9tZXRyaWNTZXJpZXM6IGJvb2xlYW47XG59O1xuXG5jb25zdCByYW5kb21FbGVtZW50ID0gPEE+KGFycmF5OiBBW10pID0+IHtcbiAgICByZXR1cm4gYXJyYXlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXkubGVuZ3RoKV07XG59O1xuXG5jb25zdCBzaHVmZmxlID0gPEE+KGFycmF5OiBBW10pID0+IHtcbiAgICBsZXQgY3VycmVudEluZGV4ID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICByYW5kb21JbmRleDtcblxuICAgIC8vIFdoaWxlIHRoZXJlIHJlbWFpbiBlbGVtZW50cyB0byBzaHVmZmxlLlxuICAgIHdoaWxlIChjdXJyZW50SW5kZXggIT0gMCkge1xuICAgICAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnQuXG4gICAgICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KTtcbiAgICAgICAgY3VycmVudEluZGV4LS07XG5cbiAgICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgICAgICBbYXJyYXlbY3VycmVudEluZGV4XSwgYXJyYXlbcmFuZG9tSW5kZXhdXSA9IFthcnJheVtyYW5kb21JbmRleF0sIGFycmF5W2N1cnJlbnRJbmRleF1dO1xuICAgIH1cblxuICAgIHJldHVybiBhcnJheTtcbn07XG5cbmNvbnN0IGlzT2RkID0gKG46IG51bWJlcikgPT4gbiAlIDIgIT09IDA7XG5cbmNvbnN0IGlzU3F1YXJlID0gKG46IG51bWJlcikgPT4gTnVtYmVyLmlzSW50ZWdlcihNYXRoLnNxcnQobikpO1xuXG5jb25zdCBpc1ByaW1lID0gKG46IG51bWJlcikgPT4ge1xuICAgIGlmIChuIDw9IDEgfHwgKG4gJSAyID09IDAgJiYgbiA+IDIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBpID0gMzsgaSA8PSBNYXRoLnNxcnQobik7IGkgKz0gMikge1xuICAgICAgICBpZiAobiAlIGkgPT09IDApIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5jb25zdCBnZXRGYWN0b3JzID0gKG46IG51bWJlcikgPT4ge1xuICAgIGxldCBmYWN0b3JzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgIGlmIChuICUgaSA9PT0gMCkge1xuICAgICAgICAgICAgZmFjdG9ycy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWN0b3JzO1xufTtcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUzNjQzMzQwLzEzOTk2Mzg5XG5jb25zdCBnZXRQcmltZUZhY3RvcnMgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgZmFjdG9ycyA9IFtdO1xuICAgIGxldCBkaXZpc29yID0gMjtcblxuICAgIHdoaWxlIChuID49IDIpIHtcbiAgICAgICAgaWYgKG4gJSBkaXZpc29yID09IDApIHtcbiAgICAgICAgICAgIGZhY3RvcnMucHVzaChkaXZpc29yKTtcbiAgICAgICAgICAgIG4gLz0gZGl2aXNvcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpdmlzb3IrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFjdG9ycztcbn07XG5cbi8vIENoZWNraW5nIGlmIGEgbnVtYmVyIGNhbiBiZSBmb3JtZWQgdXNpbmcgZmFjdG9yaWFsXG5jb25zdCBpc0ZhY3RvcmlhbCA9IChuOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBmYWN0b3JpYWxzOiB7IFtrZXk6IG51bWJlcl06IG51bWJlciB9ID0ge1xuICAgICAgICAyOiAyLFxuICAgICAgICA2OiAzLFxuICAgICAgICAyNDogNCxcbiAgICAgICAgMTIwOiA1LFxuICAgICAgICA3MjA6IDYsXG4gICAgfTtcblxuICAgIGlmIChuIGluIGZhY3RvcmlhbHMpIHtcbiAgICAgICAgcmV0dXJuIGZhY3RvcmlhbHNbbl07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbmNvbnN0IGlzUG93MiA9IChuOiBudW1iZXIpID0+IG4gPj0gMiAmJiBOdW1iZXIuaXNJbnRlZ2VyKE1hdGgubG9nMihuKSk7XG5cbmNvbnN0IGdjZCA9IChhOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgaWYgKCFiKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cblxuICAgIHJldHVybiBnY2QoYiwgYSAlIGIpO1xufTtcblxuY29uc3QgaHJlZiA9IChzOiBzdHJpbmcsIHVybDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIGBcXFxcaHJlZnske3VybH19e1xcXFxjb2xvcntibGFja317JHtzfX19YDtcbn07XG5cbmV4cG9ydCB7XG4gICAgb3BlcmF0aW9uLFxuICAgIENvbnZlcnRPcHRpb25zLFxuICAgIHJhbmRvbUVsZW1lbnQsXG4gICAgc2h1ZmZsZSxcbiAgICBpc09kZCxcbiAgICBpc1NxdWFyZSxcbiAgICBpc1ByaW1lLFxuICAgIGdldEZhY3RvcnMsXG4gICAgZ2V0UHJpbWVGYWN0b3JzLFxuICAgIGlzRmFjdG9yaWFsLFxuICAgIGlzUG93MixcbiAgICBnY2QsXG4gICAgaHJlZixcbn07XG4iLCIvKipcbiAqIEV4cGxvaXRzIHRoZSBbU3Ryb25nIGxhdyBvZiBzbWFsbCBudW1iZXJzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdHJvbmdfbGF3X29mX3NtYWxsX251bWJlcnMpIHRvXG4gKiBmaW5kIHByb3BlcnRpZXMgb2YgdGhlIHNtYWxsZXIgbnVtYmVycyBnaXZlbiBieSB0aGUgZGVjb21wb3NpdGlvbnMsIHN1Y2ggYXMgdGhlIGV1bGVyIHBoaSBhbmQgcHJpbWUgY291bnRpbmcgZnVuY3Rpb25zLFxuICogZmFjdG9yaWFsL2dhbW1hLCBhbmQgbW9yZS5cbiAqL1xuXG5pbXBvcnQgeyBnY2QsIHJhbmRvbUVsZW1lbnQsIGhyZWYgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgX2V1bGVyUGhpID0gKG46IG51bWJlcikgPT4ge1xuICAgIGxldCB4ID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG47IGkrKykge1xuICAgICAgICBpZiAoZ2NkKGksIG4pID09PSAxKSB7XG4gICAgICAgICAgICB4Kys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geDtcbn07XG5cbmNvbnN0IF9wcmltZVNpZXZlID0gKG46IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHByaW1lU2lldmUgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBuOyBpKyspIHtcbiAgICAgICAgcHJpbWVTaWV2ZS5wdXNoKHRydWUpO1xuICAgIH1cbiAgICBwcmltZVNpZXZlWzBdID0gZmFsc2U7XG4gICAgcHJpbWVTaWV2ZVsxXSA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgcCA9IDI7IHAgKiBwIDw9IG47IHArKykge1xuICAgICAgICBpZiAocHJpbWVTaWV2ZVtwXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHAgKiBwOyBpIDw9IG47IGkgKz0gcCkge1xuICAgICAgICAgICAgICAgIHByaW1lU2lldmVbaV0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCByZXNQcmltZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBuOyBpKyspIHtcbiAgICAgICAgaWYgKHByaW1lU2lldmVbaV0pIHtcbiAgICAgICAgICAgIHJlc1ByaW1lcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXNQcmltZXM7XG59O1xuXG5jb25zdCBfY2FjaGVkUHJpbWVzID0gX3ByaW1lU2lldmUoOTk5KTtcblxuY29uc3QgX3ByaW1lQ291bnRpbmdGdW5jdGlvbiA9IChuOiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gX2NhY2hlZFByaW1lcy5maWx0ZXIoeCA9PiB4IDw9IG4pLmxlbmd0aDtcbn07XG5cbmNvbnN0IG51bWJlclRoZW9yeUZ1bmN0aW9ucyA9IChuOiBudW1iZXIpID0+IHtcbiAgICBsZXQgbWF0Y2hpbmdQaGlJbnB1dHMgPSBbXTtcbiAgICBsZXQgbWF0Y2hpbmdQaUlucHV0cyA9IFtdO1xuICAgIGxldCBmdW5jdGlvbk9wdGlvbnMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDk5OTsgaSsrKSB7XG4gICAgICAgIGlmIChfZXVsZXJQaGkoaSkgPT09IG4pIHtcbiAgICAgICAgICAgIG1hdGNoaW5nUGhpSW5wdXRzLnB1c2goaSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3ByaW1lQ291bnRpbmdGdW5jdGlvbihpKSA9PT0gbikge1xuICAgICAgICAgICAgbWF0Y2hpbmdQaUlucHV0cy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1hdGNoaW5nUGhpSW5wdXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IG1hdGNoaW5nSW5wdXQgPSByYW5kb21FbGVtZW50KG1hdGNoaW5nUGhpSW5wdXRzKTtcblxuICAgICAgICBmdW5jdGlvbk9wdGlvbnMucHVzaChcbiAgICAgICAgICAgIGAke2hyZWYoXG4gICAgICAgICAgICAgICAgJ1xcXFx2YXJwaGknLFxuICAgICAgICAgICAgICAgICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FdWxlciUyN3NfdG90aWVudF9mdW5jdGlvbidcbiAgICAgICAgICAgICl9KCR7bWF0Y2hpbmdJbnB1dH0pYFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmIChtYXRjaGluZ1BpSW5wdXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IG1hdGNoaW5nSW5wdXQgPSByYW5kb21FbGVtZW50KG1hdGNoaW5nUGlJbnB1dHMpO1xuICAgICAgICBmdW5jdGlvbk9wdGlvbnMucHVzaChcbiAgICAgICAgICAgIGAke2hyZWYoXG4gICAgICAgICAgICAgICAgJ1xcXFxwaScsXG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1ByaW1lLWNvdW50aW5nX2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKX0oJHttYXRjaGluZ0lucHV0fSlgXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGZ1bmN0aW9uT3B0aW9ucy5sZW5ndGggPT09IDAgfHwgTWF0aC5yYW5kb20oKSA8IDAuMykge1xuICAgICAgICBmdW5jdGlvbk9wdGlvbnMucHVzaChgJHtufWApO1xuICAgIH1cblxuICAgIHJldHVybiByYW5kb21FbGVtZW50KGZ1bmN0aW9uT3B0aW9ucyk7XG59O1xuXG5jb25zdCBmYWN0b3JpYWwgPSAobjogbnVtYmVyLCBnYW1tYUZ1bmN0aW9uRW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41ICYmIGdhbW1hRnVuY3Rpb25FbmFibGVkKSB7XG4gICAgICAgIC8vIM6TKG4pID0gKG4tMSkhXG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXEdhbW1hJywgJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dhbW1hX2Z1bmN0aW9uJyl9ICgke24gKyAxfSl9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVc2luZyB0aGUgcGkgcHJvZHVjdCBub3RhdGlvbiBvZiBmYWN0b3JpYWxcbiAgICAgICAgcmV0dXJuIGB7XFxcXHByb2Rfe2s9MX1eeyR7bn19IGt9YDtcbiAgICB9XG59O1xuXG4vLyByZXByZXNlbnRhdGlvbiBvZiAyXm5cbmNvbnN0IHBvdzJDaG9vc2UgPSAobjogbnVtYmVyLCBudW1iZXJUaGVvcnlFbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgbGV0IHggPSBudW1iZXJUaGVvcnlFbmFibGVkID8gbnVtYmVyVGhlb3J5RnVuY3Rpb25zKG4pIDogbjtcbiAgICByZXR1cm4gYHske2hyZWYoXG4gICAgICAgIGBcXFxcc3VtX3trPTB9Xnske3h9fWAsXG4gICAgICAgICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX21hdGhlbWF0aWNhbF9zZXJpZXMjQmlub21pYWxfY29lZmZpY2llbnRzXzInXG4gICAgKX0geyR7bn0gXFxcXGNob29zZSBrfX1gO1xufTtcblxuLy8gTGltaXRzIG9mIG5hdHVyYWwgbG9nIGZ1bmN0aW9uczogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9saW1pdHMjTmF0dXJhbF9sb2dhcml0aG1zXG5jb25zdCBsaW1pdE5hdHVyYWxMb2cgPSAobjogbnVtYmVyLCBudW1iZXJUaGVvcnlFbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbGltaXRzI05hdHVyYWxfbG9nYXJpdGhtcyc7XG5cbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe3ggXFxcXHRvIFxcXFxpbmZ0eX0nLCB1cmwpfXsgXFxcXGZyYWN7XFxcXGxuKHgpfXt4fSB9fWA7XG4gICAgfSBlbHNlIGlmIChuID09PSAxKSB7XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gMX0nLCB1cmwpfSAge1xcXFxmcmFje1xcXFxsbih4KX17eCAtIDF9fX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB4ID0gbnVtYmVyVGhlb3J5RW5hYmxlZCA/IG51bWJlclRoZW9yeUZ1bmN0aW9ucyhuKSA6IG47XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gMH0nLCB1cmwpfXsgXFxcXGZyYWN7LVxcXFxsbigxICsgJHt4fShlXnsteH0gLSAxKSl9e3h9IH19YDtcbiAgICB9XG59O1xuXG4vLyBMaW1pdHMgb2YgZXhwb25lbnRpYWwgZnVuY3Rpb25zOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX2xpbWl0cyNTdW1zLF9wcm9kdWN0c19hbmRfY29tcG9zaXRlc1xuY29uc3QgbGltaXRFeHBvbmVudGlhbCA9IChuOiBudW1iZXIsIG51bWJlclRoZW9yeUVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9saW1pdHMjU3VtcyxfcHJvZHVjdHNfYW5kX2NvbXBvc2l0ZXMnO1xuXG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byBcXFxcaW5mdHl9JywgdXJsKX17eGVeey14fX19YDtcbiAgICB9IGVsc2UgaWYgKG4gPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byAwfScsIHVybCl9eyBcXFxcZnJhY3tlXnggLSAxfXt4fSB9fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHggPSBudW1iZXJUaGVvcnlFbmFibGVkID8gbnVtYmVyVGhlb3J5RnVuY3Rpb25zKG4pIDogbjtcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byAwfScsIHVybCl9eyBcXFxcZnJhY3tlXnske3h9eH0gLSAxfXt4fSB9fWA7XG4gICAgfVxufTtcblxuLy8gTGltaXRzIG9mIHBvbHlub21pYWwgZnVuY3Rpb25zXG5jb25zdCBsaW1pdFBvbHlub21pYWwgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbGltaXRzI0Z1bmN0aW9uc19vZl90aGVfZm9ybV94YSc7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgbGV0IHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMCk7XG4gICAgICAgIHJldHVybiBgeyR7aHJlZignXFxcXGxpbV97eCBcXFxcdG8gXFxcXGluZnR5fScsIHVybCl9eyR7cn14XnstMX19fWA7XG4gICAgfSBlbHNlIGlmIChuID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHVybDIgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9saW1pdHMjRnVuY3Rpb25zX29mX3RoZV9mb3JtX3hnKHgpJztcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcbGltX3t4IFxcXFx0byBcXFxcaW5mdHl9JywgdXJsMil9e3heezEveH19fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZ2VuZXJhdGUgcmFuZG9tIHBvbHlub21pYWwgbGltaXRzIGxpa2UgbGltIHggLT4g4oieICgyOHheMiAtIDExeCkvKDR4XjIgKyAxMHgpXG4gICAgICAgIC8vIHNpbmNlIHRoZSBoaWdoZXN0IHBvd2VyIHRlcm1zIGRvbWluYXRlIGluIHRoZSBsaW1pdHMsIHRoZSByZXN0IGFyZSBpZ25vcmVkIGFuZCBjYW4gYmUgcmFuZG9tXG5cbiAgICAgICAgLy8gR2V0IHJhbmRvbSBtdWx0aXBsaWVyIGdyZWF0ZXIgdGhhbiAxXG4gICAgICAgIGxldCBtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSkgKyAxO1xuICAgICAgICAvLyBDaG9vc2UgYSByYW5kb20gaGlnaGVzdCBwb3dlci4gVGhpcyBkZXRlcm1pbmVzIHRoZSBmaW5hbCBzb2x1dGlvbiBvZiB0aGUgbGltaXRcbiAgICAgICAgbGV0IGhpZ2hlc3RQb3dlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMjtcblxuICAgICAgICBsZXQgbnVtZXJhdG9yTnVtYmVyT2ZUZXJtcyA9IGhpZ2hlc3RQb3dlciAtIDE7XG4gICAgICAgIGxldCBkZW5vbWluYXRvck51bWJlck9mVGVybXMgPSBoaWdoZXN0UG93ZXIgLSAxO1xuXG4gICAgICAgIGxldCBzaWducyA9IFsnLScsICcrJ107XG4gICAgICAgIGxldCBudW1lcmF0b3IgPSBgJHttICogbn14Xnske2hpZ2hlc3RQb3dlcn19IGA7XG4gICAgICAgIGxldCBkZW5vbWluYXRvciA9IGAke219eF57JHtoaWdoZXN0UG93ZXJ9fSBgO1xuXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgcG9seW5vbWlhbCBudW1lcmF0b3Igd2l0aCByYW5kb20gbGVuZ3RoIGFuZCBjb2VmZmljaWVudHNcbiAgICAgICAgLy9leDogMTV4XjJcbiAgICAgICAgZm9yIChsZXQgaSA9IG51bWVyYXRvck51bWJlck9mVGVybXM7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBjb2VmID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMjtcblxuICAgICAgICAgICAgbGV0IHBvd2VyID0gaSA8IDIgPyAnJyA6IGBeeyR7aX19YDtcbiAgICAgICAgICAgIGxldCBzaWduID0gc2lnbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMildO1xuXG4gICAgICAgICAgICBudW1lcmF0b3IgKz0gYCR7c2lnbn0gJHtjb2VmfXgke3Bvd2VyfSBgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgYSBwb2x5bm9taWFsIGRlbm9taW5hdG9yIHdpdGggcmFuZG9tIGxlbmd0aCBhbmQgY29lZmZpY2llbnRzXG4gICAgICAgIGZvciAobGV0IGkgPSBkZW5vbWluYXRvck51bWJlck9mVGVybXM7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBjb2VmID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMjtcblxuICAgICAgICAgICAgbGV0IHBvd2VyID0gaSA8IDIgPyAnJyA6IGBeeyR7aX19YDtcbiAgICAgICAgICAgIGxldCBzaWduID0gc2lnbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMildO1xuXG4gICAgICAgICAgICBkZW5vbWluYXRvciArPSBgJHtzaWdufSAke2NvZWZ9eCR7cG93ZXJ9IGA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYHsgXFxcXGxpbV97eCBcXFxcdG8gXFxcXGluZnR5fSB7IFxcXFxmcmFjeyR7bnVtZXJhdG9yfX17JHtkZW5vbWluYXRvcn19fSB9YDtcbiAgICB9XG59O1xuXG4vLyBVc2luZyBldWxlcidzIGlkZW50aXR5LiBUaGF0IGlzLCBlXihwaSppKSA9IC0xXG5jb25zdCBldWxlcnNJZGVudGl0eSA9IChuOiBudW1iZXIpID0+IHtcbiAgICAvLyBlLmcg4oiSNmVeKHBpKmkpPTZcblxuICAgIGNvbnN0IHVybCA9ICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FdWxlciUyN3NfaWRlbnRpdHknO1xuXG4gICAgaWYgKG4gIT09IDApIHtcbiAgICAgICAgcmV0dXJuIGB7LSR7bn0ke2hyZWYoJ2Vee1xcXFxwaSBpfScsIHVybCl9fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGB7KCR7aHJlZignZV57XFxcXHBpIGl9JywgdXJsKX0gKyAxKX1gO1xuICAgIH1cbn07XG5cbi8vIEluZmluaXRlIGdlb21ldHJpYyBzZXJpZXMgdGhhdCBldmFsdWF0ZXMgdG8gYSBmaW5pdGUgdmFsdWVcbmNvbnN0IGluZmluaXRlR2VvbWV0cmljU2VyaWVzID0gKG46IG51bWJlciwgbnVtYmVyVGhlb3J5RW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgIGxldCB1cmwgPVxuICAgICAgICAgICAgJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbWF0aGVtYXRpY2FsX3NlcmllcyNUcmlnb25vbWV0cmljX2Z1bmN0aW9ucyc7XG4gICAgICAgIGxldCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMztcbiAgICAgICAgcmV0dXJuIGB7JHtocmVmKCdcXFxcc3VtJywgdXJsKX1cXFxcbGltaXRzX3trPTB9Xnske3IgLVxuICAgICAgICAgICAgMX19IHtcXFxcc2luIFxcXFxsZWZ0KHsgXFxcXGZyYWN7MiBcXFxccGkga317JHtyfX0gfSBcXFxccmlnaHQpfX1gO1xuICAgIH1cblxuICAgIC8vIFVzaW5nIHRoZSBSaWVtYW5uIHpldGEgZnVuY3Rpb25cbiAgICBlbHNlIGlmIChuID09PSAxKSB7XG4gICAgICAgIGxldCB1cmwgPVxuICAgICAgICAgICAgJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BhcnRpY3VsYXJfdmFsdWVzX29mX3RoZV9SaWVtYW5uX3pldGFfZnVuY3Rpb24jVGhlX1JpZW1hbm5femV0YV9mdW5jdGlvbl9hdF8wX2FuZF8xJztcblxuICAgICAgICByZXR1cm4gYHske2hyZWYoJ1xcXFxsaW1fe1xcXFxlcHNpbG9uIFxcXFx0byAwfScsIHVybCl9eyBcXFxcZXBzaWxvbiBcXFxcemV0YSgxICsgXFxcXGVwc2lsb24pIH19YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVc2luZyB0aGUgaW5maW5pdGUgZ2VvbWV0cmljIHNlcmllcyBydWxlOiBXaGVuIOKIkjE8eDwxLCBzdW1tYXRpb24gZnJvbSBpID0gMCB0byBpbmZpbml0eSBvZiByXmkgPSAxLygxLXIpIG9yIChyLTEpL3IuXG4gICAgICAgIC8vIERlY2ltYWwgY2FuIGJlIHJlcHJlc2VudGVkIGFzIGZyYWN0aW9uIHRvby4gZS5nICgwLjI1KV5pID0gKDEvNCleaSA9IDReLWlcbiAgICAgICAgbGV0IHgxID0gbnVtYmVyVGhlb3J5RW5hYmxlZCA/IG51bWJlclRoZW9yeUZ1bmN0aW9ucyhuIC0gMSkgOiBuIC0gMTtcbiAgICAgICAgbGV0IHgyID0gbnVtYmVyVGhlb3J5RW5hYmxlZCA/IG51bWJlclRoZW9yeUZ1bmN0aW9ucyhuKSA6IG47XG4gICAgICAgIHJldHVybiBge1xcXFxzdW1cXFxcbGltaXRzX3trPTB9XlxcXFxpbmZ0eSB7XFxcXGxlZnQoe1xcXFxmcmFjeyR7eDF9fXske3gyfX19XFxcXHJpZ2h0KV57a319fWA7XG4gICAgfVxufTtcblxuLy8gVXNpbmcgdGhlIHRyaWcgaWRlbnRpdHkgKGNvc14yKXggKyAoc2luXjIpeCA9IDFcbmNvbnN0IHRyaWdJZGVudGl0eSA9IChleHByZXNzaW9uOiBzdHJpbmcpID0+IHtcbiAgICBsZXQgcmFuZG9tVmFsdWUgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGlmIChyYW5kb21WYWx1ZSA8IDAuMjUpIHtcbiAgICAgICAgcmV0dXJuIGBcXFxcbGVmdChcXFxcZnJhY3ske2V4cHJlc3Npb259fXsoXFxcXGNvc14yeCArIFxcXFxzaW5eMngpfVxcXFxyaWdodClgO1xuICAgIH0gZWxzZSBpZiAocmFuZG9tVmFsdWUgPCAwLjUpIHtcbiAgICAgICAgcmV0dXJuIGBcXFxcbGVmdCh7JHtleHByZXNzaW9ufSBcXFxcdGltZXMgKFxcXFxjb3NeMnggKyBcXFxcc2luXjJ4KX1cXFxccmlnaHQpYDtcbiAgICB9XG59O1xuXG4vKiBVc2luZyB0aGUgZGlmZmVyZW5jZSBvZiB0d28gc3F1YXJlcyBpbiBsaW1pdHMgKi9cbmNvbnN0IGxpbURpZmZUd29TcXVhcmVzID0gKG46IG51bWJlcikgPT4ge1xuICAgIGxldCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMTtcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xuICAgICAgICB2YXIgdGV4ID0gYFxcXFxsaW1fe3ggXFxcXHRvICR7biAtIHJ9fSBcXFxcZnJhY3t4XjIgLSAke3IgKiogMn19e3ggLSAke3J9fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHRleCA9IGBcXFxcbGltX3t4IFxcXFx0byAke24gKyByfX0gXFxcXGZyYWN7eF4yIC0gJHtyICoqIDJ9fXt4ICsgJHtyfX1gO1xuICAgIH1cbiAgICByZXR1cm4gYHske3RleH19YDtcbn07XG5cbmNvbnN0IHNhbWVOdW1iZXIgPSAobjogbnVtYmVyKSA9PiBgJHtufWA7XG5cbmV4cG9ydCB7XG4gICAgbnVtYmVyVGhlb3J5RnVuY3Rpb25zLFxuICAgIGZhY3RvcmlhbCxcbiAgICBwb3cyQ2hvb3NlLFxuICAgIGxpbWl0TmF0dXJhbExvZyxcbiAgICBsaW1pdEV4cG9uZW50aWFsLFxuICAgIGxpbWl0UG9seW5vbWlhbCxcbiAgICBldWxlcnNJZGVudGl0eSxcbiAgICBpbmZpbml0ZUdlb21ldHJpY1NlcmllcyxcbiAgICB0cmlnSWRlbnRpdHksXG4gICAgbGltRGlmZlR3b1NxdWFyZXMsXG4gICAgc2FtZU51bWJlcixcbn07XG4iLCIvKipcbiAqIFRoaXMgZmlsZSBjb250YWlucyBkZWNvbXBvc2l0aW9uIGZ1bmN0aW9ucy4gVGhleSBicmVhayBsYXJnZXIgbnVtYmVycyAoMy1kaWdpdCkgaW50byBzbWFsbGVyIG9uZXMgKDItMSBkaWdpdHMpLFxuICogd2hlcmUgdGhlIFtTdHJvbmcgbGF3IG9mIHNtYWxsIG51bWJlcnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0cm9uZ19sYXdfb2Zfc21hbGxfbnVtYmVycykgY2FuIHRha2Ugb2YgdGhlbVxuICogYXMgdGhleSBoYXZlIG11Y2ggbW9yZSBwcm9wZXJ0aWVzIHRoYW4gbGFyZ2VyIG51bWJlcnMuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBvcGVyYXRpb24sXG4gICAgZ2V0RmFjdG9ycyxcbiAgICBnZXRQcmltZUZhY3RvcnMsXG4gICAgQ29udmVydE9wdGlvbnMsXG4gICAgaXNGYWN0b3JpYWwsXG4gICAgaXNQb3cyLFxuICAgIHNodWZmbGUsXG4gICAgaXNQcmltZSxcbiAgICBpc1NxdWFyZSxcbiAgICBpc09kZCxcbn0gZnJvbSAnLi91dGlscyc7XG5cbnR5cGUgZGVjb21wb3NpdGlvbiA9IChuOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHN0cmluZztcblxuaW1wb3J0ICogYXMgcmVwcmVzZW50YXRpb25zIGZyb20gJy4vcmVwcmVzZW50YXRpb25zJztcblxuLy8gZm9yIG4gPSBhYiBhbmQg4oiAYywgZWl0aGVyIHJldHVybiBuID0gYWIgb3IgKGEtYykoYitjKSArIGMoYi1hK2MpXG5jb25zdCBkZWNvbXBvc2VBQkMgPSAobnVtYmVyOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHtcbiAgICBsZXQgZmFjdG9ycyA9IGdldEZhY3RvcnMobnVtYmVyKTtcbiAgICBsZXQgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmYWN0b3JzLmxlbmd0aCk7XG4gICAgbGV0IGEgPSBmYWN0b3JzW3JhbmRvbUluZGV4XTtcbiAgICBsZXQgYiA9IG51bWJlciAvIGE7XG4gICAgbGV0IGMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMCkgKyAxO1xuXG4gICAgLy8gYWJcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMikge1xuICAgICAgICByZXR1cm4gYHt7XFxcXGxlZnQoeyR7b3BzWzBdKGEpfX1cXFxccmlnaHQpfXtcXFxcbGVmdCh7JHtvcHNbMV0oYil9fVxcXFxyaWdodCl9fWA7XG4gICAgfVxuXG4gICAgLy8gKGEgLSBjKShiICsgYykgKyBjIChiIC0gYSArIGMpXG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBgeyBcXFxcbGVmdCh7JHtvcHNbMF0oYSl9IC0gJHtvcHNbMV0oYyl9fVxcXFxyaWdodCkgXFxcXGxlZnQoeyR7b3BzWzJdKGIpfSArICR7b3BzWzNdKFxuICAgICAgICAgICAgY1xuICAgICAgICApfX1cXFxccmlnaHQpICsgeyR7b3BzWzNdKGMpfX17XFxcXGxlZnQoeyR7b3BzWzNdKGIpfSAtICR7b3BzWzNdKGEpfSArICR7b3BzWzNdKFxuICAgICAgICAgICAgY1xuICAgICAgICApfX0gXFxcXHJpZ2h0KX0gfWA7XG4gICAgfVxufTtcblxuLy8gNSA9IHNxcnQoMjUpXG5jb25zdCBkZWNvbXBvc2VTcXJ0ID0gKG46IG51bWJlciwgb3BzOiBvcGVyYXRpb25bXSkgPT4ge1xuICAgIGxldCBzcXVhcmUgPSBuICoqIDI7XG4gICAgcmV0dXJuIGB7XFxcXHNxcnR7JHtvcHNbMF0oc3F1YXJlKX19fWA7XG59O1xuXG4vLyAyNSA9IDEgKyAzICsgNSArIDcgKyA5XG5jb25zdCBkZWNvbXBvc2VTcXVhcmUgPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgbGV0IHNxdWFyZVJvb3QgPSBNYXRoLnNxcnQobik7XG4gICAgbGV0IHN1bSA9IGAke29wc1swXSgxKX1gO1xuICAgIGxldCBvZGRWYWwgPSAxO1xuXG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcXVhcmVSb290IC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBvZGRWYWwgKz0gMjtcbiAgICAgICAgICAgIHN1bSArPSBgKyAke29wc1szXShvZGRWYWwpfWA7XG4gICAgICAgIH1cbiAgICAgICAgc3VtID0gYHsgJHtzdW19IH1gO1xuICAgICAgICByZXR1cm4gc3VtO1xuICAgIH1cblxuICAgIC8vIChhICsgYileMiA9IGFeMiArIDJhYiArIGJeMlxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgYSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNxdWFyZVJvb3QgLSAxKSArIDE7XG4gICAgICAgIGxldCBiID0gc3F1YXJlUm9vdCAtIGE7XG5cbiAgICAgICAgLy8gUmVwcmVzZW50aW5nIChhICsgYileMlxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xuICAgICAgICAgICAgcmV0dXJuIGB7IHtcXFxcbGVmdCgke29wc1swXShhKX0gKyAke29wc1swXShiKX1cXFxccmlnaHQpfV4yfWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXByZXNlbnRpbmcgYV4yICsgMmFiICsgYl4yXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGB7IHtcXFxcbGVmdCgke29wc1swXShhKX1cXFxccmlnaHQpfV4yICsgeyR7b3BzWzNdKDIpfX17XFxcXGxlZnQoJHtvcHNbMV0oXG4gICAgICAgICAgICAgICAgYVxuICAgICAgICAgICAgKX1cXFxccmlnaHQpfXtcXFxcbGVmdCgke29wc1syXShiKX1cXFxccmlnaHQpfSArIHtcXFxcbGVmdCgke29wc1szXShiKX1cXFxccmlnaHQpfV4yfWA7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vLyAyNSA9IDEzXjIgLSAxMl4yXG5jb25zdCBkZWNvbXBvc2VEaWZmZXJlbmNlU3F1YXJlcyA9IChuOiBudW1iZXIsIG9wczogb3BlcmF0aW9uW10pID0+IHtcbiAgICBsZXQgYSA9IE1hdGguZmxvb3IobiAvIDIpO1xuICAgIGxldCBiID0gTWF0aC5jZWlsKG4gLyAyKTtcblxuICAgIGlmIChNYXRoLmNlaWwobiAvIDIpICoqIDIgPCAxMDAgJiYgTWF0aC5yYW5kb20oKSA8IDAuNykge1xuICAgICAgICByZXR1cm4gYHske29wc1swXShiICoqIDIpfSAtICR7b3BzWzBdKGEgKiogMil9fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGB7IFxcXFxsZWZ0KHske29wc1swXShiKX19XFxcXHJpZ2h0KV4yIC0gIFxcXFxsZWZ0KHske29wc1sxXShhKX19XFxcXHJpZ2h0KV4yfWA7XG4gICAgfVxufTtcblxuLy8gNyA9IDIgKiAzICsgMVxuY29uc3QgZGVjb21wb3NlQWRkTXVsdGlwbHkgPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgbGV0IHJhbmROdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBuICsgMSkgKyAxO1xuICAgIGxldCByID0gbiAlIHJhbmROdW07XG4gICAgbGV0IGEgPSBNYXRoLmZsb29yKG4gLyByYW5kTnVtKTtcbiAgICByZXR1cm4gYCR7b3BzWzBdKGEpfSBcXFxcdGltZXMgeyR7b3BzWzFdKHJhbmROdW0pfX0gKyAke29wc1syXShyKX1gO1xufTtcblxuLy8gNyA9IDcqOC84XG5jb25zdCBkZWNvbXBvc2VNdWxEaXZpZGUgPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgbGV0IHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDE7XG4gICAgcmV0dXJuIGBcXFxcZnJhY3ske29wc1swXShuICogcil9fSB7JHtvcHNbMV0ocil9fWA7XG59O1xuXG5jb25zdCBkZWNvbXBvc2VMY20gPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgLy8gYWxsIGZhY3RvcnMsIGUuZy4gWzIsIDIsIDIsIDMsIDMsIC4uLl1cbiAgICBjb25zdCBmYWN0b3JzID0gZ2V0UHJpbWVGYWN0b3JzKG4pO1xuXG4gICAgLy8gZmFjdG9ycyB3aXRoIGNvcnJlc3BvbmRpbmcgZXhwb25lbnRzLCBlLmcuIHsyOiAzLCAzOiAyLCA3OiAxLCAuLi59XG4gICAgbGV0IGZhY3RvckV4cDogTWFwPG51bWJlciwgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGYgb2YgZmFjdG9ycykge1xuICAgICAgICBmYWN0b3JFeHAuc2V0KGYsIGZhY3RvckV4cC5oYXMoZikgPyBmYWN0b3JFeHAuZ2V0KGYpISArIDEgOiAxKTtcbiAgICB9XG5cbiAgICAvLyBkaXN0aW5jdCBwcmltZSBmYWN0b3JzLCBlLmcuIFs3LCAzLCA1LCAyXVxuICAgIGNvbnN0IHByaW1lRmFjdG9ycyA9IHNodWZmbGUoQXJyYXkuZnJvbShmYWN0b3JFeHAua2V5cygpKSk7XG5cbiAgICAvLyBpbiByYW5nZSBbMSwgbGVuZ3RoLTFdXG4gICAgbGV0IHNsaWNlSWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHByaW1lRmFjdG9ycy5sZW5ndGggLSAxKSkgKyAxO1xuXG4gICAgLy8gc3BsaXQgaW50byBjb21wbGVtZW50c1xuICAgIGxldCBncm91cDEgPSBwcmltZUZhY3RvcnMuc2xpY2UoMCwgc2xpY2VJZHgpO1xuICAgIGxldCBncm91cDIgPSBwcmltZUZhY3RvcnMuc2xpY2Uoc2xpY2VJZHgpO1xuXG4gICAgbGV0IGdyb3VwMVZhbHVlID0gZ3JvdXAxLm1hcChtID0+IG0gKiogZmFjdG9yRXhwLmdldChtKSEpLnJlZHVjZSgoYSwgYikgPT4gYSAqIGIsIDEpO1xuICAgIGxldCBncm91cDJWYWx1ZSA9IGdyb3VwMi5tYXAobSA9PiBtICoqIGZhY3RvckV4cC5nZXQobSkhKS5yZWR1Y2UoKGEsIGIpID0+IGEgKiBiLCAxKTtcblxuICAgIHJldHVybiBgXFxcXG9wZXJhdG9ybmFtZXtsY219XFxcXGxlZnQoJHtvcHNbMF0oZ3JvdXAxVmFsdWUpfSwgJHtvcHNbMV0oZ3JvdXAyVmFsdWUpfVxcXFxyaWdodClgO1xufTtcblxuY29uc3QgZGVjb21wb3NlU3VtQ29uc2VjdXRpdmUgPSAobjogbnVtYmVyLCBvcHM6IG9wZXJhdGlvbltdKSA9PiB7XG4gICAgY29uc3Qgb2RkRmFjdG9ycyA9IGdldEZhY3RvcnMobikuZmlsdGVyKGYgPT4gZiAlIDIgPT0gMSAmJiBmICE9PSAxKTtcblxuICAgIGNvbnN0IGNob3NlbkZhY3RvciA9IG9kZEZhY3RvcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogb2RkRmFjdG9ycy5sZW5ndGgpXTtcbiAgICBjb25zdCBtaWRkbGUgPSBuIC8gY2hvc2VuRmFjdG9yO1xuXG4gICAgY29uc3Qgc2lkZUxlbmd0aCA9IChjaG9zZW5GYWN0b3IgLSAxKSAvIDI7XG5cbiAgICBjb25zdCBtaW5WYWx1ZSA9IG1pZGRsZSAtIHNpZGVMZW5ndGg7XG4gICAgY29uc3QgbWluVmFsdWVTaWduID0gbWluVmFsdWUgPCAwID8gJy0nIDogJysnO1xuXG4gICAgcmV0dXJuIGBcXFxcc3VtX3trPTB9Xnske29wc1swXShjaG9zZW5GYWN0b3IgLSAxKX19IFxcXFxsZWZ0KGsgJHttaW5WYWx1ZVNpZ259ICR7b3BzWzFdKFxuICAgICAgICBNYXRoLmFicyhtaW5WYWx1ZSlcbiAgICApfVxcXFxyaWdodClgO1xufTtcblxuLyogZW5kIGRlY29tcG9zZSBmdW5jdGlvbnMgKi9cblxuY29uc3QgY29uZGl0aW9uYWxEZWNvbXBvc2l0aW9uID0gKFxuICAgIHdyYXBwZWRGdW5jdGlvbjogb3BlcmF0aW9uLFxuICAgIG9wdGlvbnM6IENvbnZlcnRPcHRpb25zXG4pOiBvcGVyYXRpb24gPT4ge1xuICAgIHJldHVybiAobjogbnVtYmVyKSA9PiB7XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDw9IDAuNSkge1xuICAgICAgICAgICAgLy8gaW52ZXJzZSBmYWN0b3JpYWwgb2Ygbiwgc3VjaCB0aGF0IGZhYyEgPSBuXG4gICAgICAgICAgICBjb25zdCBmYWMgPSBpc0ZhY3RvcmlhbChuKTtcbiAgICAgICAgICAgIGlmIChmYWMpIHtcbiAgICAgICAgICAgICAgICAvLyBmYWN0b3JpYWwoZmFjKSA9IGZhYyEgPSBuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcHJlc2VudGF0aW9ucy5mYWN0b3JpYWwoZmFjLCBvcHRpb25zLmdhbW1hRnVuY3Rpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNQb3cyKG4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcHJlc2VudGF0aW9ucy5wb3cyQ2hvb3NlKE1hdGgubG9nMihuKSwgb3B0aW9ucy5udW1iZXJUaGVvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHdyYXBwZWRGdW5jdGlvbihuKTtcbiAgICB9O1xufTtcblxuLy8gQnJlYWsgYSBudW1iZXIgZG93biBpbnRvIHNtYWxsZXIgbnVtYmVycyBzZXBhcmF0ZWQgYnkgb3BlcmF0b3JzXG5jb25zdCBkZWNvbXBvc2UgPSAobjogbnVtYmVyLCBhdmFpbGFibGVfb3BlcmF0aW9uczogb3BlcmF0aW9uW10pID0+IHtcbiAgICBsZXQgb3BlcmF0aW9ucyA9IGF2YWlsYWJsZV9vcGVyYXRpb25zO1xuXG4gICAgLy8gcGFkIG9wZXJhdGlvbnMgdG8gYXQgbGVhc3QgNCBlbGVtZW50c1xuICAgIHdoaWxlIChvcGVyYXRpb25zLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKHJlcHJlc2VudGF0aW9ucy5zYW1lTnVtYmVyKTtcbiAgICB9XG5cbiAgICBvcGVyYXRpb25zID0gc2h1ZmZsZShvcGVyYXRpb25zKS5zbGljZSgwLCA0KTtcblxuICAgIGNvbnN0IGRlY29tcG9zaXRpb25zOiBkZWNvbXBvc2l0aW9uW10gPSBbXTtcblxuICAgIC8vIDEuIGFiID0gKGEgLSBjKShiICsgYykgKyBjIChiIC0gYSArIGMpLCB3aGVyZSBjIGlzIGFueSByYW5kb20gcG9zaXRpdmUgbnVtYmVyXG4gICAgaWYgKG4gIT09IDAgJiYgbiA8IDEwMCAmJiAobiA9PT0gMiB8fCAhaXNQcmltZShuKSkpIHtcbiAgICAgICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VBQkMpO1xuICAgIH1cblxuICAgIC8vIDIuIFJlcHJlc2VudCAoc21hbGwpIG51bWJlcnMgdXNpbmcgdGhlaXIgc3F1YXJlIGFuZCBzcXVhcmUgcm9vdFxuICAgIGlmIChuIDwgMTApIHtcbiAgICAgICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VTcXJ0KTtcbiAgICB9XG5cbiAgICAvLyAzLiBUaGUgc3VtIG9mIHRoZSBmaXJzdCBuIG9kZCBudW1iZXJzIGlzIGVxdWFsIHRvIG5eMiBlLmcgMSArIDMgKyA1ID0gM14yXG4gICAgaWYgKG4gPiAxICYmIGlzU3F1YXJlKG4pICYmIG4gPCAxMDApIHtcbiAgICAgICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VTcXVhcmUpO1xuICAgIH1cblxuICAgIC8vIDQuIFRoZSBzdW0gb2YgdHdvIGNvbnNlY3V0aXZlIGludGVnZXJzIGlzIHRoZSBkaWZmZXJlbmNlIG9mIHRoZWlyIHNxdWFyZXMgZS5nIDMgKyAyID0gM14yIC0gMl4yXG4gICAgaWYgKGlzT2RkKG4pKSB7XG4gICAgICAgIGRlY29tcG9zaXRpb25zLnB1c2goZGVjb21wb3NlRGlmZmVyZW5jZVNxdWFyZXMpO1xuICAgIH1cblxuICAgIC8vIDUuIEV4cHJlc3MgYSBudW1iZXIgdXNpbmcgbXVsdGlwbGljYXRpb24gYW5kIGFkZGl0aW9uLiBFLmcgNCA9IDEgKiAzICsgMVxuICAgIGlmIChuIDw9IDIwMCkge1xuICAgICAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZU11bERpdmlkZSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc1ByaW1lKG4pICYmIG4gPiAxKSB7XG4gICAgICAgIGRlY29tcG9zaXRpb25zLnB1c2goZGVjb21wb3NlTGNtKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzUG93MihuKSAmJiBuID4gMSkge1xuICAgICAgICBkZWNvbXBvc2l0aW9ucy5wdXNoKGRlY29tcG9zZVN1bUNvbnNlY3V0aXZlKTtcbiAgICB9XG5cbiAgICAvLyA2LiBNdWx0aXBseSBhbmQgZGl2aWRlIGJ5IGEgcmFuZG9tIG51bWJlci4gZS5nIDIgPSAoMio1KS81XG4gICAgZGVjb21wb3NpdGlvbnMucHVzaChkZWNvbXBvc2VBZGRNdWx0aXBseSk7XG5cbiAgICByZXR1cm4gc2h1ZmZsZShkZWNvbXBvc2l0aW9ucylbMF0obiwgb3BlcmF0aW9ucyk7XG59O1xuXG5leHBvcnQgeyBkZWNvbXBvc2UsIGNvbmRpdGlvbmFsRGVjb21wb3NpdGlvbiB9O1xuIiwiLyoqXG4gKiBDb252ZXJ0cyB0aGUgTWF0aEpheCBTVkcgKFRPRE86IHRoaXMgY29kZSBwcm9kdWNlcyB0aGUgZXJyb3IgaWYgdGhlIE1hdGhKYXggaXMgaHRtbCkgdG8gYSBwbmcsXG4gKiBieSBzZXJpYWxpemluZyB0aGUgc3ZnIGludG8gYSBkYXRhIHVybCBhbmQgZHJhd2luZyB0byB0aGUgY2FudmFzLCB3aGVyZSBpdCBjYW4gdGhhbiBiZSBzZXJpYWxpemVkXG4gKiBpbnRvIGEgcG5nLlxuICovXG5cbmxldCBkb3dubG9hZEJ0biA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQtaW1nJyk7XG5cbi8vIEluaXRpYXRlIGRvd25sb2FkIG9mIGJsb2JcbmNvbnN0IGRvd25sb2FkID0gKGZpbGVuYW1lOiBzdHJpbmcsIGJsb2I6IEJsb2IpID0+IHtcbiAgICBjb25zdCBlbGVtID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBlbGVtLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBlbGVtLmRvd25sb2FkID0gZmlsZW5hbWU7XG4gICAgZWxlbS5jbGljaygpO1xufTtcblxuY29uc3QgZG93bmxvYWRQTkcgPSAoKSA9PiB7XG4gICAgLy8gR2V0IHRoZSBzdmcgZnJvbSB0aGUgcGFnZVxuICAgIHZhciBzdmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzdmcnKSE7XG5cbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgbnVtYmVyXG4gICAgdmFyIG51bWJlciA9ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXQnKSkudmFsdWU7XG5cbiAgICAvLyBJbmNyZWFzZSB0aGUgU1ZHJ3Mgd2lkdGggYW5kIGhlaWdodCB0byBwcm9kdWNlIGEgYmlnZ2VyIGltYWdlXG4gICAgbGV0IHcgPSBwYXJzZUludChzdmcuZ2V0QXR0cmlidXRlKCd3aWR0aCcpISk7XG4gICAgbGV0IGggPSBwYXJzZUludChzdmcuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKSEpO1xuXG4gICAgLy8gQ29udmVydCBTVkcgdG8gc3RyaW5nIGRhdGFcbiAgICBjb25zdCBkYXRhID0gbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhzdmcpO1xuXG4gICAgY29uc3Qgc3ZnRGF0YVVybCA9IGBkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCR7YnRvYShkYXRhKX1gO1xuXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgLy8gdXBzY2FsZSBoZWlnaHQgdG8gYXQgbGVhc3QgODAwcHhcbiAgICBsZXQgc2NhbGVGYWN0b3IgPSBNYXRoLm1heCgyLCA4MDAgLyBoKTtcbiAgICBjYW52YXMud2lkdGggPSB3ICogc2NhbGVGYWN0b3I7XG4gICAgY2FudmFzLmhlaWdodCA9IGggKiBzY2FsZUZhY3RvcjtcblxuICAgIGNvbnNvbGUubG9nKHsgdzogY2FudmFzLndpZHRoLCBoOiBjYW52YXMuaGVpZ2h0IH0pO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcblxuICAgIGNvbnN0IHN2Z0RhdGFJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHN2Z0RhdGFJbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2Uoc3ZnRGF0YUltYWdlLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAgIGNhbnZhcy50b0Jsb2IoYmxvYiA9PiB7XG4gICAgICAgICAgICBpZiAoYmxvYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHNlcmlhbGl6ZSBjYW52YXMgdG8gYmxvYicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG93bmxvYWQoYGNvbXBsaWNhdGVkLWV4cHJlc3Npb24tdGhhdC1lcXVhbHMtJHtudW1iZXJ9YCwgYmxvYik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBzdmdEYXRhSW1hZ2Uuc3JjID0gc3ZnRGF0YVVybDtcbn07XG5cbmNvbnN0IG1haW4gPSAoKSA9PiB7XG4gICAgZG93bmxvYWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkb3dubG9hZFBORyk7XG59O1xuZXhwb3J0IHsgbWFpbiB9O1xuIiwiZGVjbGFyZSB2YXIgTWF0aEpheDogYW55O1xuXG5pbXBvcnQgKiBhcyByZXByZXNlbnRhdGlvbnMgZnJvbSAnLi9yZXByZXNlbnRhdGlvbnMnO1xuaW1wb3J0IHsgQ29udmVydE9wdGlvbnMsIG9wZXJhdGlvbiB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgZGVjb21wb3NlLCBjb25kaXRpb25hbERlY29tcG9zaXRpb24gfSBmcm9tICcuL2RlY29tcG9zaXRpb25zJztcbmltcG9ydCAqIGFzIGRvd25sb2FkX3BuZyBmcm9tICcuL2Rvd25sb2FkLXBuZyc7XG5cbmNvbnN0IGNvbnZlcnQgPSAobnVtYmVyOiBudW1iZXIsIG9wdGlvbnM6IENvbnZlcnRPcHRpb25zKSA9PiB7XG4gICAgLy8gVmFsaWRhdGluZyBpbnB1dFxuICAgIGlmIChpc05hTihudW1iZXIpIHx8IG51bWJlciA+IDEwMDAgfHwgbnVtYmVyIDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyogTmVlZCB0byBhZGQgYW5vdGhlciBzbGFzaCB0byBsYXRleCBzdHJpbmdzIHRvIHByZXZlbnQgc2xhc2ggZXNjYXBlICovXG5cbiAgICAvLyBMaXN0IG9mIGZ1bmN0aW9ucyB0aGF0IGdlbmVyYXRlIExhVGVYIG1hdGggZXhwcmVzc2lvbnNcbiAgICAvLyBGdW5jdGlvbnMgYXJlIGNob3NlbiByYW5kb21seVxuICAgIGxldCBwb3NzaWJsZV9vcHRpb25zOiBvcGVyYXRpb25bXSA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMuZXVsZXJzSWRlbnRpdHkpIHtcbiAgICAgICAgcG9zc2libGVfb3B0aW9ucy5wdXNoKHJlcHJlc2VudGF0aW9ucy5ldWxlcnNJZGVudGl0eSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmV4cG9uZW50aWFsTGltaXRzKSB7XG4gICAgICAgIHBvc3NpYmxlX29wdGlvbnMucHVzaChuID0+IHJlcHJlc2VudGF0aW9ucy5saW1pdE5hdHVyYWxMb2cobiwgb3B0aW9ucy5udW1iZXJUaGVvcnkpKTtcbiAgICAgICAgcG9zc2libGVfb3B0aW9ucy5wdXNoKG4gPT4gcmVwcmVzZW50YXRpb25zLmxpbWl0RXhwb25lbnRpYWwobiwgb3B0aW9ucy5udW1iZXJUaGVvcnkpKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucG9seW5vbWlhbExpbWl0cykge1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gocmVwcmVzZW50YXRpb25zLmxpbURpZmZUd29TcXVhcmVzKTtcbiAgICAgICAgcG9zc2libGVfb3B0aW9ucy5wdXNoKHJlcHJlc2VudGF0aW9ucy5saW1pdFBvbHlub21pYWwpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmdlb21ldHJpY1Nlcmllcykge1xuICAgICAgICBwb3NzaWJsZV9vcHRpb25zLnB1c2gobiA9PlxuICAgICAgICAgICAgcmVwcmVzZW50YXRpb25zLmluZmluaXRlR2VvbWV0cmljU2VyaWVzKG4sIG9wdGlvbnMubnVtYmVyVGhlb3J5KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIGRlY29yYXRlIGVhY2ggb3BlcmF0aW9uIHdpdGggYSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiB0aGUgaW5wdXQgaXMgb2YgYSBjZXJ0YWluIGZvcm0sIGFuZCBpZiBpdCBpcyBpdCBvdmVycmlkZXMgdGhlIGRlY29yYXRlZCBmdW5jdGlvbidzIHVzdWFsIHJlc3VsdCB3aXRoIGl0J3Mgb3duLlxuICAgIHBvc3NpYmxlX29wdGlvbnMgPSBwb3NzaWJsZV9vcHRpb25zLm1hcChmID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbmFsRGVjb21wb3NpdGlvbihmLCBvcHRpb25zKTtcbiAgICB9KTtcblxuICAgIGxldCBpbnB1dCA9IGRlY29tcG9zZShudW1iZXIsIHBvc3NpYmxlX29wdGlvbnMpO1xuXG4gICAgLy8gIERpc2FibGUgdGhlIGRpc3BsYXkgYW5kIHJlbmRlciBidXR0b25zIHVudGlsIE1hdGhKYXggaXMgZG9uZVxuICAgIHZhciBkaXNwbGF5ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXknKTtcbiAgICB2YXIgYnV0dG9uID0gPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW5kZXInKTtcbiAgICBidXR0b24uZGlzYWJsZWQgPSBkaXNwbGF5LmRpc2FibGVkID0gdHJ1ZTtcbiAgICBsZXQgZG93bmxvYWRCdG4gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLWltZycpO1xuXG4gICAgLy8gIENsZWFyIHRoZSBvbGQgb3V0cHV0XG5cbiAgICBsZXQgb3V0cHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dCcpITtcbiAgICBvdXRwdXQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAvLyAgUmVzZXQgdGhlIHRleCBsYWJlbHMgKGFuZCBhdXRvbWF0aWMgZXF1YXRpb24gbnVtYmVycywgdGhvdWdoIHRoZXJlIGFyZW4ndCBhbnkgaGVyZSkuXG4gICAgLy8gIEdldCB0aGUgY29udmVyc2lvbiBvcHRpb25zIChtZXRyaWNzIGFuZCBkaXNwbGF5IHNldHRpbmdzKVxuICAgIC8vICBDb252ZXJ0IHRoZSBpbnB1dCB0byBDb21tb25IVE1MIG91dHB1dCBhbmQgdXNlIGEgcHJvbWlzZSB0byB3YWl0IGZvciBpdCB0byBiZSByZWFkeVxuICAgIC8vICAgIChpbiBjYXNlIGFuIGV4dGVuc2lvbiBuZWVkcyB0byBiZSBsb2FkZWQgZHluYW1pY2FsbHkpLlxuICAgIE1hdGhKYXgudGV4UmVzZXQoKTtcbiAgICB2YXIgbWF0aEpheE9wdGlvbnMgPSBNYXRoSmF4LmdldE1ldHJpY3NGb3Iob3V0cHV0KTtcbiAgICBtYXRoSmF4T3B0aW9ucy5kaXNwbGF5ID0gZGlzcGxheS5jaGVja2VkO1xuICAgIE1hdGhKYXgudGV4MnN2Z1Byb21pc2UoaW5wdXQsIG1hdGhKYXhPcHRpb25zKVxuICAgICAgICAudGhlbihmdW5jdGlvbihub2RlOiBhbnkpIHtcbiAgICAgICAgICAgIC8vICBUaGUgcHJvbWlzZSByZXR1cm5zIHRoZSB0eXBlc2V0IG5vZGUsIHdoaWNoIHdlIGFkZCB0byB0aGUgb3V0cHV0XG4gICAgICAgICAgICAvLyAgVGhlbiB1cGRhdGUgdGhlIGRvY3VtZW50IHRvIGluY2x1ZGUgdGhlIGFkanVzdGVkIENTUyBmb3IgdGhlXG4gICAgICAgICAgICAvLyAgICBjb250ZW50IG9mIHRoZSBuZXcgZXF1YXRpb24uXG4gICAgICAgICAgICBvdXRwdXQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICBNYXRoSmF4LnN0YXJ0dXAuZG9jdW1lbnQuY2xlYXIoKTtcbiAgICAgICAgICAgIE1hdGhKYXguc3RhcnR1cC5kb2N1bWVudC51cGRhdGVEb2N1bWVudCgpO1xuICAgICAgICAgICAgLy8gRGlzcGxheSBkb3dubG9hZCBidXR0b25cbiAgICAgICAgICAgIGRvd25sb2FkQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyOiBFcnJvcikge1xuICAgICAgICAgICAgLy8gIElmIHRoZXJlIHdhcyBhbiBlcnJvciwgcHV0IHRoZSBtZXNzYWdlIGludG8gdGhlIG91dHB1dCBpbnN0ZWFkXG4gICAgICAgICAgICBvdXRwdXRcbiAgICAgICAgICAgICAgICAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncHJlJykpXG4gICAgICAgICAgICAgICAgLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGVyci5tZXNzYWdlKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gIEVycm9yIG9yIG5vdCwgcmUtZW5hYmxlIHRoZSBkaXNwbGF5IGFuZCByZW5kZXIgYnV0dG9uc1xuICAgICAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gZGlzcGxheS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbn07XG5jb25zdCBtYWluID0gKCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudDtcbiAgICBjb25zdCBudW1iZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3QgZ2FtbWFGdW5jdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1tYS1mdW5jdGlvbicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgZXVsZXJzSWRlbnRpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXVsZXJzLWlkZW50aXR5JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBleHBvbmVudGlhbExpbWl0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW1pdHMtZXhwb25lbnRpYWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHBvbHlub21pYWxMaW1pdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGltaXRzLXBvbHlub21pYWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IG51bWJlclRoZW9yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdudW1iZXItdGhlb3J5JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBnZW9tZXRyaWNTZXJpZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VvbWV0cmljLXNlcmllcycpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb252ZXJ0KHBhcnNlSW50KG51bWJlci52YWx1ZSksIHtcbiAgICAgICAgICAgIGdhbW1hRnVuY3Rpb246IGdhbW1hRnVuY3Rpb24uY2hlY2tlZCxcbiAgICAgICAgICAgIGV1bGVyc0lkZW50aXR5OiBldWxlcnNJZGVudGl0eS5jaGVja2VkLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxMaW1pdHM6IGV4cG9uZW50aWFsTGltaXRzLmNoZWNrZWQsXG4gICAgICAgICAgICBwb2x5bm9taWFsTGltaXRzOiBwb2x5bm9taWFsTGltaXRzLmNoZWNrZWQsXG4gICAgICAgICAgICBudW1iZXJUaGVvcnk6IG51bWJlclRoZW9yeS5jaGVja2VkLFxuICAgICAgICAgICAgZ2VvbWV0cmljU2VyaWVzOiBnZW9tZXRyaWNTZXJpZXMuY2hlY2tlZCxcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkb3dubG9hZF9wbmcubWFpbigpO1xufTtcblxubWFpbigpO1xuIl0sIm5hbWVzIjpbInJhbmRvbUVsZW1lbnQiLCJhcnJheSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsInNodWZmbGUiLCJyYW5kb21JbmRleCIsImN1cnJlbnRJbmRleCIsImlzUHJpbWUiLCJuIiwiaSIsInNxcnQiLCJnZXRGYWN0b3JzIiwiZmFjdG9ycyIsInB1c2giLCJpc1BvdzIiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJsb2cyIiwiZ2NkIiwiYSIsImIiLCJocmVmIiwicyIsInVybCIsIl9ldWxlclBoaSIsIngiLCJfY2FjaGVkUHJpbWVzIiwicHJpbWVTaWV2ZSIsInAiLCJyZXNQcmltZXMiLCJfcHJpbWVTaWV2ZSIsIl9wcmltZUNvdW50aW5nRnVuY3Rpb24iLCJmaWx0ZXIiLCJudW1iZXJUaGVvcnlGdW5jdGlvbnMiLCJtYXRjaGluZ1BoaUlucHV0cyIsIm1hdGNoaW5nUGlJbnB1dHMiLCJmdW5jdGlvbk9wdGlvbnMiLCJtYXRjaGluZ0lucHV0IiwibGltaXRQb2x5bm9taWFsIiwiciIsIm0iLCJoaWdoZXN0UG93ZXIiLCJkZW5vbWluYXRvck51bWJlck9mVGVybXMiLCJzaWducyIsIm51bWVyYXRvciIsImRlbm9taW5hdG9yIiwiY29lZiIsInBvd2VyIiwiZXVsZXJzSWRlbnRpdHkiLCJsaW1EaWZmVHdvU3F1YXJlcyIsInRleCIsInNhbWVOdW1iZXIiLCJkZWNvbXBvc2VBQkMiLCJudW1iZXIiLCJvcHMiLCJjIiwiZGVjb21wb3NlU3FydCIsInNxdWFyZSIsImRlY29tcG9zZVNxdWFyZSIsInNxdWFyZVJvb3QiLCJzdW0iLCJvZGRWYWwiLCJkZWNvbXBvc2VEaWZmZXJlbmNlU3F1YXJlcyIsImNlaWwiLCJkZWNvbXBvc2VBZGRNdWx0aXBseSIsInJhbmROdW0iLCJkZWNvbXBvc2VNdWxEaXZpZGUiLCJkZWNvbXBvc2VMY20iLCJkaXZpc29yIiwiZ2V0UHJpbWVGYWN0b3JzIiwiZmFjdG9yRXhwIiwiTWFwIiwiZiIsInNldCIsImhhcyIsImdldCIsInByaW1lRmFjdG9ycyIsIkFycmF5IiwiZnJvbSIsImtleXMiLCJzbGljZUlkeCIsImdyb3VwMSIsInNsaWNlIiwiZ3JvdXAyIiwiZ3JvdXAxVmFsdWUiLCJtYXAiLCJyZWR1Y2UiLCJncm91cDJWYWx1ZSIsImRlY29tcG9zZVN1bUNvbnNlY3V0aXZlIiwib2RkRmFjdG9ycyIsImNob3NlbkZhY3RvciIsIm1pblZhbHVlIiwibWluVmFsdWVTaWduIiwiYWJzIiwiZG93bmxvYWRCdG4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZG93bmxvYWRQTkciLCJzdmciLCJxdWVyeVNlbGVjdG9yIiwidmFsdWUiLCJ3IiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJoIiwiZGF0YSIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInN2Z0RhdGFVcmwiLCJidG9hIiwiY2FudmFzIiwiY3JlYXRlRWxlbWVudCIsInNjYWxlRmFjdG9yIiwibWF4Iiwid2lkdGgiLCJoZWlnaHQiLCJjb25zb2xlIiwibG9nIiwiY3R4IiwiZ2V0Q29udGV4dCIsInN2Z0RhdGFJbWFnZSIsIkltYWdlIiwib25sb2FkIiwiZHJhd0ltYWdlIiwidG9CbG9iIiwiYmxvYiIsIkVycm9yIiwiZmlsZW5hbWUiLCJlbGVtIiwid2luZG93IiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZG93bmxvYWQiLCJjbGljayIsInNyYyIsImNvbnZlcnQiLCJvcHRpb25zIiwiaXNOYU4iLCJwb3NzaWJsZV9vcHRpb25zIiwiZXhwb25lbnRpYWxMaW1pdHMiLCJudW1iZXJUaGVvcnlFbmFibGVkIiwibnVtYmVyVGhlb3J5IiwicG9seW5vbWlhbExpbWl0cyIsImdlb21ldHJpY1NlcmllcyIsIndyYXBwZWRGdW5jdGlvbiIsImZhYyIsImZhY3RvcmlhbHMiLCJpc0ZhY3RvcmlhbCIsImdhbW1hRnVuY3Rpb25FbmFibGVkIiwiZ2FtbWFGdW5jdGlvbiIsImNvbmRpdGlvbmFsRGVjb21wb3NpdGlvbiIsImlucHV0IiwiYXZhaWxhYmxlX29wZXJhdGlvbnMiLCJvcGVyYXRpb25zIiwiZGVjb21wb3NpdGlvbnMiLCJpc1NxdWFyZSIsImlzT2RkIiwiZGVjb21wb3NlIiwiZGlzcGxheSIsImJ1dHRvbiIsImRpc2FibGVkIiwib3V0cHV0IiwiaW5uZXJIVE1MIiwiTWF0aEpheCIsInRleFJlc2V0IiwibWF0aEpheE9wdGlvbnMiLCJnZXRNZXRyaWNzRm9yIiwiY2hlY2tlZCIsInRleDJzdmdQcm9taXNlIiwidGhlbiIsIm5vZGUiLCJhcHBlbmRDaGlsZCIsInN0YXJ0dXAiLCJjbGVhciIsInVwZGF0ZURvY3VtZW50Iiwic3R5bGUiLCJjYXRjaCIsImVyciIsImNyZWF0ZVRleHROb2RlIiwibWVzc2FnZSIsImZvcm0iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=